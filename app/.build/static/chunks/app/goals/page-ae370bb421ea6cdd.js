(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{7008:function(e,a,s){Promise.resolve().then(s.bind(s,9806))},9806:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return M}});var t=s(7821),l=s(8078),n=s(5407),r=s(7769),i=s(7469),c=s(7918),o=s(9523),d=s(5189),x=s(9781),m=s(2758),h=s(3336),g=s(6625),u=s(9701),p=s(7002),j=s(1270),y=s(6225),N=s(1027),v=s(9892),f=s(4680);function b(e){let{open:a,onOpenChange:s,onGoalAdded:n}=e,[r,c]=(0,l.useState)({name:"",description:"",goalType:"",targetAmount:"",targetDate:"",categoryId:""}),[o,d]=(0,l.useState)([]),[x,m]=(0,l.useState)(!1);(0,l.useEffect)(()=>{a&&h()},[a]);let h=async()=>{try{let e=await fetch("/api/categories");if(e.ok){let a=await e.json();d(a)}}catch(e){console.error("Error fetching categories:",e)}},g=async e=>{if(e.preventDefault(),!r.name||!r.goalType||!r.targetAmount){f.Am.error("Please fill in all required fields");return}m(!0);try{let e={...r,targetAmount:parseFloat(r.targetAmount),categoryId:r.categoryId||null,targetDate:r.targetDate||null},a=await fetch("/api/goals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok)f.Am.success("Goal created successfully!"),n(),s(!1),c({name:"",description:"",goalType:"",targetAmount:"",targetDate:"",categoryId:""});else{let e=await a.json();f.Am.error(e.error||"Failed to create goal")}}catch(e){console.error("Error creating goal:",e),f.Am.error("Failed to create goal")}finally{m(!1)}},b=[{value:v.lC.SAVINGS,label:"Savings"},{value:v.lC.EMERGENCY_FUND,label:"Emergency Fund"},{value:v.lC.HOUSE,label:"House"},{value:v.lC.EDUCATION,label:"Education"},{value:v.lC.VACATION,label:"Vacation"},{value:v.lC.RETIREMENT,label:"Retirement"},{value:v.lC.INVESTMENT,label:"Investment"},{value:v.lC.DEBT_PAYOFF,label:"Debt Payoff"},{value:v.lC.OTHER,label:"Other"}];return(0,t.jsx)(u.Vq,{open:a,onOpenChange:s,children:(0,t.jsxs)(u.cZ,{className:"sm:max-w-[500px]",children:[(0,t.jsx)(u.fK,{children:(0,t.jsx)(u.$N,{children:"Add New Financial Goal"})}),(0,t.jsxs)("form",{onSubmit:g,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j._,{htmlFor:"name",children:"Goal Name"}),(0,t.jsx)(p.I,{id:"name",value:r.name,onChange:e=>c({...r,name:e.target.value}),placeholder:"e.g., Emergency Fund, House Down Payment",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j._,{htmlFor:"goalType",children:"Goal Type"}),(0,t.jsxs)(N.Ph,{value:r.goalType,onValueChange:e=>c({...r,goalType:e}),required:!0,children:[(0,t.jsx)(N.i4,{children:(0,t.jsx)(N.ki,{placeholder:"Select goal type"})}),(0,t.jsx)(N.Bw,{children:b.map(e=>(0,t.jsx)(N.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j._,{htmlFor:"targetAmount",children:"Target Amount (â‚¹)"}),(0,t.jsx)(p.I,{id:"targetAmount",type:"number",value:r.targetAmount,onChange:e=>c({...r,targetAmount:e.target.value}),placeholder:"100000",min:"1",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j._,{htmlFor:"targetDate",children:"Target Date (Optional)"}),(0,t.jsx)(p.I,{id:"targetDate",type:"date",value:r.targetDate,onChange:e=>c({...r,targetDate:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j._,{htmlFor:"categoryId",children:"Category (Optional)"}),(0,t.jsxs)(N.Ph,{value:r.categoryId,onValueChange:e=>c({...r,categoryId:e}),children:[(0,t.jsx)(N.i4,{children:(0,t.jsx)(N.ki,{placeholder:"Select category"})}),(0,t.jsx)(N.Bw,{children:o.map(e=>(0,t.jsx)(N.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j._,{htmlFor:"description",children:"Description (Optional)"}),(0,t.jsx)(y.g,{id:"description",value:r.description,onChange:e=>c({...r,description:e.target.value}),placeholder:"Additional details about your goal...",rows:3})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,t.jsx)(i.z,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,t.jsx)(i.z,{type:"submit",disabled:x,children:x?"Creating...":"Create Goal"})]})]})]})})}var C=s(8504),E=s(750),w=s(2348),T=s(2021),A=s(1844),k=s(9044),O=s(3778),D=s(3662),I=s(1232),S=s(1138),Z=s(7344);let G={[v.lC.SAVINGS]:"bg-green-100 text-green-800",[v.lC.DEBT_PAYOFF]:"bg-red-100 text-red-800",[v.lC.INVESTMENT]:"bg-blue-100 text-blue-800",[v.lC.EMERGENCY_FUND]:"bg-orange-100 text-orange-800",[v.lC.EDUCATION]:"bg-purple-100 text-purple-800",[v.lC.HOUSE]:"bg-indigo-100 text-indigo-800",[v.lC.VACATION]:"bg-pink-100 text-pink-800",[v.lC.RETIREMENT]:"bg-gray-100 text-gray-800",[v.lC.OTHER]:"bg-yellow-100 text-yellow-800"},P={[v.lC.SAVINGS]:"Savings",[v.lC.DEBT_PAYOFF]:"Debt Payoff",[v.lC.INVESTMENT]:"Investment",[v.lC.EMERGENCY_FUND]:"Emergency Fund",[v.lC.EDUCATION]:"Education",[v.lC.HOUSE]:"House",[v.lC.VACATION]:"Vacation",[v.lC.RETIREMENT]:"Retirement",[v.lC.OTHER]:"Other"};function F(e){let{goals:a,onGoalUpdated:s}=e,x=(0,C.useRouter)(),[m,h]=(0,l.useState)(null),[u,p]=(0,l.useState)(!1),[j,y]=(0,l.useState)(!1),[N,f]=(0,l.useState)(!1),b=async e=>{if(confirm("Are you sure you want to delete this goal?"))try{(await fetch("/api/goals/".concat(e),{method:"DELETE"})).ok&&s()}catch(e){console.error("Error deleting goal:",e)}},F=async e=>{try{(await fetch("/api/goals/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:v.tP.COMPLETED})})).ok&&s()}catch(e){console.error("Error updating goal:",e)}},M=e=>{h(e),p(!0)},V=e=>{h(e),y(!0)},z=e=>{h(e),f(!0)},_=e=>{x.push("/goals/".concat(e))};return 0===a.length?(0,t.jsx)(r.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:(0,t.jsxs)(r.aY,{className:"flex flex-col items-center justify-center py-12",children:[(0,t.jsx)(o.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No goals yet"}),(0,t.jsx)("p",{className:"text-gray-600 text-center mb-4",children:"Start by creating your first financial goal to track your progress."})]})}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((e,a)=>{let s=e.dynamicProgress,l=e.totalProgress||e.currentAmount,x=e.linkedInvestmentValue||0,m=void 0!==s?s:e.targetAmount>0?e.currentAmount/e.targetAmount*100:0,h=e.status===v.tP.COMPLETED,u=e.targetDate?Math.ceil((new Date(e.targetDate).getTime()-new Date().getTime())/864e5):null;return(0,t.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},children:(0,t.jsxs)(r.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[(0,t.jsx)(r.Ol,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)(r.ll,{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[(0,t.jsx)(o.Z,{className:"h-5 w-5 text-blue-600"}),e.name,h&&(0,t.jsx)(E.Z,{className:"h-4 w-4 text-green-600"})]}),(0,t.jsx)(c.C,{className:G[e.goalType],children:P[e.goalType]})]}),(0,t.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>_(e.id),title:"View Details",children:(0,t.jsx)(w.Z,{className:"h-4 w-4"})}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>V(e),title:"Edit Goal",children:(0,t.jsx)(T.Z,{className:"h-4 w-4"})}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>z(e),disabled:h,title:"Link Investment",children:(0,t.jsx)(A.Z,{className:"h-4 w-4"})}),(0,t.jsx)(i.z,{variant:"ghost",size:"sm",onClick:()=>b(e.id),title:"Delete Goal",children:(0,t.jsx)(k.Z,{className:"h-4 w-4"})})]})]})}),(0,t.jsxs)(r.aY,{className:"space-y-4",children:[e.description&&(0,t.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Progress"}),(0,t.jsxs)("span",{className:"font-medium",children:[Math.min(m,100).toFixed(1),"%"]})]}),(0,t.jsx)(D.E,{value:Math.min(m,100),className:"h-2"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Contributions"}),(0,t.jsx)("p",{className:"font-semibold text-green-600",children:(0,g.xG)(e.currentAmount)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Target"}),(0,t.jsx)("p",{className:"font-semibold text-blue-600",children:(0,g.xG)(e.targetAmount)})]})]}),x>0&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Investments"}),(0,t.jsx)("p",{className:"font-semibold text-purple-600",children:(0,g.xG)(x)})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-gray-600",children:"Total Progress"}),(0,t.jsx)("p",{className:"font-semibold text-emerald-600",children:(0,g.xG)(l)})]})]}),e.targetDate&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,t.jsx)(O.Z,{className:"h-4 w-4 text-gray-400"}),(0,t.jsx)("span",{className:"text-gray-600",children:null!==u&&u>0?"".concat(u," days remaining"):0===u?"Due today":"Overdue"})]}),!h&&m<100&&(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsxs)(i.z,{size:"sm",onClick:()=>M(e),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:[(0,t.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),"Add Contribution"]}),m>=100&&(0,t.jsxs)(i.z,{size:"sm",variant:"outline",onClick:()=>F(e.id),className:"border-green-600 text-green-600 hover:bg-green-50",children:[(0,t.jsx)(E.Z,{className:"h-4 w-4 mr-1"}),"Complete"]})]}),h&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 p-2 rounded-lg",children:[(0,t.jsx)(E.Z,{className:"h-4 w-4"}),(0,t.jsx)("span",{className:"text-sm font-medium",children:"Goal Completed!"})]})]})]})},e.id)})}),m&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(I.m,{open:u,onOpenChange:p,goal:m,onContributionAdded:()=>{s(),p(!1),h(null)}}),(0,t.jsx)(S.V,{open:j,onOpenChange:y,goal:m,onGoalUpdated:()=>{s(),y(!1),h(null)}}),(0,t.jsx)(Z.a,{open:N,onOpenChange:f,goalId:m.id,onInvestmentLinked:()=>{s(),f(!1),h(null)}})]})]})}function M(){let[e,a]=(0,l.useState)(null),[s,u]=(0,l.useState)(!0),[p,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{y()},[]);let y=async()=>{try{u(!0);let e=await fetch("/api/goals?includeInvestments=true");if(e.ok){let s=await e.json(),t=(null==s?void 0:s.length)||0,l=(null==s?void 0:s.filter(e=>"ACTIVE"===e.status).length)||0,n=(null==s?void 0:s.filter(e=>"COMPLETED"===e.status).length)||0,r=(null==s?void 0:s.reduce((e,a)=>e+a.targetAmount,0))||0,i=(null==s?void 0:s.reduce((e,a)=>e+a.currentAmount,0))||0,c=(null==s?void 0:s.reduce((e,a)=>e+(a.totalProgress||a.currentAmount),0))||0;a({goals:s||[],stats:{totalGoals:t,targetAmount:r,currentAmount:i,totalProgressAmount:c,averageProgress:t>0?c/r*100:0,completedGoals:n,activeGoals:l}})}}catch(e){console.error("Error fetching goals data:",e)}finally{u(!1)}};return s?(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,t.jsx)("div",{className:"h-8 bg-slate-200 rounded w-1/4"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsx)("div",{className:"h-32 bg-slate-200 rounded"},a))})]})}):e?(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-br from-professional-blue to-professional-blue-light rounded-lg",children:(0,t.jsx)(o.Z,{className:"h-6 w-6 text-white"})}),"Financial Goals"]}),(0,t.jsx)("p",{className:"text-slate-600 mt-1",children:"Track your progress towards financial milestones"})]}),(0,t.jsxs)(i.z,{className:"bg-professional-blue hover:bg-professional-blue-dark text-white",onClick:()=>j(!0),children:[(0,t.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Add Goal"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:(0,t.jsxs)(r.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.ll,{className:"text-sm font-medium text-slate-600",children:"Total Goals"}),(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,t.jsx)(o.Z,{className:"h-4 w-4 text-professional-blue"})})]}),(0,t.jsxs)(r.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-professional-blue",children:e.stats.totalGoals}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsxs)(c.C,{variant:"secondary",className:"text-xs bg-emerald-100 text-emerald-700",children:[e.stats.activeGoals," Active"]}),(0,t.jsxs)(c.C,{variant:"secondary",className:"text-xs bg-slate-100 text-slate-700",children:[e.stats.completedGoals," Completed"]})]})]})]})}),(0,t.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,t.jsxs)(r.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.ll,{className:"text-sm font-medium text-slate-600",children:"Target Amount"}),(0,t.jsx)("div",{className:"p-2 bg-emerald-100 rounded-lg",children:(0,t.jsx)(x.Z,{className:"h-4 w-4 text-emerald-600"})})]}),(0,t.jsxs)(r.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-emerald-600",children:(0,g.xG)(e.stats.targetAmount)}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Total target"})]})]})}),(0,t.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:(0,t.jsxs)(r.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.ll,{className:"text-sm font-medium text-slate-600",children:"Total Progress"}),(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,t.jsx)(m.Z,{className:"h-4 w-4 text-professional-blue"})})]}),(0,t.jsxs)(r.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-professional-blue",children:(0,g.xG)(e.stats.totalProgressAmount)}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Contributions + Investments"})]})]})}),(0,t.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:(0,t.jsxs)(r.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(r.ll,{className:"text-sm font-medium text-slate-600",children:"Average Progress"}),(0,t.jsx)("div",{className:"p-2 bg-emerald-100 rounded-lg",children:(0,t.jsx)(h.Z,{className:"h-4 w-4 text-emerald-600"})})]}),(0,t.jsxs)(r.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-emerald-600",children:[e.stats.averageProgress.toFixed(1),"%"]}),(0,t.jsx)("div",{className:"w-full bg-slate-200 rounded-full h-2 mt-2",children:(0,t.jsx)("div",{className:"bg-emerald-600 h-2 rounded-full transition-all duration-500",style:{width:"".concat(Math.min(e.stats.averageProgress,100),"%")}})})]})]})})]}),(0,t.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:(0,t.jsx)(F,{goals:e.goals,onGoalUpdated:y})})]}),(0,t.jsx)(b,{open:p,onOpenChange:j,onGoalAdded:()=>{j(!1),y()}})]}):(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Error loading goals"}),(0,t.jsx)("p",{className:"text-slate-600 mt-2",children:"Please try refreshing the page"})]})})}},3336:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(6576).Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},750:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(6576).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},2348:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(6576).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])}},function(e){e.O(0,[787,646,75,815,800,345,115,364,744],function(){return e(e.s=7008)}),_N_E=e.O()}]);