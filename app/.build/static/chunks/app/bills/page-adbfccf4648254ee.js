(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[23],{2674:function(e,t,s){Promise.resolve().then(s.bind(s,43))},43:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var a=s(784),l=s(1960),i=s(1555),n=s(9026),r=s(5796),c=s(1789),d=s(4979),o=s(4705),x=s(7675);let h=(0,s(6382).Z)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var u=s(6667),m=s(7076),p=s(5913),y=s(3718),f=s(7237),j=s(3078),v=s(9175),g=s(6117),b=s(5593);function N(e){let{open:t,onOpenChange:s,onBillAdded:i,editingBill:n}=e,[c,d]=(0,l.useState)([]),[o,x]=(0,l.useState)(!1),[h,u]=(0,l.useState)({name:"",amount:0,frequency:b.tx.MONTHLY,description:"",categoryId:"",nextDueDate:""});(0,l.useEffect)(()=>{if(t){if(m(),n)u({name:n.name,amount:n.amount,frequency:n.frequency,description:n.description||"",categoryId:n.categoryId,nextDueDate:new Date(n.nextDueDate).toISOString().split("T")[0]});else{let e=new Date;e.setDate(e.getDate()+1),u({name:"",amount:0,frequency:b.tx.MONTHLY,description:"",categoryId:"",nextDueDate:e.toISOString().split("T")[0]})}}},[t,n]);let m=async()=>{try{let e=await fetch("/api/categories");if(e.ok){let t=await e.json();d(t)}}catch(e){console.error("Error fetching categories:",e)}},N=async e=>{if(e.preventDefault(),!h.name||!h.amount||!h.categoryId||!h.nextDueDate){g.Am.error("Please fill in all required fields");return}x(!0);try{let e=n?"/api/bills/".concat(n.id):"/api/bills",t={...h,amount:parseFloat(h.amount.toString())},a=await fetch(e,{method:n?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(a.ok)g.Am.success("Bill ".concat(n?"updated":"created"," successfully")),i(),s(!1);else{let e=await a.json();g.Am.error(e.error||"Failed to ".concat(n?"update":"create"," bill"))}}catch(e){console.error("Error saving bill:",e),g.Am.error("Failed to ".concat(n?"update":"create"," bill"))}finally{x(!1)}},w=[{value:b.tx.WEEKLY,label:"Weekly"},{value:b.tx.MONTHLY,label:"Monthly"},{value:b.tx.QUARTERLY,label:"Quarterly"},{value:b.tx.HALF_YEARLY,label:"Half-yearly"},{value:b.tx.YEARLY,label:"Yearly"}];return(0,a.jsx)(p.Vq,{open:t,onOpenChange:s,children:(0,a.jsxs)(p.cZ,{className:"sm:max-w-[425px]",children:[(0,a.jsxs)(p.fK,{children:[(0,a.jsx)(p.$N,{children:n?"Edit Bill":"Add New Bill"}),(0,a.jsx)(p.Be,{children:n?"Update the bill details below.":"Create a new recurring bill to track your regular payments."})]}),(0,a.jsxs)("form",{onSubmit:N,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"name",children:"Bill Name *"}),(0,a.jsx)(y.I,{id:"name",value:h.name,onChange:e=>u({...h,name:e.target.value}),placeholder:"e.g., Electricity Bill, Rent, Netflix",required:!0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"amount",children:"Amount (â‚¹) *"}),(0,a.jsx)(y.I,{id:"amount",type:"number",step:"0.01",min:"0",value:h.amount||"",onChange:e=>u({...h,amount:parseFloat(e.target.value)||0}),placeholder:"0.00",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"frequency",children:"Frequency *"}),(0,a.jsxs)(v.Ph,{value:h.frequency,onValueChange:e=>u({...h,frequency:e}),children:[(0,a.jsx)(v.i4,{children:(0,a.jsx)(v.ki,{})}),(0,a.jsx)(v.Bw,{children:w.map(e=>(0,a.jsx)(v.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"category",children:"Category *"}),(0,a.jsxs)(v.Ph,{value:h.categoryId,onValueChange:e=>u({...h,categoryId:e}),children:[(0,a.jsx)(v.i4,{children:(0,a.jsx)(v.ki,{placeholder:"Select a category"})}),(0,a.jsx)(v.Bw,{children:c.map(e=>(0,a.jsx)(v.Ql,{value:e.id,children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color}}),e.name]})},e.id))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"nextDueDate",children:"Next Due Date *"}),(0,a.jsx)(y.I,{id:"nextDueDate",type:"date",value:h.nextDueDate,onChange:e=>u({...h,nextDueDate:e.target.value}),required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f._,{htmlFor:"description",children:"Description"}),(0,a.jsx)(j.g,{id:"description",value:h.description,onChange:e=>u({...h,description:e.target.value}),placeholder:"Optional description or notes",rows:3})]}),(0,a.jsxs)(p.cN,{children:[(0,a.jsx)(r.z,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,a.jsx)(r.z,{type:"submit",disabled:o,children:o?"Saving...":n?"Update Bill":"Create Bill"})]})]})]})})}function w(){let[e,t]=(0,l.useState)(null),[s,p]=(0,l.useState)(!0),[y,f]=(0,l.useState)(!1);(0,l.useEffect)(()=>{j()},[]);let j=async()=>{try{p(!0);let[e,s]=await Promise.all([fetch("/api/bills"),fetch("/api/bills/stats")]),a=e.ok?await e.json():[],l=s.ok?await s.json():{totalMonthlyBills:0,paidThisMonth:0,pendingThisMonth:0,overdueCount:0,upcomingWeek:0},i=a.reduce((e,t)=>"MONTHLY"===t.frequency?e+t.amount:"WEEKLY"===t.frequency?e+4.33*t.amount:"QUARTERLY"===t.frequency?e+t.amount/3:"HALF_YEARLY"===t.frequency?e+t.amount/6:"YEARLY"===t.frequency?e+t.amount/12:e,0),n={totalBills:l.totalMonthlyBills,monthlyAmount:i,overdueBills:l.overdueCount,paidThisMonth:l.paidThisMonth};t({bills:a,stats:n})}catch(e){console.error("Error fetching bills data:",e)}finally{p(!1)}};return s?(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,a.jsx)("div",{className:"h-8 bg-slate-200 rounded w-1/4"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"h-32 bg-slate-200 rounded"},t))})]})}):e?(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-8",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-gradient-to-br from-professional-blue to-professional-blue-light rounded-lg",children:(0,a.jsx)(d.Z,{className:"h-6 w-6 text-white"})}),"Bills & Utilities"]}),(0,a.jsx)("p",{className:"text-slate-600 mt-1",children:"Manage your recurring bills and track payments"})]}),(0,a.jsxs)(r.z,{className:"bg-professional-blue hover:bg-professional-blue-dark text-white",onClick:()=>f(!0),children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Add Bill"]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:(0,a.jsxs)(n.Zb,{className:"professional-card hover-shadow",children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium text-slate-600",children:"Total Bills"}),(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(d.Z,{className:"h-4 w-4 text-professional-blue"})})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-professional-blue",children:e.stats.totalBills}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Active bills"})]})]})}),(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,a.jsxs)(n.Zb,{className:"professional-card hover-shadow",children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium text-slate-600",children:"Monthly Amount"}),(0,a.jsx)("div",{className:"p-2 bg-emerald-100 rounded-lg",children:(0,a.jsx)(x.Z,{className:"h-4 w-4 text-emerald-600"})})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-emerald-600",children:(0,m.xG)(e.stats.monthlyAmount)}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Average monthly"})]})]})}),(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:(0,a.jsxs)(n.Zb,{className:"professional-card hover-shadow",children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium text-slate-600",children:"Overdue Bills"}),(0,a.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,a.jsx)(h,{className:"h-4 w-4 text-red-600"})})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e.stats.overdueBills}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Need attention"})]})]})}),(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:(0,a.jsxs)(n.Zb,{className:"professional-card hover-shadow",children:[(0,a.jsxs)(n.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(n.ll,{className:"text-sm font-medium text-slate-600",children:"Paid This Month"}),(0,a.jsx)("div",{className:"p-2 bg-emerald-100 rounded-lg",children:(0,a.jsx)(u.Z,{className:"h-4 w-4 text-emerald-600"})})]}),(0,a.jsxs)(n.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-emerald-600",children:e.stats.paidThisMonth}),(0,a.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Completed payments"})]})]})})]}),(0,a.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:(0,a.jsxs)(n.Zb,{className:"professional-card",children:[(0,a.jsx)(n.Ol,{children:(0,a.jsxs)(n.ll,{className:"text-slate-900",children:["Bills (",e.bills.length,")"]})}),(0,a.jsx)(n.aY,{children:0===e.bills.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)(d.Z,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No bills found"}),(0,a.jsx)("p",{className:"text-slate-600 mb-4",children:"Start by adding your first bill"}),(0,a.jsxs)(r.z,{className:"bg-professional-blue hover:bg-professional-blue-dark text-white",onClick:()=>f(!0),children:[(0,a.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Add Bill"]})]}):(0,a.jsx)("div",{className:"space-y-4",children:e.bills.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("div",{className:"p-2 rounded-full bg-slate-100",children:(0,a.jsx)(d.Z,{className:"h-4 w-4 text-professional-blue"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"font-semibold text-slate-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-slate-600",children:e.frequency})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-lg font-bold text-professional-blue",children:(0,m.xG)(e.amount)}),(0,a.jsx)(c.C,{variant:e.isActive?"default":"secondary",children:e.isActive?"Active":"Inactive"})]})]},e.id))})})]})})]}),(0,a.jsx)(N,{open:y,onOpenChange:f,onBillAdded:()=>{f(!1),j()}})]}):(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Error loading bills"}),(0,a.jsx)("p",{className:"text-slate-600 mt-2",children:"Please try refreshing the page"})]})})}},1789:function(e,t,s){"use strict";s.d(t,{C:function(){return r}});var a=s(784);s(1960);var l=s(664),i=s(5518);let n=(0,l.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function r(e){let{className:t,variant:s,...l}=e;return(0,a.jsx)("div",{className:(0,i.cn)(n({variant:s}),t),...l})}},4979:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(6382).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]])},6667:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});let a=(0,s(6382).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])}},function(e){e.O(0,[813,862,675,819,834,427,275,744],function(){return e(e.s=2674)}),_N_E=e.O()}]);