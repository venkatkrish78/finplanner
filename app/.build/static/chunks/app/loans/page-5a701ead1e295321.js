(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[715],{2131:function(e,a,s){Promise.resolve().then(s.bind(s,8565))},8565:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return b}});var t=s(784),l=s(1960),n=s(1555),i=s(9026),r=s(5796),c=s(7245),o=s(4705),d=s(7675),x=s(5597),m=s(9461),h=s(7076),u=s(5913),p=s(3718),j=s(7237),y=s(3078),g=s(9175),v=s(5593),N=s(6117);function f(e){let{open:a,onOpenChange:s,onLoanAdded:n}=e,[i,c]=(0,l.useState)({name:"",loanType:"",principalAmount:"",interestRate:"",tenure:"",startDate:"",description:"",categoryId:""}),[o,d]=(0,l.useState)([]),[x,m]=(0,l.useState)(!1);(0,l.useEffect)(()=>{a&&(h(),c(e=>({...e,startDate:new Date().toISOString().split("T")[0]})))},[a]);let h=async()=>{try{let e=await fetch("/api/categories");if(e.ok){let a=await e.json();d(a)}}catch(e){console.error("Error fetching categories:",e)}},f=async e=>{if(e.preventDefault(),!i.name||!i.loanType||!i.principalAmount||!i.interestRate||!i.tenure||!i.startDate){N.Am.error("Please fill in all required fields");return}m(!0);try{let e={...i,principalAmount:parseFloat(i.principalAmount),interestRate:parseFloat(i.interestRate),tenure:parseInt(i.tenure),categoryId:i.categoryId||null},a=await fetch("/api/loans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok)N.Am.success("Loan created successfully!"),n(),s(!1),c({name:"",loanType:"",principalAmount:"",interestRate:"",tenure:"",startDate:"",description:"",categoryId:""});else{let e=await a.json();N.Am.error(e.error||"Failed to create loan")}}catch(e){console.error("Error creating loan:",e),N.Am.error("Failed to create loan")}finally{m(!1)}},b=[{value:v.am.HOME_LOAN,label:"Home Loan"},{value:v.am.PERSONAL_LOAN,label:"Personal Loan"},{value:v.am.CAR_LOAN,label:"Car Loan"},{value:v.am.EDUCATION_LOAN,label:"Education Loan"},{value:v.am.CREDIT_CARD,label:"Credit Card"},{value:v.am.BUSINESS_LOAN,label:"Business Loan"},{value:v.am.GOLD_LOAN,label:"Gold Loan"},{value:v.am.OTHER,label:"Other"}],w=(()=>{let e=parseFloat(i.principalAmount),a=parseFloat(i.interestRate)/100/12,s=parseInt(i.tenure);return e&&a&&s?a>0?e*a*Math.pow(1+a,s)/(Math.pow(1+a,s)-1):e/s:0})();return(0,t.jsx)(u.Vq,{open:a,onOpenChange:s,children:(0,t.jsxs)(u.cZ,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,t.jsx)(u.fK,{children:(0,t.jsx)(u.$N,{children:"Add New Loan"})}),(0,t.jsxs)("form",{onSubmit:f,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j._,{htmlFor:"name",children:"Loan Name"}),(0,t.jsx)(p.I,{id:"name",value:i.name,onChange:e=>c({...i,name:e.target.value}),placeholder:"e.g., Home Loan - SBI",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j._,{htmlFor:"loanType",children:"Loan Type"}),(0,t.jsxs)(g.Ph,{value:i.loanType,onValueChange:e=>c({...i,loanType:e}),required:!0,children:[(0,t.jsx)(g.i4,{children:(0,t.jsx)(g.ki,{placeholder:"Select loan type"})}),(0,t.jsx)(g.Bw,{children:b.map(e=>(0,t.jsx)(g.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j._,{htmlFor:"principalAmount",children:"Principal Amount (₹)"}),(0,t.jsx)(p.I,{id:"principalAmount",type:"number",value:i.principalAmount,onChange:e=>c({...i,principalAmount:e.target.value}),placeholder:"1000000",min:"1",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j._,{htmlFor:"interestRate",children:"Interest Rate (% p.a.)"}),(0,t.jsx)(p.I,{id:"interestRate",type:"number",step:"0.01",value:i.interestRate,onChange:e=>c({...i,interestRate:e.target.value}),placeholder:"8.5",min:"0",required:!0})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j._,{htmlFor:"tenure",children:"Tenure (months)"}),(0,t.jsx)(p.I,{id:"tenure",type:"number",value:i.tenure,onChange:e=>c({...i,tenure:e.target.value}),placeholder:"240",min:"1",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j._,{htmlFor:"startDate",children:"Start Date"}),(0,t.jsx)(p.I,{id:"startDate",type:"date",value:i.startDate,onChange:e=>c({...i,startDate:e.target.value}),required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j._,{htmlFor:"categoryId",children:"Category (Optional)"}),(0,t.jsxs)(g.Ph,{value:i.categoryId,onValueChange:e=>c({...i,categoryId:e}),children:[(0,t.jsx)(g.i4,{children:(0,t.jsx)(g.ki,{placeholder:"Select category"})}),(0,t.jsx)(g.Bw,{children:o.map(e=>(0,t.jsx)(g.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(j._,{htmlFor:"description",children:"Description (Optional)"}),(0,t.jsx)(y.g,{id:"description",value:i.description,onChange:e=>c({...i,description:e.target.value}),placeholder:"Additional details about the loan...",rows:3})]}),w>0&&(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,t.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"EMI Preview"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["₹",w.toLocaleString("en-IN",{maximumFractionDigits:0})]}),(0,t.jsx)("p",{className:"text-sm text-blue-700",children:"Monthly EMI amount"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,t.jsx)(r.z,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),(0,t.jsx)(r.z,{type:"submit",disabled:x,children:x?"Creating...":"Create Loan"})]})]})]})})}function b(){let[e,a]=(0,l.useState)(null),[s,u]=(0,l.useState)(!0),[p,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{y()},[]);let y=async()=>{try{u(!0);let e=await fetch("/api/loans");if(e.ok){let s=await e.json(),t=(null==s?void 0:s.length)||0,l=(null==s?void 0:s.reduce((e,a)=>e+a.currentBalance,0))||0,n=(null==s?void 0:s.reduce((e,a)=>e+a.emiAmount,0))||0,i=t>0?s.reduce((e,a)=>e+a.interestRate,0)/t:0,r=(null==s?void 0:s.reduce((e,a)=>e+(a.principalAmount-a.currentBalance),0))||0;a({loans:s||[],stats:{totalLoans:t,totalBalance:l,monthlyEMI:n,averageInterest:i,totalPaid:r,remainingAmount:l}})}}catch(e){console.error("Error fetching loans data:",e)}finally{u(!1)}};return s?(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,t.jsx)("div",{className:"h-8 bg-slate-200 rounded w-1/4"}),(0,t.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsx)("div",{className:"h-32 bg-slate-200 rounded"},a))})]})}):e?(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[(0,t.jsx)("div",{className:"p-2 bg-gradient-to-br from-professional-blue to-professional-blue-light rounded-lg",children:(0,t.jsx)(c.Z,{className:"h-6 w-6 text-white"})}),"Loan Management"]}),(0,t.jsx)("p",{className:"text-slate-600 mt-1",children:"Track your loans and manage EMI payments"})]}),(0,t.jsxs)(r.z,{className:"bg-professional-blue hover:bg-professional-blue-dark text-white",onClick:()=>j(!0),children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Add Loan"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,t.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:(0,t.jsxs)(i.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(i.ll,{className:"text-sm font-medium text-slate-600",children:"Total Loans"}),(0,t.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,t.jsx)(c.Z,{className:"h-4 w-4 text-professional-blue"})})]}),(0,t.jsxs)(i.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-professional-blue",children:e.stats.totalLoans}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Active loans"})]})]})}),(0,t.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,t.jsxs)(i.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(i.ll,{className:"text-sm font-medium text-slate-600",children:"Monthly EMI"}),(0,t.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,t.jsx)(d.Z,{className:"h-4 w-4 text-red-600"})})]}),(0,t.jsxs)(i.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(0,h.xG)(e.stats.monthlyEMI)}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Total monthly payment"})]})]})}),(0,t.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:(0,t.jsxs)(i.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(i.ll,{className:"text-sm font-medium text-slate-600",children:"Avg. Interest"}),(0,t.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,t.jsx)(x.Z,{className:"h-4 w-4 text-orange-600"})})]}),(0,t.jsxs)(i.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[e.stats.averageInterest.toFixed(1),"%"]}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Average rate"})]})]})}),(0,t.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:(0,t.jsxs)(i.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,t.jsx)(i.ll,{className:"text-sm font-medium text-slate-600",children:"Outstanding Balance"}),(0,t.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,t.jsx)(m.Z,{className:"h-4 w-4 text-red-600"})})]}),(0,t.jsxs)(i.aY,{children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(0,h.xG)(e.stats.totalBalance)}),(0,t.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Remaining amount"})]})]})})]}),(0,t.jsx)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:(0,t.jsxs)(i.Zb,{className:"professional-card",children:[(0,t.jsx)(i.Ol,{children:(0,t.jsxs)(i.ll,{className:"text-slate-900",children:["Loans (",e.loans.length,")"]})}),(0,t.jsx)(i.aY,{children:0===e.loans.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[(0,t.jsx)(c.Z,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No loans found"}),(0,t.jsx)("p",{className:"text-slate-600 mb-4",children:"Start by adding your first loan"}),(0,t.jsxs)(r.z,{className:"bg-professional-blue hover:bg-professional-blue-dark text-white",onClick:()=>j(!0),children:[(0,t.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Add Loan"]})]}):(0,t.jsx)("div",{className:"space-y-4",children:e.loans.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"p-2 rounded-full bg-slate-100",children:(0,t.jsx)(c.Z,{className:"h-4 w-4 text-professional-blue"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"font-semibold text-slate-900",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-slate-600",children:[e.loanType," • ",e.interestRate,"% interest"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("div",{className:"text-lg font-bold text-red-600",children:(0,h.xG)(e.currentBalance)}),(0,t.jsxs)("p",{className:"text-sm text-slate-600",children:["EMI: ",(0,h.xG)(e.emiAmount)]})]})]},e.id))})})]})})]}),(0,t.jsx)(f,{open:p,onOpenChange:j,onLoanAdded:()=>{j(!1),y()}})]}):(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Error loading loans"}),(0,t.jsx)("p",{className:"text-slate-600 mt-2",children:"Please try refreshing the page"})]})})}},7245:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(6382).Z)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]])},5597:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(6382).Z)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]])},9461:function(e,a,s){"use strict";s.d(a,{Z:function(){return t}});let t=(0,s(6382).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])}},function(e){e.O(0,[813,862,675,819,834,427,275,744],function(){return e(e.s=2131)}),_N_E=e.O()}]);