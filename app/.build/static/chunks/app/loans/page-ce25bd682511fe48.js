(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[715],{2131:function(e,a,t){Promise.resolve().then(t.bind(t,1536))},1536:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return U}});var s=t(784),n=t(1960),l=t(6070),r=t(9026),i=t(5796),c=t(7245),d=t(4705),o=t(7675),m=t(5597),x=t(9461),p=t(7076),u=t(5913),h=t(3718),j=t(7237),y=t(3078),g=t(9175),N=t(5593),f=t(6117);function v(e){let{open:a,onOpenChange:t,onLoanAdded:l}=e,[r,c]=(0,n.useState)({name:"",loanType:"",principalAmount:"",interestRate:"",tenure:"",startDate:"",description:"",categoryId:""}),[d,o]=(0,n.useState)([]),[m,x]=(0,n.useState)(!1);(0,n.useEffect)(()=>{a&&(p(),c(e=>({...e,startDate:new Date().toISOString().split("T")[0]})))},[a]);let p=async()=>{try{let e=await fetch("/api/categories");if(e.ok){let a=await e.json();o(a)}}catch(e){console.error("Error fetching categories:",e)}},v=async e=>{if(e.preventDefault(),!r.name||!r.loanType||!r.principalAmount||!r.interestRate||!r.tenure||!r.startDate){f.Am.error("Please fill in all required fields");return}x(!0);try{let e={...r,principalAmount:parseFloat(r.principalAmount),interestRate:parseFloat(r.interestRate),tenure:parseInt(r.tenure),categoryId:r.categoryId||null},a=await fetch("/api/loans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok)f.Am.success("Loan created successfully!"),l(),t(!1),c({name:"",loanType:"",principalAmount:"",interestRate:"",tenure:"",startDate:"",description:"",categoryId:""});else{let e=await a.json();f.Am.error(e.error||"Failed to create loan")}}catch(e){console.error("Error creating loan:",e),f.Am.error("Failed to create loan")}finally{x(!1)}},b=[{value:N.am.HOME_LOAN,label:"Home Loan"},{value:N.am.PERSONAL_LOAN,label:"Personal Loan"},{value:N.am.CAR_LOAN,label:"Car Loan"},{value:N.am.EDUCATION_LOAN,label:"Education Loan"},{value:N.am.CREDIT_CARD,label:"Credit Card"},{value:N.am.BUSINESS_LOAN,label:"Business Loan"},{value:N.am.GOLD_LOAN,label:"Gold Loan"},{value:N.am.OTHER,label:"Other"}],w=(()=>{let e=parseFloat(r.principalAmount),a=parseFloat(r.interestRate)/100/12,t=parseInt(r.tenure);return e&&a&&t?a>0?e*a*Math.pow(1+a,t)/(Math.pow(1+a,t)-1):e/t:0})();return(0,s.jsx)(u.Vq,{open:a,onOpenChange:t,children:(0,s.jsxs)(u.cZ,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(u.fK,{children:(0,s.jsx)(u.$N,{children:"Add New Loan"})}),(0,s.jsxs)("form",{onSubmit:v,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"name",children:"Loan Name"}),(0,s.jsx)(h.I,{id:"name",value:r.name,onChange:e=>c({...r,name:e.target.value}),placeholder:"e.g., Home Loan - SBI",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"loanType",children:"Loan Type"}),(0,s.jsxs)(g.Ph,{value:r.loanType,onValueChange:e=>c({...r,loanType:e}),required:!0,children:[(0,s.jsx)(g.i4,{children:(0,s.jsx)(g.ki,{placeholder:"Select loan type"})}),(0,s.jsx)(g.Bw,{children:b.map(e=>(0,s.jsx)(g.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"principalAmount",children:"Principal Amount (₹)"}),(0,s.jsx)(h.I,{id:"principalAmount",type:"number",value:r.principalAmount,onChange:e=>c({...r,principalAmount:e.target.value}),placeholder:"1000000",min:"1",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"interestRate",children:"Interest Rate (% p.a.)"}),(0,s.jsx)(h.I,{id:"interestRate",type:"number",step:"0.01",value:r.interestRate,onChange:e=>c({...r,interestRate:e.target.value}),placeholder:"8.5",min:"0",required:!0})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"tenure",children:"Tenure (months)"}),(0,s.jsx)(h.I,{id:"tenure",type:"number",value:r.tenure,onChange:e=>c({...r,tenure:e.target.value}),placeholder:"240",min:"1",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"startDate",children:"Start Date"}),(0,s.jsx)(h.I,{id:"startDate",type:"date",value:r.startDate,onChange:e=>c({...r,startDate:e.target.value}),required:!0})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"categoryId",children:"Category (Optional)"}),(0,s.jsxs)(g.Ph,{value:r.categoryId,onValueChange:e=>c({...r,categoryId:e}),children:[(0,s.jsx)(g.i4,{children:(0,s.jsx)(g.ki,{placeholder:"Select category"})}),(0,s.jsx)(g.Bw,{children:d.map(e=>(0,s.jsx)(g.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"description",children:"Description (Optional)"}),(0,s.jsx)(y.g,{id:"description",value:r.description,onChange:e=>c({...r,description:e.target.value}),placeholder:"Additional details about the loan...",rows:3})]}),w>0&&(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"EMI Preview"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["₹",w.toLocaleString("en-IN",{maximumFractionDigits:0})]}),(0,s.jsx)("p",{className:"text-sm text-blue-700",children:"Monthly EMI amount"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,s.jsx)(i.z,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,s.jsx)(i.z,{type:"submit",disabled:m,children:m?"Creating...":"Create Loan"})]})]})]})})}var b=t(1296),w=t(559),A=t(398),L=t(3390),O=t(7726),C=t(1789),E=t(6637);function D(e){let{open:a,onOpenChange:t,loan:l,onPaymentAdded:r}=e,[c,d]=(0,n.useState)({amount:l.emiAmount.toString(),paymentType:N.t6.EMI,note:"",createTransaction:!0}),[o,m]=(0,n.useState)(!1),x=async e=>{e.preventDefault(),m(!0);try{(await fetch("/api/loans/payments",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({loanId:l.id,...c})})).ok&&(r(),d({amount:l.emiAmount.toString(),paymentType:N.t6.EMI,note:"",createTransaction:!0}))}catch(e){console.error("Error adding payment:",e)}finally{m(!1)}},f=(()=>{let e=parseFloat(c.amount)||0,a=l.interestRate/100/12,t=l.currentBalance*a;return{interest:Math.min(t,e),principal:Math.max(0,e-t)}})(),v=[{value:N.t6.EMI,label:"Regular EMI"},{value:N.t6.PREPAYMENT,label:"Prepayment"},{value:N.t6.PARTIAL_PAYMENT,label:"Partial Payment"},{value:N.t6.INTEREST_ONLY,label:"Interest Only"}];return(0,s.jsx)(u.Vq,{open:a,onOpenChange:t,children:(0,s.jsxs)(u.cZ,{className:"sm:max-w-[500px]",children:[(0,s.jsx)(u.fK,{children:(0,s.jsxs)(u.$N,{children:["Add Payment for ",l.name]})}),(0,s.jsx)("div",{className:"bg-red-50 p-4 rounded-lg mb-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Outstanding Balance"}),(0,s.jsx)("p",{className:"font-semibold text-red-600",children:(0,p.xG)(l.currentBalance)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Regular EMI"}),(0,s.jsx)("p",{className:"font-semibold text-blue-600",children:(0,p.xG)(l.emiAmount)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Interest Rate"}),(0,s.jsxs)("p",{className:"font-semibold text-purple-600",children:[l.interestRate,"% p.a."]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Loan Type"}),(0,s.jsx)("p",{className:"font-semibold text-gray-600",children:l.loanType.replace("_"," ")})]})]})}),(0,s.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"paymentType",children:"Payment Type"}),(0,s.jsxs)(g.Ph,{value:c.paymentType,onValueChange:e=>d({...c,paymentType:e}),required:!0,children:[(0,s.jsx)(g.i4,{children:(0,s.jsx)(g.ki,{placeholder:"Select payment type"})}),(0,s.jsx)(g.Bw,{children:v.map(e=>(0,s.jsx)(g.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"amount",children:"Payment Amount (₹)"}),(0,s.jsx)(h.I,{id:"amount",type:"number",value:c.amount,onChange:e=>d({...c,amount:e.target.value}),placeholder:"25000",min:"1",required:!0})]}),parseFloat(c.amount)>0&&(0,s.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Payment Breakdown"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-blue-600",children:"Principal"}),(0,s.jsx)("p",{className:"font-semibold text-blue-800",children:(0,p.xG)(f.principal)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-blue-600",children:"Interest"}),(0,s.jsx)("p",{className:"font-semibold text-blue-800",children:(0,p.xG)(f.interest)})]})]}),(0,s.jsxs)("p",{className:"text-xs text-blue-600 mt-2",children:["Remaining balance after payment: ",(0,p.xG)(Math.max(0,l.currentBalance-f.principal))]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"note",children:"Note (Optional)"}),(0,s.jsx)(y.g,{id:"note",value:c.note,onChange:e=>d({...c,note:e.target.value}),placeholder:"EMI for January 2024, prepayment from bonus, etc.",rows:3})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(E.X,{id:"createTransaction",checked:c.createTransaction,onCheckedChange:e=>d({...c,createTransaction:e})}),(0,s.jsx)(j._,{htmlFor:"createTransaction",className:"text-sm",children:"Create a transaction record for this payment"})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,s.jsx)(i.z,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),(0,s.jsx)(i.z,{type:"submit",disabled:o,children:o?"Processing...":"Add Payment"})]})]})]})})}let T=[{value:N.am.HOME_LOAN,label:"Home Loan"},{value:N.am.PERSONAL_LOAN,label:"Personal Loan"},{value:N.am.CAR_LOAN,label:"Car Loan"},{value:N.am.EDUCATION_LOAN,label:"Education Loan"},{value:N.am.CREDIT_CARD,label:"Credit Card"},{value:N.am.BUSINESS_LOAN,label:"Business Loan"},{value:N.am.GOLD_LOAN,label:"Gold Loan"},{value:N.am.OTHER,label:"Other"}];function R(e){var a,t;let{open:l,onOpenChange:r,loan:c,onLoanUpdated:d}=e,[o,m]=(0,n.useState)({name:"",loanType:"",principalAmount:"",interestRate:"",tenure:"",startDate:"",description:""}),[x,p]=(0,n.useState)([]),[N,v]=(0,n.useState)(!1);(0,n.useEffect)(()=>{if(l&&c){var e,a,t;m({name:c.name||"",loanType:c.loanType,principalAmount:(null===(e=c.principalAmount)||void 0===e?void 0:e.toString())||"",interestRate:(null===(a=c.interestRate)||void 0===a?void 0:a.toString())||"",tenure:(null===(t=c.tenure)||void 0===t?void 0:t.toString())||"",startDate:c.startDate?new Date(c.startDate).toISOString().split("T")[0]:"",description:c.description||""}),b()}},[l,c]);let b=async()=>{try{let e=await fetch("/api/categories");if(e.ok){let a=await e.json();p(a)}}catch(e){console.error("Error fetching categories:",e)}},w=async e=>{if(e.preventDefault(),!c||!o.name||!o.loanType||!o.principalAmount||!o.interestRate||!o.tenure||!o.startDate){f.Am.error("Please fill in all required fields");return}v(!0);try{let e={name:o.name,loanType:o.loanType,principalAmount:parseFloat(o.principalAmount),interestRate:parseFloat(o.interestRate),tenure:parseInt(o.tenure),startDate:o.startDate,description:o.description||null},a=await fetch("/api/loans/".concat(c.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(a.ok)f.Am.success("Loan updated successfully!"),d(),r(!1);else{let e=await a.json();f.Am.error(e.error||"Failed to update loan")}}catch(e){console.error("Error updating loan:",e),f.Am.error("Failed to update loan")}finally{v(!1)}},A=(()=>{let e=parseFloat(o.principalAmount),a=parseFloat(o.interestRate)/100/12,t=parseInt(o.tenure);return e&&a&&t?a>0?e*a*Math.pow(1+a,t)/(Math.pow(1+a,t)-1):e/t:0})();return c?(0,s.jsx)(u.Vq,{open:l,onOpenChange:r,children:(0,s.jsxs)(u.cZ,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,s.jsx)(u.fK,{children:(0,s.jsx)(u.$N,{children:"Edit Loan"})}),(0,s.jsxs)("form",{onSubmit:w,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"name",children:"Loan Name *"}),(0,s.jsx)(h.I,{id:"name",value:o.name,onChange:e=>m({...o,name:e.target.value}),placeholder:"e.g., Home Loan - SBI",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"loanType",children:"Loan Type *"}),(0,s.jsxs)(g.Ph,{value:o.loanType,onValueChange:e=>m({...o,loanType:e}),required:!0,children:[(0,s.jsx)(g.i4,{children:(0,s.jsx)(g.ki,{placeholder:"Select loan type"})}),(0,s.jsx)(g.Bw,{children:T.map(e=>(0,s.jsx)(g.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"principalAmount",children:"Principal Amount (₹) *"}),(0,s.jsx)(h.I,{id:"principalAmount",type:"number",value:o.principalAmount,onChange:e=>m({...o,principalAmount:e.target.value}),placeholder:"1000000",min:"1",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"interestRate",children:"Interest Rate (% p.a.) *"}),(0,s.jsx)(h.I,{id:"interestRate",type:"number",step:"0.01",value:o.interestRate,onChange:e=>m({...o,interestRate:e.target.value}),placeholder:"8.5",min:"0",required:!0})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"tenure",children:"Tenure (months) *"}),(0,s.jsx)(h.I,{id:"tenure",type:"number",value:o.tenure,onChange:e=>m({...o,tenure:e.target.value}),placeholder:"240",min:"1",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"startDate",children:"Start Date *"}),(0,s.jsx)(h.I,{id:"startDate",type:"date",value:o.startDate,onChange:e=>m({...o,startDate:e.target.value}),required:!0})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(j._,{htmlFor:"description",children:"Description"}),(0,s.jsx)(y.g,{id:"description",value:o.description,onChange:e=>m({...o,description:e.target.value}),placeholder:"Additional details about the loan...",rows:3})]}),A>0&&(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-semibold text-blue-900 mb-2",children:"Updated EMI Preview"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["₹",A.toLocaleString("en-IN",{maximumFractionDigits:0})]}),(0,s.jsx)("p",{className:"text-sm text-blue-700",children:"Monthly EMI amount"})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-gray-900 mb-2",children:"Current Loan Status"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Current Balance"}),(0,s.jsxs)("p",{className:"font-medium text-red-600",children:["₹",null===(a=c.currentBalance)||void 0===a?void 0:a.toLocaleString()]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Current EMI"}),(0,s.jsxs)("p",{className:"font-medium",children:["₹",null===(t=c.emiAmount)||void 0===t?void 0:t.toLocaleString()]})]})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[(0,s.jsx)(i.z,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),(0,s.jsx)(i.z,{type:"submit",disabled:N,className:"bg-blue-600 hover:bg-blue-700",children:N?"Updating...":"Update Loan"})]})]})]})}):null}var I=t(2006);let k={HOME_LOAN:"Home Loan",PERSONAL_LOAN:"Personal Loan",CAR_LOAN:"Car Loan",EDUCATION_LOAN:"Education Loan",CREDIT_CARD:"Credit Card",BUSINESS_LOAN:"Business Loan",GOLD_LOAN:"Gold Loan",OTHER:"Other"};function S(e){let{open:a,onOpenChange:t,loan:l,onLoanDeleted:r}=e,[i,c]=(0,n.useState)(!1),d=async()=>{if(l){c(!0);try{let e=await fetch("/api/loans/".concat(l.id),{method:"DELETE"});if(e.ok)f.Am.success("Loan deleted successfully!"),r(),t(!1);else{let a=await e.json();f.Am.error(a.error||"Failed to delete loan")}}catch(e){console.error("Error deleting loan:",e),f.Am.error("Failed to delete loan")}finally{c(!1)}}};return l?(0,s.jsx)(I.aR,{open:a,onOpenChange:t,children:(0,s.jsxs)(I._T,{children:[(0,s.jsxs)(I.fY,{children:[(0,s.jsx)(I.f$,{children:"Delete Loan"}),(0,s.jsx)(I.yT,{asChild:!0,children:(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("p",{children:"Are you sure you want to delete this loan? This action cannot be undone and will also delete all associated payment records."}),(0,s.jsxs)("div",{className:"bg-red-50 p-4 rounded-lg border border-red-200",children:[(0,s.jsx)("h4",{className:"font-semibold text-red-900 mb-2",children:l.name}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-red-700",children:"Loan Type:"}),(0,s.jsx)("span",{className:"font-medium ml-2",children:k[l.loanType]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-red-700",children:"Outstanding:"}),(0,s.jsx)("span",{className:"font-medium ml-2",children:(0,p.xG)(l.currentBalance)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-red-700",children:"Principal:"}),(0,s.jsx)("span",{className:"font-medium ml-2",children:(0,p.xG)(l.principalAmount)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-red-700",children:"EMI:"}),(0,s.jsx)("span",{className:"font-medium ml-2",children:(0,p.xG)(l.emiAmount)})]})]})]}),(0,s.jsx)("div",{className:"bg-yellow-50 p-3 rounded-lg border border-yellow-200",children:(0,s.jsx)("p",{className:"text-yellow-800 text-sm font-medium",children:"⚠️ All payment history and transactions related to this loan will also be permanently deleted."})})]})})]}),(0,s.jsxs)(I.xo,{children:[(0,s.jsx)(I.le,{disabled:i,children:"Cancel"}),(0,s.jsx)(I.OL,{onClick:d,disabled:i,className:"bg-red-600 hover:bg-red-700 focus:ring-red-600",children:i?"Deleting...":"Delete Loan"})]})]})}):null}var P=t(8877),_=t(7864),M=t(3466),Z=t(1924);let F={[N.am.HOME_LOAN]:"Home Loan",[N.am.PERSONAL_LOAN]:"Personal Loan",[N.am.CAR_LOAN]:"Car Loan",[N.am.EDUCATION_LOAN]:"Education Loan",[N.am.CREDIT_CARD]:"Credit Card",[N.am.BUSINESS_LOAN]:"Business Loan",[N.am.GOLD_LOAN]:"Gold Loan",[N.am.OTHER]:"Other"},z={[N.t6.EMI]:"EMI",[N.t6.PREPAYMENT]:"Prepayment",[N.t6.PARTIAL_PAYMENT]:"Partial Payment",[N.t6.INTEREST_ONLY]:"Interest Only"};function B(e){var a,t,c;let{open:h,onOpenChange:j,loanId:y,onLoanUpdated:g}=e,[N,v]=(0,n.useState)(null),[L,E]=(0,n.useState)(!1),[T,I]=(0,n.useState)(!1),[k,B]=(0,n.useState)(!1),[G,q]=(0,n.useState)(!1);(0,n.useEffect)(()=>{h&&y&&H()},[h,y]);let H=async()=>{if(y)try{E(!0);let e=await fetch("/api/loans/".concat(y));if(e.ok){let a=await e.json();v(a)}else f.Am.error("Failed to fetch loan details"),j(!1)}catch(e){console.error("Error fetching loan details:",e),f.Am.error("Failed to fetch loan details"),j(!1)}finally{E(!1)}};if(!h)return null;let U=(()=>{if(!N)return 0;let e=N.principalAmount-N.currentBalance;return N.principalAmount>0?e/N.principalAmount*100:0})(),Y=(()=>{if(!N||!N.endDate)return null;let e=new Date,a=Math.ceil((new Date(N.endDate).getTime()-e.getTime())/2592e6);return a>0?a:0})();N&&null!==(t=N.payments)&&void 0!==t&&t.reduce((e,a)=>e+a.amount,0);let V=N&&(null===(c=N.payments)||void 0===c?void 0:c.reduce((e,a)=>e+a.interestPaid,0))||0;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u.Vq,{open:h,onOpenChange:j,children:(0,s.jsxs)(u.cZ,{className:"sm:max-w-[800px] max-h-[90vh] overflow-hidden",children:[(0,s.jsx)(u.fK,{children:(0,s.jsxs)(u.$N,{className:"flex items-center gap-2",children:[(0,s.jsx)(b.Z,{className:"h-5 w-5 text-red-600"}),"Loan Details"]})}),L?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-red-600"})}):N?(0,s.jsx)(_.x,{className:"max-h-[calc(90vh-120px)]",children:(0,s.jsxs)("div",{className:"space-y-6 pr-4",children:[(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:N.name}),(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)(C.C,{className:"bg-red-100 text-red-800",children:F[N.loanType]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:[(0,s.jsx)(m.Z,{className:"w-3 h-3"}),N.interestRate,"% p.a."]})]}),(0,s.jsx)("div",{className:"text-3xl font-bold text-red-600 mb-2",children:(0,p.xG)(N.currentBalance)}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Outstanding Balance"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>q(!0),className:"text-green-600 border-green-200 hover:bg-green-50",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4 mr-1"}),"Payment"]}),(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>I(!0),className:"text-blue-600 border-blue-200 hover:bg-blue-50",children:[(0,s.jsx)(w.Z,{className:"w-4 h-4 mr-1"}),"Edit"]}),(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:()=>B(!0),className:"text-red-600 border-red-200 hover:bg-red-50",children:[(0,s.jsx)(A.Z,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]}),(0,s.jsx)(P.Z,{}),(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsxs)(r.ll,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(x.Z,{className:"h-5 w-5"}),"Repayment Progress"]})}),(0,s.jsxs)(r.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Progress"}),(0,s.jsxs)("span",{className:"font-medium",children:[U.toFixed(1),"%"]})]}),(0,s.jsx)(O.E,{value:U,className:"h-3"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Principal Amount"}),(0,s.jsx)("p",{className:"font-semibold text-blue-600",children:(0,p.xG)(N.principalAmount)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Amount Paid"}),(0,s.jsx)("p",{className:"font-semibold text-green-600",children:(0,p.xG)(N.principalAmount-N.currentBalance)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Monthly EMI"}),(0,s.jsx)("p",{className:"font-semibold text-orange-600",children:(0,p.xG)(N.emiAmount)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Remaining Months"}),(0,s.jsx)("p",{className:"font-semibold text-purple-600",children:null!==Y?"".concat(Y," months"):"N/A"})]})]})]})]})}),(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsxs)(r.ll,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(M.Z,{className:"h-5 w-5"}),"Loan Information"]})}),(0,s.jsxs)(r.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Loan Type"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:F[N.loanType]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Interest Rate"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[N.interestRate,"% per annum"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Tenure"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-gray-900",children:[N.tenure," months"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Start Date"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:new Date(N.startDate).toLocaleDateString()})]}),N.endDate&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"End Date"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:new Date(N.endDate).toLocaleDateString()})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Total Interest Paid"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-red-600",children:(0,p.xG)(V)})]})]}),N.description&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Description"}),(0,s.jsx)("p",{className:"text-gray-900 mt-1",children:N.description})]})]})]})}),(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsxs)(r.ll,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(Z.Z,{className:"h-5 w-5"}),"Payment History (",(null===(a=N.payments)||void 0===a?void 0:a.length)||0,")"]})}),(0,s.jsx)(r.aY,{children:N.payments&&N.payments.length>0?(0,s.jsxs)("div",{className:"space-y-3",children:[N.payments.slice(0,10).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,s.jsx)(o.Z,{className:"h-4 w-4 text-green-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-medium text-gray-900",children:(0,p.xG)(e.amount)}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:new Date(e.paymentDate).toLocaleDateString()}),(0,s.jsxs)("div",{className:"flex gap-2 text-xs text-gray-500",children:[(0,s.jsxs)("span",{children:["Principal: ",(0,p.xG)(e.principalPaid)]}),(0,s.jsxs)("span",{children:["Interest: ",(0,p.xG)(e.interestPaid)]})]}),e.note&&(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.note})]})]}),(0,s.jsx)("div",{className:"flex items-center gap-2",children:(0,s.jsx)(C.C,{variant:"outline",className:"text-xs",children:z[e.paymentType]})})]},e.id)),N.payments.length>10&&(0,s.jsx)("p",{className:"text-sm text-gray-600 text-center py-2",children:"Showing latest 10 payments"})]}):(0,s.jsxs)("div",{className:"text-center py-6",children:[(0,s.jsx)(Z.Z,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),(0,s.jsx)("p",{className:"text-gray-600",children:"No payment history available"}),(0,s.jsxs)(i.z,{size:"sm",onClick:()=>q(!0),className:"mt-3 bg-green-600 hover:bg-green-700 text-white",children:[(0,s.jsx)(d.Z,{className:"w-4 h-4 mr-1"}),"Make First Payment"]})]})})]})})]})}):(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Loan not found"})})]})}),(0,s.jsx)(R,{open:T,onOpenChange:I,loan:N,onLoanUpdated:()=>{I(!1),g(),H()}}),(0,s.jsx)(S,{open:k,onOpenChange:B,loan:N,onLoanDeleted:()=>{B(!1),g(),j(!1)}}),N&&(0,s.jsx)(D,{open:G,onOpenChange:q,loan:N,onPaymentAdded:()=>{q(!1),g(),H()}})]})}let G={[N.am.HOME_LOAN]:"bg-blue-100 text-blue-800",[N.am.PERSONAL_LOAN]:"bg-red-100 text-red-800",[N.am.CAR_LOAN]:"bg-green-100 text-green-800",[N.am.EDUCATION_LOAN]:"bg-purple-100 text-purple-800",[N.am.CREDIT_CARD]:"bg-orange-100 text-orange-800",[N.am.BUSINESS_LOAN]:"bg-indigo-100 text-indigo-800",[N.am.GOLD_LOAN]:"bg-yellow-100 text-yellow-800",[N.am.OTHER]:"bg-gray-100 text-gray-800"},q={[N.am.HOME_LOAN]:"Home Loan",[N.am.PERSONAL_LOAN]:"Personal Loan",[N.am.CAR_LOAN]:"Car Loan",[N.am.EDUCATION_LOAN]:"Education Loan",[N.am.CREDIT_CARD]:"Credit Card",[N.am.BUSINESS_LOAN]:"Business Loan",[N.am.GOLD_LOAN]:"Gold Loan",[N.am.OTHER]:"Other"};function H(e){let{loans:a,onLoanUpdated:t}=e,[c,m]=(0,n.useState)(null),[x,u]=(0,n.useState)(!1),[h,j]=(0,n.useState)(!1),[y,g]=(0,n.useState)(!1),[N,f]=(0,n.useState)(null),v=e=>{m(e),j(!0)},E=e=>{m(e),g(!0)},T=()=>{m(null),j(!1),g(!1)},I=e=>{m(e),u(!0)};return 0===a.length?(0,s.jsx)(r.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:(0,s.jsxs)(r.aY,{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(b.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No loans yet"}),(0,s.jsx)("p",{className:"text-gray-600 text-center mb-4",children:"Add your loans to track payments and manage your debt effectively."})]})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((e,a)=>{let t=e.principalAmount-e.currentBalance,n=e.principalAmount>0?t/e.principalAmount*100:0,c=e.endDate?Math.ceil((new Date(e.endDate).getTime()-new Date().getTime())/2592e6):null;return(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},children:(0,s.jsxs)(r.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg hover:shadow-xl transition-all duration-300 group cursor-pointer",onClick:()=>f(e.id),children:[(0,s.jsx)(r.Ol,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(r.ll,{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[(0,s.jsx)(b.Z,{className:"h-5 w-5 text-red-600"}),e.name]}),(0,s.jsx)(C.C,{className:G[e.loanType],children:q[e.loanType]})]}),(0,s.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),v(e)},title:"Edit Loan",className:"h-8 w-8 p-0",children:(0,s.jsx)(w.Z,{className:"h-4 w-4"})}),(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),I(e)},title:"Make Payment",className:"h-8 w-8 p-0",children:(0,s.jsx)(d.Z,{className:"h-4 w-4"})}),(0,s.jsx)(i.z,{variant:"ghost",size:"sm",onClick:a=>{a.stopPropagation(),E(e)},title:"Delete Loan",className:"h-8 w-8 p-0 text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,s.jsx)(A.Z,{className:"h-4 w-4"})})]})]})}),(0,s.jsxs)(r.aY,{className:"space-y-4",children:[e.description&&(0,s.jsx)("p",{className:"text-sm text-gray-600",children:e.description}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Repayment Progress"}),(0,s.jsxs)("span",{className:"font-medium",children:[n.toFixed(1),"%"]})]}),(0,s.jsx)(O.E,{value:n,className:"h-2"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Outstanding"}),(0,s.jsx)("p",{className:"font-semibold text-red-600",children:(0,p.xG)(e.currentBalance)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Principal"}),(0,s.jsx)("p",{className:"font-semibold text-blue-600",children:(0,p.xG)(e.principalAmount)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"Interest Rate"}),(0,s.jsxs)("p",{className:"font-semibold text-purple-600",children:[e.interestRate,"% p.a."]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-gray-600",children:"EMI"}),(0,s.jsx)("p",{className:"font-semibold text-orange-600",children:(0,p.xG)(e.emiAmount)})]})]}),e.endDate&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(L.Z,{className:"h-4 w-4 text-gray-400"}),(0,s.jsx)("span",{className:"text-gray-600",children:null!==c&&c>0?"".concat(c," months remaining"):0===c?"Due this month":"Overdue"})]}),(0,s.jsx)("div",{className:"flex gap-2 pt-2",children:(0,s.jsxs)(i.z,{size:"sm",onClick:a=>{a.stopPropagation(),I(e)},className:"flex-1 bg-red-600 hover:bg-red-700 text-white",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 mr-1"}),"Make Payment"]})})]})]})},e.id)})}),c&&(0,s.jsx)(D,{open:x,onOpenChange:u,loan:c,onPaymentAdded:()=>{t(),u(!1),m(null)}}),(0,s.jsx)(R,{open:h,onOpenChange:e=>{j(e),e||T()},loan:c,onLoanUpdated:t}),(0,s.jsx)(S,{open:y,onOpenChange:e=>{g(e),e||T()},loan:c,onLoanDeleted:t}),(0,s.jsx)(B,{open:!!N,onOpenChange:e=>!e&&f(null),loanId:N,onLoanUpdated:t})]})}function U(){let[e,a]=(0,n.useState)(null),[t,u]=(0,n.useState)(!0),[h,j]=(0,n.useState)(!1);(0,n.useEffect)(()=>{y()},[]);let y=async()=>{try{u(!0);let e=await fetch("/api/loans");if(e.ok){let t=await e.json(),s=(null==t?void 0:t.length)||0,n=(null==t?void 0:t.reduce((e,a)=>e+a.currentBalance,0))||0,l=(null==t?void 0:t.reduce((e,a)=>e+a.emiAmount,0))||0,r=s>0?t.reduce((e,a)=>e+a.interestRate,0)/s:0,i=(null==t?void 0:t.reduce((e,a)=>e+(a.principalAmount-a.currentBalance),0))||0;a({loans:t||[],stats:{totalLoans:s,totalBalance:n,monthlyEMI:l,averageInterest:r,totalPaid:i,remainingAmount:n}})}}catch(e){console.error("Error fetching loans data:",e)}finally{u(!1)}};return t?(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-6",children:[(0,s.jsx)("div",{className:"h-8 bg-slate-200 rounded w-1/4"}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,s.jsx)("div",{className:"h-32 bg-slate-200 rounded"},a))})]})}):e?(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-gradient-to-br from-professional-blue to-professional-blue-light rounded-lg",children:(0,s.jsx)(c.Z,{className:"h-6 w-6 text-white"})}),"Loan Management"]}),(0,s.jsx)("p",{className:"text-slate-600 mt-1",children:"Track your loans and manage EMI payments"})]}),(0,s.jsxs)(i.z,{className:"bg-professional-blue hover:bg-professional-blue-dark text-white",onClick:()=>j(!0),children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Add Loan"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:(0,s.jsxs)(r.Zb,{className:"professional-card hover-shadow",children:[(0,s.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(r.ll,{className:"text-sm font-medium text-slate-600",children:"Total Loans"}),(0,s.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,s.jsx)(c.Z,{className:"h-4 w-4 text-professional-blue"})})]}),(0,s.jsxs)(r.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-professional-blue",children:e.stats.totalLoans}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Active loans"})]})]})}),(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,s.jsxs)(r.Zb,{className:"professional-card hover-shadow",children:[(0,s.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(r.ll,{className:"text-sm font-medium text-slate-600",children:"Monthly EMI"}),(0,s.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,s.jsx)(o.Z,{className:"h-4 w-4 text-red-600"})})]}),(0,s.jsxs)(r.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(0,p.xG)(e.stats.monthlyEMI)}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Total monthly payment"})]})]})}),(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:(0,s.jsxs)(r.Zb,{className:"professional-card hover-shadow",children:[(0,s.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(r.ll,{className:"text-sm font-medium text-slate-600",children:"Avg. Interest"}),(0,s.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,s.jsx)(m.Z,{className:"h-4 w-4 text-orange-600"})})]}),(0,s.jsxs)(r.aY,{children:[(0,s.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[e.stats.averageInterest.toFixed(1),"%"]}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Average rate"})]})]})}),(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:(0,s.jsxs)(r.Zb,{className:"professional-card hover-shadow",children:[(0,s.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(r.ll,{className:"text-sm font-medium text-slate-600",children:"Outstanding Balance"}),(0,s.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,s.jsx)(x.Z,{className:"h-4 w-4 text-red-600"})})]}),(0,s.jsxs)(r.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600",children:(0,p.xG)(e.stats.totalBalance)}),(0,s.jsx)("p",{className:"text-xs text-slate-500 mt-1",children:"Remaining amount"})]})]})})]}),(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:(0,s.jsx)(H,{loans:e.loans,onLoanUpdated:y})})]}),(0,s.jsx)(v,{open:h,onOpenChange:j,onLoanAdded:()=>{j(!1),y()}})]}):(0,s.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-slate-900",children:"Error loading loans"}),(0,s.jsx)("p",{className:"text-slate-600 mt-2",children:"Please try refreshing the page"})]})})}},2006:function(e,a,t){"use strict";t.d(a,{OL:function(){return j},_T:function(){return m},aR:function(){return c},f$:function(){return u},fY:function(){return x},le:function(){return y},xo:function(){return p},yT:function(){return h}});var s=t(784),n=t(1960),l=t(5591),r=t(5518),i=t(5796);let c=l.fC;l.xz;let d=l.h_,o=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.aV,{className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n,ref:a})});o.displayName=l.aV.displayName;let m=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(o,{}),(0,s.jsx)(l.VY,{ref:a,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n})]})});m.displayName=l.VY.displayName;let x=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};x.displayName="AlertDialogHeader";let p=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};p.displayName="AlertDialogFooter";let u=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.Dx,{ref:a,className:(0,r.cn)("text-lg font-semibold",t),...n})});u.displayName=l.Dx.displayName;let h=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.dk,{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",t),...n})});h.displayName=l.dk.displayName;let j=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.aU,{ref:a,className:(0,r.cn)((0,i.d)(),t),...n})});j.displayName=l.aU.displayName;let y=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.$j,{ref:a,className:(0,r.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",t),...n})});y.displayName=l.$j.displayName},6637:function(e,a,t){"use strict";t.d(a,{X:function(){return O}});var s=t(784),n=t(1960),l=t(4034),r=t(8200),i=t(1701),c=t(7490),d=t(5060),o=t(3010),m=t(332),x=t(634),p="Checkbox",[u,h]=(0,r.b)(p),[j,y]=u(p),g=n.forwardRef((e,a)=>{let{__scopeCheckbox:t,name:r,checked:d,defaultChecked:o,required:m,disabled:p,value:u="on",onCheckedChange:h,...y}=e,[g,N]=n.useState(null),f=(0,l.e)(a,e=>N(e)),A=n.useRef(!1),L=!g||!!g.closest("form"),[O=!1,C]=(0,c.T)({prop:d,defaultProp:o,onChange:h}),E=n.useRef(O);return n.useEffect(()=>{let e=null==g?void 0:g.form;if(e){let a=()=>C(E.current);return e.addEventListener("reset",a),()=>e.removeEventListener("reset",a)}},[g,C]),(0,s.jsxs)(j,{scope:t,state:O,disabled:p,children:[(0,s.jsx)(x.WV.button,{type:"button",role:"checkbox","aria-checked":b(O)?"mixed":O,"aria-required":m,"data-state":w(O),"data-disabled":p?"":void 0,disabled:p,value:u,...y,ref:f,onKeyDown:(0,i.M)(e.onKeyDown,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.M)(e.onClick,e=>{C(e=>!!b(e)||!e),L&&(A.current=e.isPropagationStopped(),A.current||e.stopPropagation())})}),L&&(0,s.jsx)(v,{control:g,bubbles:!A.current,name:r,value:u,checked:O,required:m,disabled:p,style:{transform:"translateX(-100%)"}})]})});g.displayName=p;var N="CheckboxIndicator",f=n.forwardRef((e,a)=>{let{__scopeCheckbox:t,forceMount:n,...l}=e,r=y(N,t);return(0,s.jsx)(m.z,{present:n||b(r.state)||!0===r.state,children:(0,s.jsx)(x.WV.span,{"data-state":w(r.state),"data-disabled":r.disabled?"":void 0,...l,ref:a,style:{pointerEvents:"none",...e.style}})})});f.displayName=N;var v=e=>{let{control:a,checked:t,bubbles:l=!0,...r}=e,i=n.useRef(null),c=(0,d.D)(t),m=(0,o.t)(a);return n.useEffect(()=>{let e=i.current,a=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(c!==t&&a){let s=new Event("click",{bubbles:l});e.indeterminate=b(t),a.call(e,!b(t)&&t),e.dispatchEvent(s)}},[c,t,l]),(0,s.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:!b(t)&&t,...r,tabIndex:-1,ref:i,style:{...e.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function b(e){return"indeterminate"===e}function w(e){return b(e)?"indeterminate":e?"checked":"unchecked"}var A=t(9568),L=t(5518);let O=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(g,{ref:a,className:(0,L.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...n,children:(0,s.jsx)(f,{className:(0,L.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(A.Z,{className:"h-4 w-4"})})})});O.displayName=g.displayName},7726:function(e,a,t){"use strict";t.d(a,{E:function(){return v}});var s=t(784),n=t(1960),l=t(8200),r=t(634),i="Progress",[c,d]=(0,l.b)(i),[o,m]=c(i),x=n.forwardRef((e,a)=>{var t,n,l,i;let{__scopeProgress:c,value:d=null,max:m,getValueLabel:x=h,...p}=e;(m||0===m)&&!g(m)&&console.error((t="".concat(m),n="Progress","Invalid prop `max` of value `".concat(t,"` supplied to `").concat(n,"`. Only numbers greater than 0 are valid max values. Defaulting to `").concat(100,"`.")));let u=g(m)?m:100;null===d||N(d,u)||console.error((l="".concat(d),i="Progress","Invalid prop `value` of value `".concat(l,"` supplied to `").concat(i,"`. The `value` prop must be:\n  - a positive number\n  - less than the value passed to `max` (or ").concat(100," if no `max` prop is set)\n  - `null` or `undefined` if the progress is indeterminate.\n\nDefaulting to `null`.")));let f=N(d,u)?d:null,v=y(f)?x(f,u):void 0;return(0,s.jsx)(o,{scope:c,value:f,max:u,children:(0,s.jsx)(r.WV.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":y(f)?f:void 0,"aria-valuetext":v,role:"progressbar","data-state":j(f,u),"data-value":null!=f?f:void 0,"data-max":u,...p,ref:a})})});x.displayName=i;var p="ProgressIndicator",u=n.forwardRef((e,a)=>{var t;let{__scopeProgress:n,...l}=e,i=m(p,n);return(0,s.jsx)(r.WV.div,{"data-state":j(i.value,i.max),"data-value":null!==(t=i.value)&&void 0!==t?t:void 0,"data-max":i.max,...l,ref:a})});function h(e,a){return"".concat(Math.round(e/a*100),"%")}function j(e,a){return null==e?"indeterminate":e===a?"complete":"loading"}function y(e){return"number"==typeof e}function g(e){return y(e)&&!isNaN(e)&&e>0}function N(e,a){return y(e)&&!isNaN(e)&&e<=a&&e>=0}u.displayName=p;var f=t(5518);let v=n.forwardRef((e,a)=>{let{className:t,value:n,...l}=e;return(0,s.jsx)(x,{ref:a,className:(0,f.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...l,children:(0,s.jsx)(u,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(n||0),"%)")}})})});v.displayName=x.displayName},7864:function(e,a,t){"use strict";t.d(a,{x:function(){return i}});var s=t(784),n=t(1960),l=t(3951),r=t(5518);let i=n.forwardRef((e,a)=>{let{className:t,children:n,...i}=e;return(0,s.jsxs)(l.fC,{ref:a,className:(0,r.cn)("relative overflow-hidden",t),...i,children:[(0,s.jsx)(l.l_,{className:"h-full w-full rounded-[inherit]",children:n}),(0,s.jsx)(c,{}),(0,s.jsx)(l.Ns,{})]})});i.displayName=l.fC.displayName;let c=n.forwardRef((e,a)=>{let{className:t,orientation:n="vertical",...i}=e;return(0,s.jsx)(l.gb,{ref:a,orientation:n,className:(0,r.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...i,children:(0,s.jsx)(l.q4,{className:"relative flex-1 rounded-full bg-border"})})});c.displayName=l.gb.displayName},8877:function(e,a,t){"use strict";t.d(a,{Z:function(){return i}});var s=t(784),n=t(1960),l=t(4585),r=t(5518);let i=n.forwardRef((e,a)=>{let{className:t,orientation:n="horizontal",decorative:i=!0,...c}=e;return(0,s.jsx)(l.f,{ref:a,decorative:i,orientation:n,className:(0,r.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",t),...c})});i.displayName=l.f.displayName},7245:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(6382).Z)("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]])},1296:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(6382).Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]])},7675:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(6382).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},1924:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(6382).Z)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]])},5597:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(6382).Z)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]])},9461:function(e,a,t){"use strict";t.d(a,{Z:function(){return s}});let s=(0,t(6382).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])}},function(e){e.O(0,[266,862,13,933,991,427,275,744],function(){return e(e.s=2131)}),_N_E=e.O()}]);