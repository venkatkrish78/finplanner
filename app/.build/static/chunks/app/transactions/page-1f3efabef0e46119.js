(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[220],{4527:function(e,a,t){Promise.resolve().then(t.bind(t,2799))},2799:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return eC}});var s=t(784),n=t(1960),l=t(6070),r=t(5796),i=t(1296),c=t(4705),o=t(2304),d=t(1116),m=t(8232),x=t(3718),u=t(7237),h=t(3078),p=t(9175),f=t(5913),j=t(3686),g=t(2841),N=t(3390),y=t(9370),v=t(1300),b=t(5518),w=t(8926);function S(e){let{open:a,onOpenChange:t,onTransactionAdded:i,editingTransaction:o}=e,[d,m]=(0,n.useState)([]),[S,C]=(0,n.useState)(!1),[E,T]=(0,n.useState)(new Date),[Z,k]=(0,n.useState)({amount:"",type:"EXPENSE",description:"",merchant:"",categoryId:"",accountNumber:"",transactionId:""}),{toast:I}=(0,w.pm)();(0,n.useEffect)(()=>{a&&(A(),o?O():M())},[a,o]);let O=()=>{o&&(k({amount:o.amount.toString(),type:o.type,description:o.description||"",merchant:o.merchant||"",categoryId:o.categoryId,accountNumber:o.accountNumber||"",transactionId:o.transactionId||""}),T(new Date(o.date)))},A=async()=>{try{let e=await fetch("/api/categories");if(e.ok){let a=await e.json();m(a),!(a.length>0)||Z.categoryId||""!==Z.amount||o||k(e=>({...e,categoryId:a[0].id}))}}catch(e){console.error("Error fetching categories:",e),I({title:"Error",description:"Failed to load categories",variant:"destructive"})}},D=async e=>{if(e.preventDefault(),!Z.amount||0>=parseFloat(Z.amount)){I({title:"Error",description:"Please enter a valid amount",variant:"destructive"});return}if(!Z.categoryId){I({title:"Error",description:"Please select a category",variant:"destructive"});return}C(!0);try{let e={amount:parseFloat(Z.amount),type:Z.type,description:Z.description.trim()||null,merchant:Z.merchant.trim()||null,categoryId:Z.categoryId,accountNumber:Z.accountNumber.trim()||null,transactionId:Z.transactionId.trim()||null,date:E.toISOString(),status:"SUCCESS",source:"MANUAL"};console.log("Submitting transaction:",e);let a=o?"/api/transactions/".concat(o.id):"/api/transactions",s=await fetch(a,{method:o?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),n=await s.json();if(console.log("Response:",n),s.ok)I({title:"Success",description:o?"Transaction updated successfully":"Transaction added successfully"}),i(),t(!1),o||M();else throw Error(n.error||"Failed to ".concat(o?"update":"create"," transaction"))}catch(e){console.error("Error ".concat(o?"updating":"creating"," transaction:"),e),I({title:"Error",description:e instanceof Error?e.message:"Failed to ".concat(o?"update":"add"," transaction"),variant:"destructive"})}finally{C(!1)}},M=()=>{k({amount:"",type:"EXPENSE",description:"",merchant:"",categoryId:"",accountNumber:"",transactionId:""}),T(new Date)},_=(e,a)=>{k(t=>({...t,[e]:a}))};return(0,s.jsx)(f.Vq,{open:a,onOpenChange:t,children:(0,s.jsxs)(f.cZ,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(f.fK,{children:[(0,s.jsxs)(f.$N,{className:"flex items-center gap-2 text-slate-900",children:[(0,s.jsx)("div",{className:"p-2 bg-gradient-to-br from-professional-blue to-professional-blue-light rounded-lg",children:(0,s.jsx)(c.Z,{className:"h-4 w-4 text-white"})}),o?"Edit Transaction":"Add New Transaction"]}),(0,s.jsx)(f.Be,{className:"text-slate-600",children:o?"Update the transaction details below.":"Enter the details of your transaction below."})]}),(0,s.jsxs)("form",{onSubmit:D,className:"space-y-6",children:[(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"amount",className:"form-label",children:"Amount *"}),(0,s.jsx)(x.I,{id:"amount",type:"number",step:"0.01",min:"0.01",placeholder:"0.00",value:Z.amount,onChange:e=>_("amount",e.target.value),className:"form-input",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"type",className:"form-label",children:"Type *"}),(0,s.jsxs)(p.Ph,{value:Z.type,onValueChange:e=>_("type",e),children:[(0,s.jsx)(p.i4,{className:"form-input",children:(0,s.jsx)(p.ki,{})}),(0,s.jsxs)(p.Bw,{children:[(0,s.jsx)(p.Ql,{value:"INCOME",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),(0,s.jsx)("span",{children:"Income"})]})}),(0,s.jsx)(p.Ql,{value:"EXPENSE",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,s.jsx)("span",{children:"Expense"})]})}),(0,s.jsx)(p.Ql,{value:"TRANSFER",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),(0,s.jsx)("span",{children:"Transfer"})]})})]})]})]})]}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"category",className:"form-label",children:"Category *"}),(0,s.jsxs)(p.Ph,{value:Z.categoryId,onValueChange:e=>_("categoryId",e),children:[(0,s.jsx)(p.i4,{className:"form-input",children:(0,s.jsx)(p.ki,{placeholder:"Select a category"})}),(0,s.jsx)(p.Bw,{children:d.map(e=>(0,s.jsx)(p.Ql,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{children:e.name})]})},e.id))})]})]}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"description",className:"form-label",children:"Description"}),(0,s.jsx)(h.g,{id:"description",placeholder:"Enter transaction description...",value:Z.description,onChange:e=>_("description",e.target.value),className:"form-input",rows:3})]}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"merchant",className:"form-label",children:"Merchant"}),(0,s.jsx)(x.I,{id:"merchant",placeholder:"Merchant name",value:Z.merchant,onChange:e=>_("merchant",e.target.value),className:"form-input"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{className:"form-label",children:"Date"}),(0,s.jsxs)(g.J2,{children:[(0,s.jsx)(g.xo,{asChild:!0,children:(0,s.jsxs)(r.z,{variant:"outline",className:(0,b.cn)("w-full justify-start text-left font-normal form-input",!E&&"text-slate-500"),children:[(0,s.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),E?(0,v.WU)(E,"PPP"):(0,s.jsx)("span",{children:"Pick a date"})]})}),(0,s.jsx)(g.yk,{className:"w-auto p-0",align:"start",children:(0,s.jsx)(j.f,{mode:"single",selected:E,onSelect:e=>e&&T(e),initialFocus:!0})})]})]})]}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"accountNumber",className:"form-label",children:"Account Number"}),(0,s.jsx)(x.I,{id:"accountNumber",placeholder:"Last 4 digits",value:Z.accountNumber,onChange:e=>_("accountNumber",e.target.value),className:"form-input"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"transactionId",className:"form-label",children:"Transaction ID"}),(0,s.jsx)(x.I,{id:"transactionId",placeholder:"Transaction reference",value:Z.transactionId,onChange:e=>_("transactionId",e.target.value),className:"form-input"})]})]}),(0,s.jsxs)(f.cN,{className:"gap-2",children:[(0,s.jsx)(r.z,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:S,className:"professional-button-secondary",children:"Cancel"}),(0,s.jsxs)(r.z,{type:"submit",disabled:S,className:"bg-professional-blue hover:bg-professional-blue-dark text-white",children:[S&&(0,s.jsx)(y.Z,{className:"mr-2 h-4 w-4 animate-spin"}),o?"Update Transaction":"Add Transaction"]})]})]})]})})}var C=t(9026),E=t(1789),T=t(8877),Z=t(9788),k=t(8418),I=t(2829),O=t(6667),A=t(4101),D=t(2507);function M(e){let a,{open:t,onOpenChange:c,onTransactionAdded:o}=e,[d,m]=(0,n.useState)([]),[x,j]=(0,n.useState)(""),[g,v]=(0,n.useState)(null),[b,S]=(0,n.useState)(!1),[M,_]=(0,n.useState)(!1),[F,R]=(0,n.useState)("input"),{toast:P}=(0,w.pm)();(0,n.useEffect)(()=>{t&&(z(),U())},[t]);let z=async()=>{try{let e=await fetch("/api/categories");if(e.ok){let a=await e.json();m(a)}}catch(e){console.error("Error fetching categories:",e)}},U=()=>{j(""),v(null),R("input")},L=async()=>{if(!x.trim()){P({title:"Error",description:"Please enter SMS or email text to parse",variant:"destructive"});return}S(!0);try{let e=await fetch("/api/transactions/parse",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messageText:x.trim()})});if(e.ok){let a=await e.json();v(a),R("review")}else{let a=await e.json();P({title:"Parsing Failed",description:a.error||"Could not parse the transaction from the provided text",variant:"destructive"})}}catch(e){P({title:"Error",description:"Failed to parse transaction",variant:"destructive"})}finally{S(!1)}},Y=async()=>{if(g){_(!0);try{if((await fetch("/api/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:g.amount,type:g.type,description:g.description,merchant:g.merchant,categoryId:g.categoryId,accountNumber:g.accountNumber,transactionId:g.transactionId,date:g.date,balance:g.balance,status:g.status,source:x.toLowerCase().includes("@")?"EMAIL":"SMS",rawMessage:g.rawMessage})})).ok)o(),c(!1);else throw Error("Failed to save transaction")}catch(e){P({title:"Error",description:"Failed to save transaction",variant:"destructive"})}finally{_(!1)}}};return(0,s.jsx)(f.Vq,{open:t,onOpenChange:c,children:(0,s.jsxs)(f.cZ,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(f.fK,{children:[(0,s.jsxs)(f.$N,{className:"flex items-center",children:[(0,s.jsx)(Z.Z,{className:"mr-2 h-5 w-5 text-purple-600"}),"Parse SMS/Email Transaction"]}),(0,s.jsx)(f.Be,{children:"Paste your bank SMS or email text below to automatically extract transaction details."})]}),"input"===F&&(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"messageText",children:"SMS/Email Text"}),(0,s.jsx)(h.g,{id:"messageText",placeholder:"Paste your bank SMS or email text here...",value:x,onChange:e=>j(e.target.value),rows:6,className:"resize-none"})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(u._,{className:"text-sm font-medium",children:"Sample Messages (click to use):"}),(0,s.jsx)("div",{className:"space-y-2",children:["HDFC Bank Alert: Rs. 500.00 debited from your A/c ending 1234 on 01-05-2025 14:30. Txn ID: 1234567890. Status: Success.","PhonePe Alert: Rs. 250 debited from your bank account ending 4321 on 01-05-2025 14:30. Txn ID: 1122334455. Status: Success.","INR 2000 debited from A/c no. XX3423 on 05-02-19 07:27:11 IST at ECS PAY. Avl Bal- INR 2343.23."].map((e,a)=>(0,s.jsx)(C.Zb,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>j(e),children:(0,s.jsx)(C.aY,{className:"p-3",children:(0,s.jsx)("p",{className:"text-xs text-muted-foreground font-mono leading-relaxed",children:e})})},a))})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(k.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"SMS"})]}),(0,s.jsx)("span",{children:"•"}),(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(I.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:"Email"})]}),(0,s.jsx)("span",{children:"•"}),(0,s.jsx)("span",{children:"Supports major Indian banks & UPI platforms"})]})]}),"review"===F&&g&&(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(O.Z,{className:"h-5 w-5 text-green-600"}),(0,s.jsx)("span",{className:"font-medium",children:"Transaction Parsed Successfully"})]}),(0,s.jsxs)(C.Zb,{children:[(0,s.jsx)(C.Ol,{children:(0,s.jsx)(C.ll,{className:"text-lg",children:"Transaction Details"})}),(0,s.jsxs)(C.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{className:"text-sm font-medium text-muted-foreground",children:"Amount"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4 text-blue-600"}),(0,s.jsx)("span",{className:"text-lg font-semibold",children:(a=g.amount,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(a))})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{className:"text-sm font-medium text-muted-foreground",children:"Type"}),(0,s.jsx)(E.C,{className:(e=>{switch(e){case"INCOME":return"bg-green-100 text-green-800";case"EXPENSE":return"bg-red-100 text-red-800";case"TRANSFER":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(g.type),children:g.type})]})]}),(0,s.jsx)(T.Z,{}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{className:"text-sm font-medium text-muted-foreground",children:"Date"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(N.Z,{className:"h-4 w-4 text-gray-600"}),(0,s.jsx)("span",{children:new Date(g.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{className:"text-sm font-medium text-muted-foreground",children:"Status"}),(0,s.jsx)(E.C,{variant:"outline",className:"bg-green-50 text-green-700",children:g.status})]})]}),(g.merchant||g.description)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,{}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{className:"text-sm font-medium text-muted-foreground",children:"Description"}),(0,s.jsx)("p",{className:"text-sm",children:g.description||g.merchant})]})]}),(g.accountNumber||g.transactionId||g.platform)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(T.Z,{}),(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[g.accountNumber&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{className:"text-sm font-medium text-muted-foreground",children:"Account"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(A.Z,{className:"h-4 w-4 text-gray-600"}),(0,s.jsxs)("span",{className:"text-sm",children:["****",g.accountNumber]})]})]}),g.transactionId&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{className:"text-sm font-medium text-muted-foreground",children:"Txn ID"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(D.Z,{className:"h-4 w-4 text-gray-600"}),(0,s.jsx)("span",{className:"text-sm font-mono",children:g.transactionId})]})]}),g.platform&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{className:"text-sm font-medium text-muted-foreground",children:"Platform"}),(0,s.jsx)(E.C,{variant:"outline",children:g.platform})]})]})]}),(0,s.jsx)(T.Z,{}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u._,{htmlFor:"category",children:"Category"}),(0,s.jsxs)(p.Ph,{value:g.categoryId,onValueChange:e=>{if(g){let a=d.find(a=>a.id===e);v({...g,categoryId:e,suggestedCategory:(null==a?void 0:a.name)||"Others"})}},children:[(0,s.jsx)(p.i4,{children:(0,s.jsx)(p.ki,{})}),(0,s.jsx)(p.Bw,{children:d.map(e=>(0,s.jsx)(p.Ql,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{children:e.name}),e.name===g.suggestedCategory&&(0,s.jsx)(E.C,{variant:"secondary",className:"ml-2 text-xs",children:"Suggested"})]})},e.id))})]})]})]})]})]}),(0,s.jsxs)(f.cN,{children:["input"===F&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.z,{type:"button",variant:"outline",onClick:()=>c(!1),disabled:b,children:"Cancel"}),(0,s.jsxs)(r.z,{onClick:L,disabled:b||!x.trim(),children:[b&&(0,s.jsx)(y.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Parse Transaction"]})]}),"review"===F&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.z,{type:"button",variant:"outline",onClick:()=>R("input"),disabled:M,children:"Back"}),(0,s.jsxs)(r.z,{onClick:Y,disabled:M,children:[M&&(0,s.jsx)(y.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Transaction"]})]})]})]})})}var _=t(3607),F=t(1722),R=t(5541),P=t(7619),z=t(7673);function U(e){let{view:a,onViewChange:t,year:n,onYearChange:l,month:i,onMonthChange:c}=e,o=new Date().getFullYear(),d=new Date().getMonth()+1,m=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],x=Array.from({length:10},(e,a)=>o-a);return(0,s.jsx)(C.Zb,{className:"professional-card",children:(0,s.jsx)(C.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(N.Z,{className:"h-5 w-5 text-professional-blue"}),(0,s.jsx)("span",{className:"font-medium text-slate-900",children:"View:"})]}),(0,s.jsx)(_.mQ,{value:a,onValueChange:e=>t(e),children:(0,s.jsxs)(_.dr,{className:"grid w-full grid-cols-2",children:[(0,s.jsxs)(_.SP,{value:"monthly",className:"flex items-center gap-2",children:[(0,s.jsx)(F.Z,{className:"h-4 w-4"}),"Monthly"]}),(0,s.jsxs)(_.SP,{value:"yearly",className:"flex items-center gap-2",children:[(0,s.jsx)(R.Z,{className:"h-4 w-4"}),"Yearly"]})]})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:["monthly"===a&&(0,s.jsxs)(p.Ph,{value:null==i?void 0:i.toString(),onValueChange:e=>c(parseInt(e)),children:[(0,s.jsx)(p.i4,{className:"w-[140px] form-input",children:(0,s.jsx)(p.ki,{placeholder:"Month"})}),(0,s.jsx)(p.Bw,{children:m.map(e=>(0,s.jsx)(p.Ql,{value:e.value.toString(),children:e.label},e.value))})]}),(0,s.jsxs)(p.Ph,{value:n.toString(),onValueChange:e=>l(parseInt(e)),children:[(0,s.jsx)(p.i4,{className:"w-[100px] form-input",children:(0,s.jsx)(p.ki,{placeholder:"Year"})}),(0,s.jsx)(p.Bw,{children:x.map(e=>(0,s.jsx)(p.Ql,{value:e.toString(),children:e},e))})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(r.z,{onClick:()=>{"monthly"===a?1===i?(c(12),l(n-1)):c((i||1)-1):l(n-1)},variant:"outline",size:"sm",className:"border-slate-300 text-slate-600 hover:bg-slate-50",children:(0,s.jsx)(P.Z,{className:"h-4 w-4"})}),(0,s.jsx)("div",{className:"px-4 py-2 bg-slate-100 rounded-md text-sm font-medium text-slate-900 min-w-[120px] text-center",children:(()=>{if("monthly"===a&&i){var e;return"".concat(null===(e=m.find(e=>e.value===i))||void 0===e?void 0:e.label," ").concat(n)}return n.toString()})()}),(0,s.jsx)(r.z,{onClick:()=>{"monthly"===a?12===i?(c(1),l(n+1)):c((i||1)+1):l(n+1)},variant:"outline",size:"sm",disabled:!("monthly"===a?!(n===o&&(i||1)>=d):n<o),className:"border-slate-300 text-slate-600 hover:bg-slate-50 disabled:opacity-50",children:(0,s.jsx)(z.Z,{className:"h-4 w-4"})})]})]})]})})})}var L=t(9621),Y=t(7688),B=t(9461),V=t(4207),Q=t(9181),X=t(8399),J=t(7076);function G(e){let{year:a,month:t,view:r,refreshTrigger:i}=e,[c,o]=(0,n.useState)(null),[d,m]=(0,n.useState)(!0);(0,n.useEffect)(()=>{x()},[a,t,r]),(0,n.useEffect)(()=>{i&&i>0&&x()},[i]);let x=async()=>{try{m(!0);let e=new URLSearchParams({year:a.toString()});t&&"monthly"===r&&e.append("month",t.toString()),e.append("_t",Date.now().toString());let s=await fetch("/api/transactions/summary?".concat(e),{cache:"no-store",headers:{"Cache-Control":"no-cache"}});if(s.ok){let e=await s.json();o(e)}else console.error("Failed to fetch summary:",s.status)}catch(e){console.error("Error fetching summary:",e)}finally{m(!1)}};if(d)return(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,s.jsxs)(C.Zb,{className:"professional-card",children:[(0,s.jsxs)(C.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(L.O,{className:"h-4 w-24"}),(0,s.jsx)(L.O,{className:"h-8 w-8 rounded-lg"})]}),(0,s.jsxs)(C.aY,{children:[(0,s.jsx)(L.O,{className:"h-8 w-32"}),(0,s.jsx)(L.O,{className:"h-4 w-20 mt-2"})]})]},a))});if(!c)return(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-slate-600",children:"Failed to load summary data"})});let u=[{title:"Total Income",value:c.totalIncome,count:c.incomeTransactions,icon:Y.Z,color:"emerald",bgColor:"bg-emerald-100",textColor:"text-emerald-600",trend:"positive"},{title:"Total Expenses",value:c.totalExpense,count:c.expenseTransactions,icon:B.Z,color:"red",bgColor:"bg-red-100",textColor:"text-red-600",trend:"negative"},{title:"Net Balance",value:Math.abs(c.netBalance),count:null,icon:c.netBalance>=0?V.Z:Q.Z,color:c.netBalance>=0?"emerald":"red",bgColor:c.netBalance>=0?"bg-emerald-100":"bg-red-100",textColor:c.netBalance>=0?"text-emerald-600":"text-red-600",trend:c.netBalance>=0?"positive":"negative"},{title:"Total Transactions",value:c.totalTransactions,count:null,icon:X.Z,color:"blue",bgColor:"bg-blue-100",textColor:"text-professional-blue",trend:"neutral"}];return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-gradient-to-br from-professional-blue to-professional-blue-light rounded-lg",children:(0,s.jsx)(N.Z,{className:"h-5 w-5 text-white"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold text-slate-900",children:["monthly"===r&&t?"".concat(["January","February","March","April","May","June","July","August","September","October","November","December"][t-1]," ").concat(a):"Year ".concat(a)," Summary"]}),(0,s.jsx)("p",{className:"text-sm text-slate-600",children:"Financial overview for the selected period"})]})]})}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:u.map((e,a)=>(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*a},children:(0,s.jsxs)(C.Zb,{className:"professional-card hover-shadow",children:[(0,s.jsxs)(C.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(C.ll,{className:"text-sm font-medium text-slate-600",children:e.title}),(0,s.jsx)("div",{className:"p-2 ".concat(e.bgColor," rounded-lg"),children:(0,s.jsx)(e.icon,{className:"h-4 w-4 ".concat(e.textColor)})})]}),(0,s.jsxs)(C.aY,{children:[(0,s.jsx)("div",{className:"text-2xl font-bold ".concat(e.textColor),children:"Total Transactions"===e.title?e.value.toLocaleString():(0,J.xG)(e.value)}),null!==e.count&&(0,s.jsxs)("p",{className:"text-xs text-slate-600 mt-1",children:[e.count," transaction",1!==e.count?"s":""]}),"Net Balance"===e.title&&(0,s.jsx)("p",{className:"text-xs text-slate-600 mt-1",children:c.netBalance>=0?"Surplus":"Deficit"})]})]})},e.title))})]})}var W=t(9947),$=t(500),q=t(6185),K=t(9078);let H=(0,W.default)(()=>t.e(432).then(t.bind(t,432)).then(e=>e.Line),{loadableGenerated:{webpack:()=>[null]},ssr:!1,loading:()=>(0,s.jsx)(ea,{})}),ee=(0,W.default)(()=>t.e(432).then(t.bind(t,432)).then(e=>e.Doughnut),{loadableGenerated:{webpack:()=>[null]},ssr:!1,loading:()=>(0,s.jsx)(ea,{})});function ea(){return(0,s.jsx)("div",{className:"h-[300px] w-full flex items-center justify-center",children:(0,s.jsx)(L.O,{className:"h-full w-full rounded-lg"})})}function et(e){let{year:a,month:t,refreshTrigger:l}=e,[i,c]=(0,n.useState)([]),[o,d]=(0,n.useState)([]),[m,x]=(0,n.useState)(!0),[u,h]=(0,n.useState)(!1),p=(0,n.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e?h(!0):x(!0);let s=new URLSearchParams({year:a.toString()});t&&s.append("month",t.toString()),s.append("_t",Date.now().toString());let n=await fetch("/api/transactions/analytics?".concat(s),{cache:"no-store",headers:{"Cache-Control":"no-cache"}});if(n.ok){let e=await n.json();c(e.monthlyTrends||[]),d(e.categoryBreakdown||[])}else console.error("Failed to fetch analytics:",n.status)}catch(e){console.error("Error fetching analytics:",e)}finally{x(!1),h(!1)}},[a,t]);(0,n.useEffect)(()=>{p()},[p]),(0,n.useEffect)(()=>{l&&l>0&&p(!0)},[l,p]);let f=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],j={labels:i.map(e=>f[e.month-1]),datasets:[{label:"Income",data:i.map(e=>parseFloat(e.income.toString())),borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,fill:!0},{label:"Expenses",data:i.map(e=>parseFloat(e.expense.toString())),borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4,fill:!0}]},g={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:"".concat(t?"Monthly Trends for ".concat(f[t-1]," ").concat(a):"Monthly Trends for ".concat(a))},tooltip:{callbacks:{label:function(e){return"".concat(e.dataset.label,": ").concat((0,J.xG)(e.parsed.y))}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return(0,J.xG)(e)}}}}},N=o.filter(e=>"EXPENSE"===e.transaction_type),y=o.filter(e=>"INCOME"===e.transaction_type),v={labels:N.map(e=>e.category_name),datasets:[{data:N.map(e=>parseFloat(e.total_amount.toString())),backgroundColor:N.map(e=>e.category_color||"#3B82F6"),borderWidth:2,borderColor:"#ffffff"}]},b={labels:y.map(e=>e.category_name),datasets:[{data:y.map(e=>parseFloat(e.total_amount.toString())),backgroundColor:y.map(e=>e.category_color||"#10B981"),borderWidth:2,borderColor:"#ffffff"}]},w={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}},tooltip:{callbacks:{label:function(e){let a=e.dataset.data.reduce((e,a)=>e+a,0),t=(e.parsed/a*100).toFixed(1);return"".concat(e.label,": ").concat((0,J.xG)(e.parsed)," (").concat(t,"%)")}}}}};return m?(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(C.Zb,{className:"professional-card",children:[(0,s.jsx)(C.Ol,{children:(0,s.jsx)(L.O,{className:"h-6 w-48"})}),(0,s.jsx)(C.aY,{children:(0,s.jsx)(ea,{})})]}),(0,s.jsxs)(C.Zb,{className:"professional-card",children:[(0,s.jsx)(C.Ol,{children:(0,s.jsx)(L.O,{className:"h-6 w-48"})}),(0,s.jsx)(C.aY,{children:(0,s.jsx)(ea,{})})]})]}):(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,s.jsxs)(C.Zb,{className:"professional-card hover-shadow",children:[(0,s.jsxs)(C.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:[(0,s.jsxs)(C.ll,{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,s.jsx)(Y.Z,{className:"h-4 w-4 text-professional-blue"})}),"Income vs Expenses"]}),(0,s.jsx)(r.z,{variant:"outline",size:"sm",onClick:()=>{p(!0)},disabled:u,className:"h-8 w-8 p-0",children:(0,s.jsx)($.Z,{className:"h-4 w-4 ".concat(u?"animate-spin":"")})})]}),(0,s.jsx)(C.aY,{children:(0,s.jsx)("div",{className:"h-[300px]",children:i.length>0?(0,s.jsx)(H,{data:j,options:g}):(0,s.jsx)("div",{className:"h-full flex items-center justify-center text-slate-500",children:"No data available for the selected period"})})})]}),(0,s.jsxs)(C.Zb,{className:"professional-card hover-shadow",children:[(0,s.jsx)(C.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:(0,s.jsxs)(C.ll,{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,s.jsx)(q.Z,{className:"h-4 w-4 text-red-600"})}),"Expense Categories"]})}),(0,s.jsx)(C.aY,{children:(0,s.jsx)("div",{className:"h-[300px]",children:N.length>0?(0,s.jsx)(ee,{data:v,options:w}):(0,s.jsx)("div",{className:"h-full flex items-center justify-center text-slate-500",children:"No expense data available for the selected period"})})})]}),y.length>0&&(0,s.jsxs)(C.Zb,{className:"professional-card hover-shadow lg:col-span-2",children:[(0,s.jsx)(C.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:(0,s.jsxs)(C.ll,{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[(0,s.jsx)("div",{className:"p-2 bg-emerald-100 rounded-lg",children:(0,s.jsx)(q.Z,{className:"h-4 w-4 text-emerald-600"})}),"Income Categories"]})}),(0,s.jsx)(C.aY,{children:(0,s.jsx)("div",{className:"h-[300px]",children:(0,s.jsx)(ee,{data:b,options:w})})})]})]})}K.kL.register(K.uw,K.f$,K.od,K.jn,K.Dx,K.u,K.De,K.qi);var es=t(8238),en=t(2284),el=t(3472);function er(e){var a;let{searchTerm:t,onSearchChange:l,selectedCategory:i,onCategoryChange:c,selectedType:d,onTypeChange:m,dateRange:u,onDateRangeChange:h,sortBy:f,onSortChange:y,sortOrder:b,onSortOrderChange:w,categories:S,onClearFilters:T}=e,[Z,k]=(0,n.useState)(!1),I=t||"all"!==i||"all"!==d||u.from||u.to,O=(e,a)=>{"from"===a?h({...u,from:e}):h({...u,to:e})},A=()=>{h({from:void 0,to:void 0})};return(0,s.jsx)(C.Zb,{className:"professional-card",children:(0,s.jsx)(C.aY,{className:"p-6",children:(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("div",{className:"flex-1 relative",children:[(0,s.jsx)(o.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),(0,s.jsx)(x.I,{placeholder:"Search transactions, merchants, descriptions...",value:t,onChange:e=>l(e.target.value),className:"pl-10 form-input"})]}),I&&(0,s.jsxs)(r.z,{onClick:T,variant:"outline",className:"border-slate-300 text-slate-600 hover:bg-slate-50",children:[(0,s.jsx)(es.Z,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,s.jsxs)(p.Ph,{value:i,onValueChange:c,children:[(0,s.jsx)(p.i4,{className:"form-input",children:(0,s.jsx)(p.ki,{placeholder:"Category"})}),(0,s.jsxs)(p.Bw,{children:[(0,s.jsx)(p.Ql,{value:"all",children:"All Categories"}),S.map(e=>(0,s.jsx)(p.Ql,{value:e.id,children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),(0,s.jsx)("span",{children:e.name})]})},e.id))]})]}),(0,s.jsxs)(p.Ph,{value:d,onValueChange:m,children:[(0,s.jsx)(p.i4,{className:"form-input",children:(0,s.jsx)(p.ki,{placeholder:"Type"})}),(0,s.jsxs)(p.Bw,{children:[(0,s.jsx)(p.Ql,{value:"all",children:"All Types"}),(0,s.jsx)(p.Ql,{value:"INCOME",children:"Income"}),(0,s.jsx)(p.Ql,{value:"EXPENSE",children:"Expense"}),(0,s.jsx)(p.Ql,{value:"TRANSFER",children:"Transfer"})]})]}),(0,s.jsxs)(g.J2,{open:Z,onOpenChange:k,children:[(0,s.jsx)(g.xo,{asChild:!0,children:(0,s.jsxs)(r.z,{variant:"outline",className:"form-input justify-start text-left font-normal",children:[(0,s.jsx)(N.Z,{className:"mr-2 h-4 w-4"}),u.from?u.to?(0,s.jsxs)(s.Fragment,{children:[(0,v.WU)(u.from,"MMM dd")," - ",(0,v.WU)(u.to,"MMM dd")]}):(0,v.WU)(u.from,"MMM dd, yyyy"):(0,s.jsx)("span",{children:"Date range"})]})}),(0,s.jsx)(g.yk,{className:"w-auto p-0",align:"start",children:(0,s.jsxs)("div",{className:"p-4 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h4",{className:"font-semibold",children:"Select Date Range"}),(u.from||u.to)&&(0,s.jsx)(r.z,{onClick:A,variant:"ghost",size:"sm",className:"h-auto p-1",children:(0,s.jsx)(es.Z,{className:"h-4 w-4"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-slate-600 mb-2 block",children:"From"}),(0,s.jsx)(j.f,{mode:"single",selected:u.from,onSelect:e=>O(e,"from"),disabled:e=>e>new Date||!!u.to&&e>u.to,initialFocus:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-slate-600 mb-2 block",children:"To"}),(0,s.jsx)(j.f,{mode:"single",selected:u.to,onSelect:e=>O(e,"to"),disabled:e=>e>new Date||!!u.from&&e<u.from})]})]}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)(r.z,{onClick:()=>k(!1),size:"sm",children:"Done"})})]})})]}),(0,s.jsxs)(p.Ph,{value:f,onValueChange:y,children:[(0,s.jsx)(p.i4,{className:"form-input",children:(0,s.jsx)(p.ki,{placeholder:"Sort by"})}),(0,s.jsxs)(p.Bw,{children:[(0,s.jsx)(p.Ql,{value:"date",children:"Date"}),(0,s.jsx)(p.Ql,{value:"amount",children:"Amount"}),(0,s.jsx)(p.Ql,{value:"description",children:"Description"}),(0,s.jsx)(p.Ql,{value:"category",children:"Category"}),(0,s.jsx)(p.Ql,{value:"merchant",children:"Merchant"})]})]}),(0,s.jsxs)(r.z,{onClick:()=>w("asc"===b?"desc":"asc"),variant:"outline",className:"form-input justify-center",children:["asc"===b?(0,s.jsx)(en.Z,{className:"h-4 w-4 mr-2"}):(0,s.jsx)(el.Z,{className:"h-4 w-4 mr-2"}),"asc"===b?"Ascending":"Descending"]})]}),I&&(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-slate-600",children:"Active filters:"}),t&&(0,s.jsxs)(E.C,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:["Search: ",t,(0,s.jsx)(es.Z,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>l("")})]}),"all"!==i&&(0,s.jsxs)(E.C,{variant:"secondary",className:"bg-purple-100 text-purple-800",children:["Category: ",null===(a=S.find(e=>e.id===i))||void 0===a?void 0:a.name,(0,s.jsx)(es.Z,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>c("all")})]}),"all"!==d&&(0,s.jsxs)(E.C,{variant:"secondary",className:"bg-green-100 text-green-800",children:["Type: ",d,(0,s.jsx)(es.Z,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>m("all")})]}),(u.from||u.to)&&(0,s.jsxs)(E.C,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:["Date: ",u.from?(0,v.WU)(u.from,"MMM dd"):"Start"," - ",u.to?(0,v.WU)(u.to,"MMM dd"):"End",(0,s.jsx)(es.Z,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:A})]})]})]})})})}var ei=t(4790),ec=t(1756),eo=t(8060),ed=t(7700),em=t(559),ex=t(398),eu=t(7864),eh=t(660),ep=t(6585),ef=t(7018),ej=t(2076),eg=t(4130),eN=t(3466),ey=t(5593),ev=t(6117),eb=t(2006);function ew(e){let{open:a,onOpenChange:t,transactionId:c,onTransactionUpdated:o}=e,[d,m]=(0,n.useState)(null),[x,u]=(0,n.useState)(!1),[h,p]=(0,n.useState)(!1),[j,g]=(0,n.useState)(!1);(0,n.useEffect)(()=>{a&&c&&y()},[a,c]);let y=async()=>{if(c)try{u(!0);let e=await fetch("/api/transactions/".concat(c));if(e.ok){let a=await e.json();m(a)}else ev.Am.error("Failed to fetch transaction details"),t(!1)}catch(e){console.error("Error fetching transaction details:",e),ev.Am.error("Failed to fetch transaction details"),t(!1)}finally{u(!1)}},v=async()=>{if(d)try{(await fetch("/api/transactions/".concat(d.id),{method:"DELETE"})).ok?(ev.Am.success("Transaction deleted successfully"),o(),t(!1)):ev.Am.error("Failed to delete transaction")}catch(e){console.error("Error deleting transaction:",e),ev.Am.error("Failed to delete transaction")}finally{g(!1)}},b=e=>{switch(e){case ey.iU.INCOME:return"Income";case ey.iU.EXPENSE:return"Expense";case ey.iU.TRANSFER:return"Transfer";default:return e}};return a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(f.Vq,{open:a,onOpenChange:t,children:(0,s.jsxs)(f.cZ,{className:"sm:max-w-[700px] max-h-[90vh] overflow-hidden",children:[(0,s.jsx)(f.fK,{children:(0,s.jsxs)(f.$N,{className:"flex items-center gap-2",children:[(0,s.jsx)(i.Z,{className:"h-5 w-5 text-professional-blue"}),"Transaction Details"]})}),x?(0,s.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-professional-blue"})}):d?(0,s.jsx)(eu.x,{className:"max-h-[calc(90vh-120px)]",children:(0,s.jsxs)("div",{className:"space-y-6 pr-4",children:[(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[(0,s.jsx)("div",{className:"p-2 rounded-full bg-slate-100",children:(e=>{switch(e){case ey.iU.INCOME:return(0,s.jsx)(V.Z,{className:"h-6 w-6 text-emerald-600"});case ey.iU.EXPENSE:return(0,s.jsx)(Q.Z,{className:"h-6 w-6 text-red-600"});case ey.iU.TRANSFER:return(0,s.jsx)(eh.Z,{className:"h-6 w-6 text-blue-600"});default:return(0,s.jsx)(i.Z,{className:"h-6 w-6 text-professional-blue"})}})(d.type)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:d.description||"No description"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,s.jsx)(E.C,{className:"bg-blue-100 text-blue-800",children:b(d.type)}),d.category&&(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:d.category.color}}),(0,s.jsx)("span",{className:"text-sm text-gray-600",children:d.category.name})]})]})]})]}),(0,s.jsx)("div",{className:"text-3xl font-bold mb-2 ".concat((e=>{switch(e){case ey.iU.INCOME:return"text-emerald-600";case ey.iU.EXPENSE:return"text-red-600";case ey.iU.TRANSFER:return"text-blue-600";default:return"text-professional-blue"}})(d.type)),children:(e=>{let a=(0,J.xG)(e.amount);switch(e.type){case ey.iU.INCOME:return"+".concat(a);case ey.iU.EXPENSE:return"-".concat(a);default:return a}})(d)}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(N.Z,{className:"w-4 h-4 mr-1"}),new Date(d.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(ep.Z,{className:"w-4 h-4 mr-1"}),new Date(d.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>p(!0),className:"text-professional-blue border-blue-200 hover:bg-blue-50",children:[(0,s.jsx)(em.Z,{className:"w-4 h-4 mr-1"}),"Edit"]}),(0,s.jsxs)(r.z,{variant:"outline",size:"sm",onClick:()=>g(!0),className:"text-red-600 border-red-200 hover:bg-red-50",children:[(0,s.jsx)(ex.Z,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]}),(0,s.jsx)(T.Z,{}),(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,s.jsxs)(C.Zb,{children:[(0,s.jsx)(C.Ol,{children:(0,s.jsxs)(C.ll,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(eN.Z,{className:"h-5 w-5"}),"Transaction Information"]})}),(0,s.jsxs)(C.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Amount"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(0,J.xG)(d.amount)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Type"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:b(d.type)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Status"}),(0,s.jsx)("div",{className:"mt-1",children:(e=>{switch(e){case ey.LN.SUCCESS:return(0,s.jsxs)(E.C,{className:"bg-emerald-100 text-emerald-800",children:[(0,s.jsx)(O.Z,{className:"w-3 h-3 mr-1"}),"Success"]});case ey.LN.PENDING:return(0,s.jsxs)(E.C,{variant:"outline",className:"text-orange-600 border-orange-200",children:[(0,s.jsx)(ep.Z,{className:"w-3 h-3 mr-1"}),"Pending"]});case ey.LN.FAILED:return(0,s.jsxs)(E.C,{className:"bg-red-100 text-red-800",children:[(0,s.jsx)(ef.Z,{className:"w-3 h-3 mr-1"}),"Failed"]});default:return(0,s.jsx)(E.C,{variant:"outline",children:e})}})(d.status)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Source"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(e=>{switch(e){case ey.fS.SMS:return(0,s.jsx)(k.Z,{className:"w-4 h-4"});case ey.fS.EMAIL:return(0,s.jsx)(I.Z,{className:"w-4 h-4"});case ey.fS.BANK_STATEMENT:return(0,s.jsx)(ej.Z,{className:"w-4 h-4"});case ey.fS.MANUAL:return(0,s.jsx)(eg.Z,{className:"w-4 h-4"});default:return(0,s.jsx)(eN.Z,{className:"w-4 h-4"})}})(d.source),(0,s.jsx)("span",{className:"text-lg font-semibold text-gray-900",children:(e=>{switch(e){case ey.fS.SMS:return"SMS Import";case ey.fS.EMAIL:return"Email Import";case ey.fS.BANK_STATEMENT:return"Bank Statement";case ey.fS.MANUAL:return"Manual Entry";default:return e}})(d.source)})]})]})]}),d.merchant&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Merchant"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:d.merchant})]}),d.description&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Description"}),(0,s.jsx)("p",{className:"text-gray-900 mt-1",children:d.description})]})]})]})}),(d.accountNumber||d.transactionId||null!==d.balance)&&(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,s.jsxs)(C.Zb,{children:[(0,s.jsx)(C.Ol,{children:(0,s.jsxs)(C.ll,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(D.Z,{className:"h-5 w-5"}),"Technical Details"]})}),(0,s.jsx)(C.aY,{className:"space-y-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[d.accountNumber&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Account Number"}),(0,s.jsxs)("p",{className:"text-lg font-semibold text-gray-900 font-mono",children:["****",d.accountNumber]})]}),d.transactionId&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Transaction ID"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900 font-mono",children:d.transactionId})]}),null!==d.balance&&void 0!==d.balance&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Account Balance"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:(0,J.xG)(d.balance)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Created"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:new Date(d.createdAt).toLocaleDateString()})]})]})})]})}),d.rawMessage&&(0,s.jsx)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,s.jsxs)(C.Zb,{children:[(0,s.jsx)(C.Ol,{children:(0,s.jsxs)(C.ll,{className:"text-lg flex items-center gap-2",children:[(0,s.jsx)(eN.Z,{className:"h-5 w-5"}),"Original Message"]})}),(0,s.jsx)(C.aY,{children:(0,s.jsx)("div",{className:"bg-gray-50 p-3 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-gray-700 font-mono whitespace-pre-wrap",children:d.rawMessage})})})]})})]})}):(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsx)("p",{className:"text-gray-600",children:"Transaction not found"})})]})}),(0,s.jsx)(S,{open:h,onOpenChange:p,onTransactionAdded:()=>{p(!1),o(),y()},editingTransaction:d}),(0,s.jsx)(eb.aR,{open:j,onOpenChange:g,children:(0,s.jsxs)(eb._T,{children:[(0,s.jsxs)(eb.fY,{children:[(0,s.jsx)(eb.f$,{children:"Delete Transaction"}),(0,s.jsx)(eb.yT,{children:"Are you sure you want to delete this transaction? This action cannot be undone and will remove the transaction from all reports and calculations."})]}),(0,s.jsxs)(eb.xo,{children:[(0,s.jsx)(eb.le,{children:"Cancel"}),(0,s.jsx)(eb.OL,{onClick:v,className:"bg-red-600 hover:bg-red-700",children:"Delete Transaction"})]})]})})]}):null}function eS(e){let{year:a,month:t,searchTerm:o,selectedCategory:d,selectedType:m,dateRange:x,sortBy:u,sortOrder:h,onAddTransaction:p,onTransactionUpdated:f,onTransactionDeleted:j}=e,[g,v]=(0,n.useState)([]),[b,T]=(0,n.useState)(!0),[Z,k]=(0,n.useState)({page:1,limit:20,total:0,pages:0}),[I,O]=(0,n.useState)(!1),[A,D]=(0,n.useState)(!1),[M,_]=(0,n.useState)(!1),[F,R]=(0,n.useState)(null),{toast:U}=(0,w.pm)();(0,n.useEffect)(()=>{Y()},[a,t,o,d,m,x,u,h,Z.page]);let Y=async()=>{try{T(!0);let e=new URLSearchParams({page:Z.page.toString(),limit:Z.limit.toString(),sortBy:u,sortOrder:h});a&&e.append("year",a.toString()),t&&e.append("month",t.toString()),o&&e.append("search",o),"all"!==d&&e.append("categoryId",d),"all"!==m&&e.append("type",m),x.from&&e.append("startDate",x.from.toISOString()),x.to&&e.append("endDate",x.to.toISOString());let s=await fetch("/api/transactions?".concat(e));if(s.ok){let e=await s.json();v(e.transactions||[]),k(a=>({...a,total:e.pagination.total,pages:e.pagination.pages}))}else console.error("Failed to fetch transactions:",s.status),U({title:"Error",description:"Failed to load transactions",variant:"destructive"})}catch(e){console.error("Error fetching transactions:",e),U({title:"Error",description:"Failed to load transactions",variant:"destructive"})}finally{T(!1)}},B=e=>{k(a=>({...a,page:e}))},G=e=>{R(e),O(!0)},W=e=>{R(e),D(!0)},$=e=>{R(e),_(!0)},q=async()=>{if(F)try{(await fetch("/api/transactions/".concat(F.id),{method:"DELETE"})).ok?(U({title:"Success",description:"Transaction deleted successfully"}),Y(),null==j||j()):U({title:"Error",description:"Failed to delete transaction",variant:"destructive"})}catch(e){console.error("Error deleting transaction:",e),U({title:"Error",description:"Failed to delete transaction",variant:"destructive"})}finally{_(!1),R(null)}},K=()=>{Y(),R(null),null==f||f()},H=e=>{switch(e){case"INCOME":return(0,s.jsx)(V.Z,{className:"h-4 w-4 text-emerald-600"});case"EXPENSE":return(0,s.jsx)(Q.Z,{className:"h-4 w-4 text-red-600"});default:return(0,s.jsx)(i.Z,{className:"h-4 w-4 text-professional-blue"})}},ee=e=>{switch(e){case"INCOME":return"text-emerald-600";case"EXPENSE":return"text-red-600";default:return"text-professional-blue"}},ea=e=>{let a=(0,J.xG)(e.amount);return"INCOME"===e.type?"+".concat(a):"-".concat(a)},et=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),es=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return b&&1===Z.page?(0,s.jsxs)(C.Zb,{className:"professional-card",children:[(0,s.jsx)(C.Ol,{children:(0,s.jsx)(L.O,{className:"h-6 w-48"})}),(0,s.jsx)(C.aY,{children:(0,s.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border border-slate-200 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)(L.O,{className:"h-10 w-10 rounded-full"}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(L.O,{className:"h-4 w-48"}),(0,s.jsx)(L.O,{className:"h-3 w-32"})]})]}),(0,s.jsxs)("div",{className:"text-right space-y-2",children:[(0,s.jsx)(L.O,{className:"h-5 w-24"}),(0,s.jsx)(L.O,{className:"h-4 w-16"})]})]},a))})})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(C.Zb,{className:"professional-card",children:[(0,s.jsxs)(C.Ol,{className:"flex flex-row items-center justify-between space-y-0",children:[(0,s.jsxs)(C.ll,{className:"text-slate-900 flex items-center gap-2",children:[(0,s.jsx)(X.Z,{className:"h-5 w-5 text-professional-blue"}),"Transactions (",Z.total.toLocaleString(),")"]}),b&&Z.page>1&&(0,s.jsx)(y.Z,{className:"h-4 w-4 animate-spin text-professional-blue"})]}),(0,s.jsx)(C.aY,{children:(0,s.jsx)("div",{className:"space-y-4",children:0===g.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)(i.Z,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No transactions found"}),(0,s.jsx)("p",{className:"text-slate-600 mb-6",children:o||"all"!==d||"all"!==m||x.from||x.to?"Try adjusting your filters to see more results":"Start by adding your first transaction"}),(0,s.jsxs)(r.z,{onClick:p,className:"bg-professional-blue hover:bg-professional-blue-dark text-white",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Add Transaction"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ei.M,{mode:"wait",children:(0,s.jsx)("div",{className:"space-y-3",children:g.map((e,a)=>(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.05*a},className:"group flex items-center justify-between p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition-all duration-200 hover-shadow cursor-pointer",onClick:()=>G(e),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[(0,s.jsx)("div",{className:"p-2 rounded-full bg-slate-100 group-hover:bg-white transition-colors",children:H(e.type)}),(0,s.jsx)("div",{className:"flex-1 min-w-0",children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-semibold text-slate-900 truncate",children:e.description||"No description"}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 mt-1",children:[e.merchant&&(0,s.jsx)("span",{className:"text-sm text-slate-600 truncate",children:e.merchant}),e.category&&(0,s.jsx)(E.C,{variant:"secondary",className:"text-xs px-2 py-1",style:{backgroundColor:e.category.color+"20",color:e.category.color,border:"1px solid ".concat(e.category.color,"30")},children:e.category.name})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-3 mt-2 text-xs text-slate-500",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(N.Z,{className:"h-3 w-3 mr-1"}),et(e.date)]}),(0,s.jsx)("span",{children:es(e.date)}),e.transactionId&&(0,s.jsxs)("span",{className:"font-mono",children:["ID: ",e.transactionId.slice(-6)]})]})]})})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-lg font-bold ".concat(ee(e.type)),children:ea(e)}),(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2 mt-1",children:[(0,s.jsx)(E.C,{variant:"SUCCESS"===e.status?"default":"destructive",className:"text-xs ".concat("SUCCESS"===e.status?"bg-emerald-100 text-emerald-800 border-emerald-200":"bg-red-100 text-red-800 border-red-200"),children:e.status}),"MANUAL"!==e.source&&(0,s.jsx)(E.C,{variant:"outline",className:"text-xs",children:e.source})]})]}),(0,s.jsxs)(ec.h_,{children:[(0,s.jsx)(ec.$F,{asChild:!0,children:(0,s.jsx)(r.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:e=>e.stopPropagation(),children:(0,s.jsx)(eo.Z,{className:"h-4 w-4"})})}),(0,s.jsxs)(ec.AW,{align:"end",className:"w-48",children:[(0,s.jsxs)(ec.Xi,{onClick:a=>{a.stopPropagation(),G(e)},className:"flex items-center gap-2",children:[(0,s.jsx)(ed.Z,{className:"h-4 w-4"}),"View Details"]}),(0,s.jsxs)(ec.Xi,{onClick:a=>{a.stopPropagation(),W(e)},className:"flex items-center gap-2",children:[(0,s.jsx)(em.Z,{className:"h-4 w-4"}),"Edit Transaction"]}),(0,s.jsxs)(ec.Xi,{onClick:a=>{a.stopPropagation(),$(e)},className:"flex items-center gap-2 text-red-600 focus:text-red-600",children:[(0,s.jsx)(ex.Z,{className:"h-4 w-4"}),"Delete Transaction"]})]})]})]})]},"".concat(e.id,"-").concat(Z.page)))})}),Z.pages>1&&(0,s.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t border-slate-200",children:[(0,s.jsxs)("div",{className:"text-sm text-slate-600",children:["Showing ",(Z.page-1)*Z.limit+1," to"," ",Math.min(Z.page*Z.limit,Z.total)," of"," ",Z.total.toLocaleString()," transactions"]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsxs)(r.z,{onClick:()=>B(Z.page-1),disabled:1===Z.page||b,variant:"outline",size:"sm",className:"border-slate-300 text-slate-600 hover:bg-slate-50",children:[(0,s.jsx)(P.Z,{className:"h-4 w-4 mr-1"}),"Previous"]}),(0,s.jsx)("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,Z.pages)},(e,a)=>{let t;return t=Z.pages<=5?a+1:Z.page<=3?a+1:Z.page>=Z.pages-2?Z.pages-4+a:Z.page-2+a,(0,s.jsx)(r.z,{onClick:()=>B(t),disabled:b,variant:Z.page===t?"default":"outline",size:"sm",className:"w-8 h-8 p-0 ".concat(Z.page===t?"bg-professional-blue text-white":"border-slate-300 text-slate-600 hover:bg-slate-50"),children:t},t)})}),(0,s.jsxs)(r.z,{onClick:()=>B(Z.page+1),disabled:Z.page===Z.pages||b,variant:"outline",size:"sm",className:"border-slate-300 text-slate-600 hover:bg-slate-50",children:["Next",(0,s.jsx)(z.Z,{className:"h-4 w-4 ml-1"})]})]})]})]})})})]}),(0,s.jsx)(ew,{open:I,onOpenChange:O,transactionId:(null==F?void 0:F.id)||null,onTransactionUpdated:K}),(0,s.jsx)(S,{open:A,onOpenChange:D,onTransactionAdded:K,editingTransaction:F}),(0,s.jsx)(eb.aR,{open:M,onOpenChange:_,children:(0,s.jsxs)(eb._T,{children:[(0,s.jsxs)(eb.fY,{children:[(0,s.jsx)(eb.f$,{children:"Delete Transaction"}),(0,s.jsx)(eb.yT,{children:"Are you sure you want to delete this transaction? This action cannot be undone and will remove the transaction from all reports and calculations."})]}),(0,s.jsxs)(eb.xo,{children:[(0,s.jsx)(eb.le,{onClick:()=>R(null),children:"Cancel"}),(0,s.jsx)(eb.OL,{onClick:q,className:"bg-red-600 hover:bg-red-700",children:"Delete Transaction"})]})]})})]})}function eC(){let[e,a]=(0,n.useState)("monthly"),[t,x]=(0,n.useState)(new Date().getFullYear()),[u,h]=(0,n.useState)(new Date().getMonth()+1),[p,f]=(0,n.useState)(""),[j,g]=(0,n.useState)("all"),[N,y]=(0,n.useState)("all"),[v,b]=(0,n.useState)({}),[C,E]=(0,n.useState)("date"),[T,Z]=(0,n.useState)("desc"),[k,I]=(0,n.useState)(!1),[O,A]=(0,n.useState)(!1),[D,_]=(0,n.useState)([]),[F,R]=(0,n.useState)(0),{toast:P}=(0,w.pm)();(0,n.useEffect)(()=>{z()},[]);let z=async()=>{try{let e=await fetch("/api/categories");if(e.ok){let a=await e.json();_(a)}else console.error("Failed to fetch categories:",e.status)}catch(e){console.error("Error fetching categories:",e)}},L=()=>{R(e=>e+1),I(!1),A(!1),P({title:"Success",description:"Transaction added successfully"})},Y=async()=>{try{let a=new URLSearchParams;"monthly"===e&&u?(a.append("year",t.toString()),a.append("month",u.toString())):a.append("year",t.toString()),"all"!==j&&a.append("categoryId",j),"all"!==N&&a.append("type",N),p&&a.append("search",p),v.from&&a.append("startDate",v.from.toISOString()),v.to&&a.append("endDate",v.to.toISOString());let s=await fetch("/api/transactions/export?".concat(a));if(!s.ok)throw Error("Export failed");let n=await s.blob(),l=window.URL.createObjectURL(n),r=document.createElement("a");r.href=l;let i="monthly"===e&&u?"".concat(t,"-").concat(u.toString().padStart(2,"0")):t.toString();r.download="transactions-".concat(i,".csv"),document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(l),document.body.removeChild(r),P({title:"Success",description:"Transactions exported successfully"})}catch(e){P({title:"Error",description:"Failed to export transactions",variant:"destructive"})}};return(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-gradient-to-br from-professional-blue to-professional-blue-light rounded-lg",children:(0,s.jsx)(i.Z,{className:"h-6 w-6 text-white"})}),"Transaction Analytics"]}),(0,s.jsx)("p",{className:"text-slate-600 mt-1",children:"Comprehensive view of your financial transactions with insights and analytics"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(r.z,{onClick:()=>I(!0),className:"bg-professional-blue hover:bg-professional-blue-dark text-white",children:[(0,s.jsx)(c.Z,{className:"h-4 w-4 mr-2"}),"Add Transaction"]}),(0,s.jsxs)(r.z,{onClick:()=>A(!0),variant:"outline",className:"border-emerald-600 text-emerald-600 hover:bg-emerald-50",children:[(0,s.jsx)(o.Z,{className:"h-4 w-4 mr-2"}),"Parse SMS"]}),(0,s.jsxs)(r.z,{onClick:Y,variant:"outline",className:"border-slate-300 text-slate-600 hover:bg-slate-50",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),(0,s.jsx)(U,{view:e,onViewChange:e=>{a(e),b({})},year:t,onYearChange:x,month:"monthly"===e?u:void 0,onMonthChange:h}),(0,s.jsx)(G,{year:t,month:"monthly"===e?u:void 0,view:e,refreshTrigger:F},"".concat(e,"-").concat(t,"-").concat(u)),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg",children:(0,s.jsx)(m.Z,{className:"h-5 w-5 text-white"})}),(0,s.jsx)("h2",{className:"text-xl font-semibold text-slate-900",children:"Financial Insights"})]}),(0,s.jsx)(et,{year:t,month:"monthly"===e?u:void 0,refreshTrigger:F},"charts-".concat(e,"-").concat(t,"-").concat(u))]}),(0,s.jsx)(er,{searchTerm:p,onSearchChange:f,selectedCategory:j,onCategoryChange:g,selectedType:N,onTypeChange:y,dateRange:v,onDateRangeChange:b,sortBy:C,onSortChange:E,sortOrder:T,onSortOrderChange:Z,categories:D,onClearFilters:()=>{f(""),g("all"),y("all"),b({}),E("date"),Z("desc")}}),(0,s.jsx)(eS,{year:t,month:"monthly"===e?u:void 0,searchTerm:p,selectedCategory:j,selectedType:N,dateRange:v,sortBy:C,sortOrder:T,onAddTransaction:()=>I(!0),onTransactionUpdated:()=>{R(e=>e+1),P({title:"Success",description:"Transaction updated successfully"})},onTransactionDeleted:()=>{R(e=>e+1),P({title:"Success",description:"Transaction deleted successfully"})}},"list-".concat(e,"-").concat(t,"-").concat(u,"-").concat(p,"-").concat(j,"-").concat(N,"-").concat(C,"-").concat(T,"-").concat(F))]}),(0,s.jsx)(S,{open:k,onOpenChange:I,onTransactionAdded:L}),(0,s.jsx)(M,{open:O,onOpenChange:A,onTransactionAdded:L})]})}},2006:function(e,a,t){"use strict";t.d(a,{OL:function(){return f},_T:function(){return m},aR:function(){return c},f$:function(){return h},fY:function(){return x},le:function(){return j},xo:function(){return u},yT:function(){return p}});var s=t(784),n=t(1960),l=t(5591),r=t(5518),i=t(5796);let c=l.fC;l.xz;let o=l.h_,d=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.aV,{className:(0,r.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...n,ref:a})});d.displayName=l.aV.displayName;let m=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(d,{}),(0,s.jsx)(l.VY,{ref:a,className:(0,r.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n})]})});m.displayName=l.VY.displayName;let x=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col space-y-2 text-center sm:text-left",a),...t})};x.displayName="AlertDialogHeader";let u=e=>{let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,r.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...t})};u.displayName="AlertDialogFooter";let h=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.Dx,{ref:a,className:(0,r.cn)("text-lg font-semibold",t),...n})});h.displayName=l.Dx.displayName;let p=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.dk,{ref:a,className:(0,r.cn)("text-sm text-muted-foreground",t),...n})});p.displayName=l.dk.displayName;let f=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.aU,{ref:a,className:(0,r.cn)((0,i.d)(),t),...n})});f.displayName=l.aU.displayName;let j=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.$j,{ref:a,className:(0,r.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",t),...n})});j.displayName=l.$j.displayName},3686:function(e,a,t){"use strict";t.d(a,{f:function(){return o}});var s=t(784);t(1960);var n=t(7619),l=t(7673),r=t(691),i=t(5518),c=t(5796);function o(e){let{className:a,classNames:t,showOutsideDays:o=!0,...d}=e;return(0,s.jsx)(r._W,{showOutsideDays:o,className:(0,i.cn)("p-3",a),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,c.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,c.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:e=>{let{...a}=e;return(0,s.jsx)(n.Z,{className:"h-4 w-4"})},IconRight:e=>{let{...a}=e;return(0,s.jsx)(l.Z,{className:"h-4 w-4"})}},...d})}o.displayName="Calendar"},1756:function(e,a,t){"use strict";t.d(a,{$F:function(){return m},AW:function(){return x},Xi:function(){return u},h_:function(){return d}});var s=t(784),n=t(1960),l=t(6818),r=t(7673),i=t(9568),c=t(7827),o=t(5518);let d=l.fC,m=l.xz;l.ZA,l.Uv,l.Tr,l.Ee,n.forwardRef((e,a)=>{let{className:t,inset:n,children:i,...c}=e;return(0,s.jsxs)(l.fF,{ref:a,className:(0,o.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",n&&"pl-8",t),...c,children:[i,(0,s.jsx)(r.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=l.fF.displayName,n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.tu,{ref:a,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...n})}).displayName=l.tu.displayName;let x=n.forwardRef((e,a)=>{let{className:t,sideOffset:n=4,...r}=e;return(0,s.jsx)(l.Uv,{children:(0,s.jsx)(l.VY,{ref:a,sideOffset:n,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})})});x.displayName=l.VY.displayName;let u=n.forwardRef((e,a)=>{let{className:t,inset:n,...r}=e;return(0,s.jsx)(l.ck,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n&&"pl-8",t),...r})});u.displayName=l.ck.displayName,n.forwardRef((e,a)=>{let{className:t,children:n,checked:r,...c}=e;return(0,s.jsxs)(l.oC,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:r,...c,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.wU,{children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})}),n]})}).displayName=l.oC.displayName,n.forwardRef((e,a)=>{let{className:t,children:n,...r}=e;return(0,s.jsxs)(l.Rk,{ref:a,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,s.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,s.jsx)(l.wU,{children:(0,s.jsx)(c.Z,{className:"h-2 w-2 fill-current"})})}),n]})}).displayName=l.Rk.displayName,n.forwardRef((e,a)=>{let{className:t,inset:n,...r}=e;return(0,s.jsx)(l.__,{ref:a,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",n&&"pl-8",t),...r})}).displayName=l.__.displayName,n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.Z0,{ref:a,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",t),...n})}).displayName=l.Z0.displayName},2841:function(e,a,t){"use strict";t.d(a,{J2:function(){return i},xo:function(){return c},yk:function(){return o}});var s=t(784),n=t(1960),l=t(4543),r=t(5518);let i=l.fC,c=l.xz,o=n.forwardRef((e,a)=>{let{className:t,align:n="center",sideOffset:i=4,...c}=e;return(0,s.jsx)(l.h_,{children:(0,s.jsx)(l.VY,{ref:a,align:n,sideOffset:i,className:(0,r.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...c})})});o.displayName=l.VY.displayName},7864:function(e,a,t){"use strict";t.d(a,{x:function(){return i}});var s=t(784),n=t(1960),l=t(3951),r=t(5518);let i=n.forwardRef((e,a)=>{let{className:t,children:n,...i}=e;return(0,s.jsxs)(l.fC,{ref:a,className:(0,r.cn)("relative overflow-hidden",t),...i,children:[(0,s.jsx)(l.l_,{className:"h-full w-full rounded-[inherit]",children:n}),(0,s.jsx)(c,{}),(0,s.jsx)(l.Ns,{})]})});i.displayName=l.fC.displayName;let c=n.forwardRef((e,a)=>{let{className:t,orientation:n="vertical",...i}=e;return(0,s.jsx)(l.gb,{ref:a,orientation:n,className:(0,r.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...i,children:(0,s.jsx)(l.q4,{className:"relative flex-1 rounded-full bg-border"})})});c.displayName=l.gb.displayName},8877:function(e,a,t){"use strict";t.d(a,{Z:function(){return i}});var s=t(784),n=t(1960),l=t(4585),r=t(5518);let i=n.forwardRef((e,a)=>{let{className:t,orientation:n="horizontal",decorative:i=!0,...c}=e;return(0,s.jsx)(l.f,{ref:a,decorative:i,orientation:n,className:(0,r.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",t),...c})});i.displayName=l.f.displayName},9621:function(e,a,t){"use strict";t.d(a,{O:function(){return l}});var s=t(784),n=t(5518);function l(e){let{className:a,...t}=e;return(0,s.jsx)("div",{className:(0,n.cn)("animate-pulse rounded-md bg-muted",a),...t})}},3607:function(e,a,t){"use strict";t.d(a,{SP:function(){return o},dr:function(){return c},mQ:function(){return i},nU:function(){return d}});var s=t(784),n=t(1960),l=t(9930),r=t(5518);let i=l.fC,c=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.aV,{ref:a,className:(0,r.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...n})});c.displayName=l.aV.displayName;let o=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.xz,{ref:a,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...n})});o.displayName=l.xz.displayName;let d=n.forwardRef((e,a)=>{let{className:t,...n}=e;return(0,s.jsx)(l.VY,{ref:a,className:(0,r.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...n})});d.displayName=l.VY.displayName},8926:function(e,a,t){"use strict";t.d(a,{pm:function(){return x}});var s=t(1960);let n=0,l=new Map,r=e=>{if(l.has(e))return;let a=setTimeout(()=>{l.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);l.set(e,a)},i=(e,a)=>{switch(a.type){case"ADD_TOAST":return{...e,toasts:[a.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===a.toast.id?{...e,...a.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=a;return t?r(t):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===a.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==a.toastId)}}},c=[],o={toasts:[]};function d(e){o=i(o,e),c.forEach(e=>{e(o)})}function m(e){let{...a}=e,t=(n=(n+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:t});return d({type:"ADD_TOAST",toast:{...a,id:t,open:!0,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:t}})}}function x(){let[e,a]=s.useState(o);return s.useEffect(()=>(c.push(a),()=>{let e=c.indexOf(a);e>-1&&c.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}}},function(e){e.O(0,[460,266,862,13,815,142,789,270,624,977,991,427,275,744],function(){return e(e.s=4527)}),_N_E=e.O()}]);