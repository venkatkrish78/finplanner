(()=>{var e={};e.id=8220,e.ids=[8220],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3962:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>o}),s(368),s(7699),s(6289);var t=s(2752),l=s(7380),r=s(459),n=s.n(r),i=s(8119),c={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>i[e]);s.d(a,c);let o=["",{children:["transactions",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,368)),"/home/ubuntu/moneymitra/app/app/transactions/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7699)),"/home/ubuntu/moneymitra/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,6289,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ubuntu/moneymitra/app/app/transactions/page.tsx"],m="/transactions/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/transactions/page",pathname:"/transactions",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},8412:(e,a,s)=>{Promise.resolve().then(s.bind(s,6993))},6993:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>eD});var t=s(4848),l=s(5642),r=s(9631),n=s(8287),i=s(4955),c=s(1276),o=s(93);let d=(0,o.Z)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),m=(0,o.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var x=s(4501),h=s(5205),p=s(7767),u=s(1262),f=s(2595),j=s(4339),g=s(6765),y=s(5379),N=s(748);let v=(0,o.Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);var b=s(9902),w=s(5709),S=s(8459);function k({open:e,onOpenChange:a,onTransactionAdded:s,editingTransaction:i}){let[o,d]=(0,l.useState)([]),[m,x]=(0,l.useState)(!1),[k,C]=(0,l.useState)(new Date),[E,M]=(0,l.useState)({amount:"",type:"EXPENSE",description:"",merchant:"",categoryId:"",accountNumber:"",transactionId:""}),{toast:T}=(0,S.pm)(),Z=async e=>{if(e.preventDefault(),!E.amount||0>=parseFloat(E.amount)){T({title:"Error",description:"Please enter a valid amount",variant:"destructive"});return}if(!E.categoryId){T({title:"Error",description:"Please select a category",variant:"destructive"});return}x(!0);try{let e={amount:parseFloat(E.amount),type:E.type,description:E.description.trim()||null,merchant:E.merchant.trim()||null,categoryId:E.categoryId,accountNumber:E.accountNumber.trim()||null,transactionId:E.transactionId.trim()||null,date:k.toISOString(),status:"SUCCESS",source:"MANUAL"};console.log("Submitting transaction:",e);let t=i?`/api/transactions/${i.id}`:"/api/transactions",l=await fetch(t,{method:i?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),r=await l.json();if(console.log("Response:",r),l.ok)T({title:"Success",description:i?"Transaction updated successfully":"Transaction added successfully"}),s(),a(!1),i||I();else throw Error(r.error||`Failed to ${i?"update":"create"} transaction`)}catch(e){console.error(`Error ${i?"updating":"creating"} transaction:`,e),T({title:"Error",description:e instanceof Error?e.message:`Failed to ${i?"update":"add"} transaction`,variant:"destructive"})}finally{x(!1)}},I=()=>{M({amount:"",type:"EXPENSE",description:"",merchant:"",categoryId:"",accountNumber:"",transactionId:""}),C(new Date)},A=(e,a)=>{M(s=>({...s,[e]:a}))};return t.jsx(j.Vq,{open:e,onOpenChange:a,children:(0,t.jsxs)(j.cZ,{className:"sm:max-w-[500px] max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(j.fK,{children:[(0,t.jsxs)(j.$N,{className:"flex items-center gap-2 text-slate-900",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-professional-blue to-professional-blue-light rounded-lg",children:t.jsx(c.Z,{className:"h-4 w-4 text-white"})}),i?"Edit Transaction":"Add New Transaction"]}),t.jsx(j.Be,{className:"text-slate-600",children:i?"Update the transaction details below.":"Enter the details of your transaction below."})]}),(0,t.jsxs)("form",{onSubmit:Z,className:"space-y-6",children:[(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"amount",className:"form-label",children:"Amount *"}),t.jsx(h.I,{id:"amount",type:"number",step:"0.01",min:"0.01",placeholder:"0.00",value:E.amount,onChange:e=>A("amount",e.target.value),className:"form-input",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"type",className:"form-label",children:"Type *"}),(0,t.jsxs)(f.Ph,{value:E.type,onValueChange:e=>A("type",e),children:[t.jsx(f.i4,{className:"form-input",children:t.jsx(f.ki,{})}),(0,t.jsxs)(f.Bw,{children:[t.jsx(f.Ql,{value:"INCOME",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-500"}),t.jsx("span",{children:"Income"})]})}),t.jsx(f.Ql,{value:"EXPENSE",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),t.jsx("span",{children:"Expense"})]})}),t.jsx(f.Ql,{value:"TRANSFER",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),t.jsx("span",{children:"Transfer"})]})})]})]})]})]}),(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1},className:"space-y-2",children:[t.jsx(p._,{htmlFor:"category",className:"form-label",children:"Category *"}),(0,t.jsxs)(f.Ph,{value:E.categoryId,onValueChange:e=>A("categoryId",e),children:[t.jsx(f.i4,{className:"form-input",children:t.jsx(f.ki,{placeholder:"Select a category"})}),t.jsx(f.Bw,{children:o.map(e=>t.jsx(f.Ql,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),t.jsx("span",{children:e.name})]})},e.id))})]})]}),(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.2},className:"space-y-2",children:[t.jsx(p._,{htmlFor:"description",className:"form-label",children:"Description"}),t.jsx(u.g,{id:"description",placeholder:"Enter transaction description...",value:E.description,onChange:e=>A("description",e.target.value),className:"form-input",rows:3})]}),(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.3},className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"merchant",className:"form-label",children:"Merchant"}),t.jsx(h.I,{id:"merchant",placeholder:"Merchant name",value:E.merchant,onChange:e=>A("merchant",e.target.value),className:"form-input"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{className:"form-label",children:"Date"}),(0,t.jsxs)(y.J2,{children:[t.jsx(y.xo,{asChild:!0,children:(0,t.jsxs)(n.z,{variant:"outline",className:(0,w.cn)("w-full justify-start text-left font-normal form-input",!k&&"text-slate-500"),children:[t.jsx(N.Z,{className:"mr-2 h-4 w-4"}),k?(0,b.WU)(k,"PPP"):t.jsx("span",{children:"Pick a date"})]})}),t.jsx(y.yk,{className:"w-auto p-0",align:"start",children:t.jsx(g.f,{mode:"single",selected:k,onSelect:e=>e&&C(e),initialFocus:!0})})]})]})]}),(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"accountNumber",className:"form-label",children:"Account Number"}),t.jsx(h.I,{id:"accountNumber",placeholder:"Last 4 digits",value:E.accountNumber,onChange:e=>A("accountNumber",e.target.value),className:"form-input"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"transactionId",className:"form-label",children:"Transaction ID"}),t.jsx(h.I,{id:"transactionId",placeholder:"Transaction reference",value:E.transactionId,onChange:e=>A("transactionId",e.target.value),className:"form-input"})]})]}),(0,t.jsxs)(j.cN,{className:"gap-2",children:[t.jsx(n.z,{type:"button",variant:"outline",onClick:()=>a(!1),disabled:m,className:"professional-button-secondary",children:"Cancel"}),(0,t.jsxs)(n.z,{type:"submit",disabled:m,className:"bg-professional-blue hover:bg-professional-blue-dark text-white",children:[m&&t.jsx(v,{className:"mr-2 h-4 w-4 animate-spin"}),i?"Update Transaction":"Add Transaction"]})]})]})]})})}var C=s(391),E=s(4857),M=s(9982);let T=(0,o.Z)("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Z=(0,o.Z)("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),I=(0,o.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);var A=s(9197);let O=(0,o.Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),P=(0,o.Z)("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]);function R({open:e,onOpenChange:a,onTransactionAdded:s}){let c;let[o,d]=(0,l.useState)([]),[m,x]=(0,l.useState)(""),[h,g]=(0,l.useState)(null),[y,b]=(0,l.useState)(!1),[w,k]=(0,l.useState)(!1),[R,z]=(0,l.useState)("input"),{toast:D}=(0,S.pm)(),_=async()=>{if(!m.trim()){D({title:"Error",description:"Please enter SMS or email text to parse",variant:"destructive"});return}b(!0);try{let e=await fetch("/api/transactions/parse",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messageText:m.trim()})});if(e.ok){let a=await e.json();g(a),z("review")}else{let a=await e.json();D({title:"Parsing Failed",description:a.error||"Could not parse the transaction from the provided text",variant:"destructive"})}}catch(e){D({title:"Error",description:"Failed to parse transaction",variant:"destructive"})}finally{b(!1)}},F=async()=>{if(h){k(!0);try{if((await fetch("/api/transactions",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:h.amount,type:h.type,description:h.description,merchant:h.merchant,categoryId:h.categoryId,accountNumber:h.accountNumber,transactionId:h.transactionId,date:h.date,balance:h.balance,status:h.status,source:m.toLowerCase().includes("@")?"EMAIL":"SMS",rawMessage:h.rawMessage})})).ok)s(),a(!1);else throw Error("Failed to save transaction")}catch(e){D({title:"Error",description:"Failed to save transaction",variant:"destructive"})}finally{k(!1)}}};return t.jsx(j.Vq,{open:e,onOpenChange:a,children:(0,t.jsxs)(j.cZ,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[(0,t.jsxs)(j.fK,{children:[(0,t.jsxs)(j.$N,{className:"flex items-center",children:[t.jsx(T,{className:"mr-2 h-5 w-5 text-purple-600"}),"Parse SMS/Email Transaction"]}),t.jsx(j.Be,{children:"Paste your bank SMS or email text below to automatically extract transaction details."})]}),"input"===R&&(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"messageText",children:"SMS/Email Text"}),t.jsx(u.g,{id:"messageText",placeholder:"Paste your bank SMS or email text here...",value:m,onChange:e=>x(e.target.value),rows:6,className:"resize-none"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[t.jsx(p._,{className:"text-sm font-medium",children:"Sample Messages (click to use):"}),t.jsx("div",{className:"space-y-2",children:["HDFC Bank Alert: Rs. 500.00 debited from your A/c ending 1234 on 01-05-2025 14:30. Txn ID: 1234567890. Status: Success.","PhonePe Alert: Rs. 250 debited from your bank account ending 4321 on 01-05-2025 14:30. Txn ID: 1122334455. Status: Success.","INR 2000 debited from A/c no. XX3423 on 05-02-19 07:27:11 IST at ECS PAY. Avl Bal- INR 2343.23."].map((e,a)=>t.jsx(C.Zb,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>x(e),children:t.jsx(C.aY,{className:"p-3",children:t.jsx("p",{className:"text-xs text-muted-foreground font-mono leading-relaxed",children:e})})},a))})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[t.jsx(Z,{className:"h-4 w-4"}),t.jsx("span",{children:"SMS"})]}),t.jsx("span",{children:"•"}),(0,t.jsxs)("div",{className:"flex items-center space-x-1",children:[t.jsx(I,{className:"h-4 w-4"}),t.jsx("span",{children:"Email"})]}),t.jsx("span",{children:"•"}),t.jsx("span",{children:"Supports major Indian banks & UPI platforms"})]})]}),"review"===R&&h&&(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(A.Z,{className:"h-5 w-5 text-green-600"}),t.jsx("span",{className:"font-medium",children:"Transaction Parsed Successfully"})]}),(0,t.jsxs)(C.Zb,{children:[t.jsx(C.Ol,{children:t.jsx(C.ll,{className:"text-lg",children:"Transaction Details"})}),(0,t.jsxs)(C.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{className:"text-sm font-medium text-muted-foreground",children:"Amount"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(i.Z,{className:"h-4 w-4 text-blue-600"}),t.jsx("span",{className:"text-lg font-semibold",children:(c=h.amount,new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0}).format(c))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{className:"text-sm font-medium text-muted-foreground",children:"Type"}),t.jsx(E.C,{className:(e=>{switch(e){case"INCOME":return"bg-green-100 text-green-800";case"EXPENSE":return"bg-red-100 text-red-800";case"TRANSFER":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}})(h.type),children:h.type})]})]}),t.jsx(M.Z,{}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{className:"text-sm font-medium text-muted-foreground",children:"Date"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(N.Z,{className:"h-4 w-4 text-gray-600"}),t.jsx("span",{children:new Date(h.date).toLocaleDateString("en-IN",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{className:"text-sm font-medium text-muted-foreground",children:"Status"}),t.jsx(E.C,{variant:"outline",className:"bg-green-50 text-green-700",children:h.status})]})]}),(h.merchant||h.description)&&(0,t.jsxs)(t.Fragment,{children:[t.jsx(M.Z,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{className:"text-sm font-medium text-muted-foreground",children:"Description"}),t.jsx("p",{className:"text-sm",children:h.description||h.merchant})]})]}),(h.accountNumber||h.transactionId||h.platform)&&(0,t.jsxs)(t.Fragment,{children:[t.jsx(M.Z,{}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[h.accountNumber&&(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{className:"text-sm font-medium text-muted-foreground",children:"Account"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(O,{className:"h-4 w-4 text-gray-600"}),(0,t.jsxs)("span",{className:"text-sm",children:["****",h.accountNumber]})]})]}),h.transactionId&&(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{className:"text-sm font-medium text-muted-foreground",children:"Txn ID"}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx(P,{className:"h-4 w-4 text-gray-600"}),t.jsx("span",{className:"text-sm font-mono",children:h.transactionId})]})]}),h.platform&&(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{className:"text-sm font-medium text-muted-foreground",children:"Platform"}),t.jsx(E.C,{variant:"outline",children:h.platform})]})]})]}),t.jsx(M.Z,{}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(p._,{htmlFor:"category",children:"Category"}),(0,t.jsxs)(f.Ph,{value:h.categoryId,onValueChange:e=>{if(h){let a=o.find(a=>a.id===e);g({...h,categoryId:e,suggestedCategory:a?.name||"Others"})}},children:[t.jsx(f.i4,{children:t.jsx(f.ki,{})}),t.jsx(f.Bw,{children:o.map(e=>t.jsx(f.Ql,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),t.jsx("span",{children:e.name}),e.name===h.suggestedCategory&&t.jsx(E.C,{variant:"secondary",className:"ml-2 text-xs",children:"Suggested"})]})},e.id))})]})]})]})]})]}),(0,t.jsxs)(j.cN,{children:["input"===R&&(0,t.jsxs)(t.Fragment,{children:[t.jsx(n.z,{type:"button",variant:"outline",onClick:()=>a(!1),disabled:y,children:"Cancel"}),(0,t.jsxs)(n.z,{onClick:_,disabled:y||!m.trim(),children:[y&&t.jsx(v,{className:"mr-2 h-4 w-4 animate-spin"}),"Parse Transaction"]})]}),"review"===R&&(0,t.jsxs)(t.Fragment,{children:[t.jsx(n.z,{type:"button",variant:"outline",onClick:()=>z("input"),disabled:w,children:"Back"}),(0,t.jsxs)(n.z,{onClick:F,disabled:w,children:[w&&t.jsx(v,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Transaction"]})]})]})]})})}var z=s(6701);let D=(0,o.Z)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]),_=(0,o.Z)("CalendarRange",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M17 14h-6",key:"bkmgh3"}],["path",{d:"M13 18H7",key:"bb0bb7"}],["path",{d:"M7 14h.01",key:"1qa3f1"}],["path",{d:"M17 18h.01",key:"1bdyru"}]]);var F=s(2051),$=s(5960);function U({view:e,onViewChange:a,year:s,onYearChange:l,month:r,onMonthChange:i}){let c=new Date().getFullYear(),o=new Date().getMonth()+1,d=[{value:1,label:"January"},{value:2,label:"February"},{value:3,label:"March"},{value:4,label:"April"},{value:5,label:"May"},{value:6,label:"June"},{value:7,label:"July"},{value:8,label:"August"},{value:9,label:"September"},{value:10,label:"October"},{value:11,label:"November"},{value:12,label:"December"}],m=Array.from({length:10},(e,a)=>c-a);return t.jsx(C.Zb,{className:"professional-card",children:t.jsx(C.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(N.Z,{className:"h-5 w-5 text-professional-blue"}),t.jsx("span",{className:"font-medium text-slate-900",children:"View:"})]}),t.jsx(z.mQ,{value:e,onValueChange:e=>a(e),children:(0,t.jsxs)(z.dr,{className:"grid w-full grid-cols-2",children:[(0,t.jsxs)(z.SP,{value:"monthly",className:"flex items-center gap-2",children:[t.jsx(D,{className:"h-4 w-4"}),"Monthly"]}),(0,t.jsxs)(z.SP,{value:"yearly",className:"flex items-center gap-2",children:[t.jsx(_,{className:"h-4 w-4"}),"Yearly"]})]})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["monthly"===e&&(0,t.jsxs)(f.Ph,{value:r?.toString(),onValueChange:e=>i(parseInt(e)),children:[t.jsx(f.i4,{className:"w-[140px] form-input",children:t.jsx(f.ki,{placeholder:"Month"})}),t.jsx(f.Bw,{children:d.map(e=>t.jsx(f.Ql,{value:e.value.toString(),children:e.label},e.value))})]}),(0,t.jsxs)(f.Ph,{value:s.toString(),onValueChange:e=>l(parseInt(e)),children:[t.jsx(f.i4,{className:"w-[100px] form-input",children:t.jsx(f.ki,{placeholder:"Year"})}),t.jsx(f.Bw,{children:m.map(e=>t.jsx(f.Ql,{value:e.toString(),children:e},e))})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[t.jsx(n.z,{onClick:()=>{"monthly"===e?1===r?(i(12),l(s-1)):i((r||1)-1):l(s-1)},variant:"outline",size:"sm",className:"border-slate-300 text-slate-600 hover:bg-slate-50",children:t.jsx(F.Z,{className:"h-4 w-4"})}),t.jsx("div",{className:"px-4 py-2 bg-slate-100 rounded-md text-sm font-medium text-slate-900 min-w-[120px] text-center",children:"monthly"===e&&r?`${d.find(e=>e.value===r)?.label} ${s}`:s.toString()}),t.jsx(n.z,{onClick:()=>{"monthly"===e?12===r?(i(1),l(s+1)):i((r||1)+1):l(s+1)},variant:"outline",size:"sm",disabled:!("monthly"===e?!(s===c&&(r||1)>=o):s<c),className:"border-slate-300 text-slate-600 hover:bg-slate-50 disabled:opacity-50",children:t.jsx($.Z,{className:"h-4 w-4"})})]})]})]})})})}var L=s(525),Y=s(1203),B=s(3537);let V=(0,o.Z)("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);var q=s(4604);let Q=(0,o.Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);var X=s(7403);function G({year:e,month:a,view:s}){let[n,i]=(0,l.useState)(null),[c,o]=(0,l.useState)(!0);if(c)return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsxs)(C.Zb,{className:"professional-card",children:[(0,t.jsxs)(C.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(L.O,{className:"h-4 w-24"}),t.jsx(L.O,{className:"h-8 w-8 rounded-lg"})]}),(0,t.jsxs)(C.aY,{children:[t.jsx(L.O,{className:"h-8 w-32"}),t.jsx(L.O,{className:"h-4 w-20 mt-2"})]})]},a))});if(!n)return t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-slate-600",children:"Failed to load summary data"})});let d=[{title:"Total Income",value:n.totalIncome,count:n.incomeTransactions,icon:Y.Z,color:"emerald",bgColor:"bg-emerald-100",textColor:"text-emerald-600",trend:"positive"},{title:"Total Expenses",value:n.totalExpense,count:n.expenseTransactions,icon:B.Z,color:"red",bgColor:"bg-red-100",textColor:"text-red-600",trend:"negative"},{title:"Net Balance",value:Math.abs(n.netBalance),count:null,icon:n.netBalance>=0?V:q.Z,color:n.netBalance>=0?"emerald":"red",bgColor:n.netBalance>=0?"bg-emerald-100":"bg-red-100",textColor:n.netBalance>=0?"text-emerald-600":"text-red-600",trend:n.netBalance>=0?"positive":"negative"},{title:"Total Transactions",value:n.totalTransactions,count:null,icon:Q,color:"blue",bgColor:"bg-blue-100",textColor:"text-professional-blue",trend:"neutral"}];return(0,t.jsxs)("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex items-center justify-between",children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-professional-blue to-professional-blue-light rounded-lg",children:t.jsx(N.Z,{className:"h-5 w-5 text-white"})}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("h2",{className:"text-xl font-semibold text-slate-900",children:["monthly"===s&&a?`${["January","February","March","April","May","June","July","August","September","October","November","December"][a-1]} ${e}`:`Year ${e}`," Summary"]}),t.jsx("p",{className:"text-sm text-slate-600",children:"Financial overview for the selected period"})]})]})}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map((e,a)=>t.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1*a},children:(0,t.jsxs)(C.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(C.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(C.ll,{className:"text-sm font-medium text-slate-600",children:e.title}),t.jsx("div",{className:`p-2 ${e.bgColor} rounded-lg`,children:t.jsx(e.icon,{className:`h-4 w-4 ${e.textColor}`})})]}),(0,t.jsxs)(C.aY,{children:[t.jsx("div",{className:`text-2xl font-bold ${e.textColor}`,children:"Total Transactions"===e.title?e.value.toLocaleString():(0,X.xG)(e.value)}),null!==e.count&&(0,t.jsxs)("p",{className:"text-xs text-slate-600 mt-1",children:[e.count," transaction",1!==e.count?"s":""]}),"Net Balance"===e.title&&t.jsx("p",{className:"text-xs text-slate-600 mt-1",children:n.netBalance>=0?"Surplus":"Deficit"})]})]})},e.title))})]})}var J=s(1577),W=s(8175),H=s(4906);let K=(0,J.default)(async()=>{},{loadableGenerated:{modules:["components/transaction-charts.tsx -> react-chartjs-2"]},ssr:!1,loading:()=>t.jsx(ea,{})}),ee=(0,J.default)(async()=>{},{loadableGenerated:{modules:["components/transaction-charts.tsx -> react-chartjs-2"]},ssr:!1,loading:()=>t.jsx(ea,{})});function ea(){return t.jsx("div",{className:"h-[300px] w-full flex items-center justify-center",children:t.jsx(L.O,{className:"h-full w-full rounded-lg"})})}function es({year:e,month:a}){let[s,r]=(0,l.useState)([]),[n,i]=(0,l.useState)([]),[c,o]=(0,l.useState)(!0),d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],m={labels:s.map(e=>d[e.month-1]),datasets:[{label:"Income",data:s.map(e=>parseFloat(e.income.toString())),borderColor:"rgb(16, 185, 129)",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.4,fill:!0},{label:"Expenses",data:s.map(e=>parseFloat(e.expense.toString())),borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.4,fill:!0}]},x={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!0,text:`${a?`Monthly Trends for ${d[a-1]} ${e}`:`Monthly Trends for ${e}`}`},tooltip:{callbacks:{label:function(e){return`${e.dataset.label}: ${(0,X.xG)(e.parsed.y)}`}}}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return(0,X.xG)(e)}}}}},h=n.filter(e=>"EXPENSE"===e.transaction_type),p=n.filter(e=>"INCOME"===e.transaction_type),u={labels:h.map(e=>e.category_name),datasets:[{data:h.map(e=>parseFloat(e.total_amount.toString())),backgroundColor:h.map(e=>e.category_color||"#3B82F6"),borderWidth:2,borderColor:"#ffffff"}]},f={labels:p.map(e=>e.category_name),datasets:[{data:p.map(e=>parseFloat(e.total_amount.toString())),backgroundColor:p.map(e=>e.category_color||"#10B981"),borderWidth:2,borderColor:"#ffffff"}]},j={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}},tooltip:{callbacks:{label:function(e){let a=e.dataset.data.reduce((e,a)=>e+a,0),s=(e.parsed/a*100).toFixed(1);return`${e.label}: ${(0,X.xG)(e.parsed)} (${s}%)`}}}}};return c?(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(C.Zb,{className:"professional-card",children:[t.jsx(C.Ol,{children:t.jsx(L.O,{className:"h-6 w-48"})}),t.jsx(C.aY,{children:t.jsx(ea,{})})]}),(0,t.jsxs)(C.Zb,{className:"professional-card",children:[t.jsx(C.Ol,{children:t.jsx(L.O,{className:"h-6 w-48"})}),t.jsx(C.aY,{children:t.jsx(ea,{})})]})]}):(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,t.jsxs)(C.Zb,{className:"professional-card hover-shadow",children:[t.jsx(C.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:(0,t.jsxs)(C.ll,{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(Y.Z,{className:"h-4 w-4 text-professional-blue"})}),"Income vs Expenses"]})}),t.jsx(C.aY,{children:t.jsx("div",{className:"h-[300px]",children:s.length>0?t.jsx(K,{data:m,options:x}):t.jsx("div",{className:"h-full flex items-center justify-center text-slate-500",children:"No data available for the selected period"})})})]}),(0,t.jsxs)(C.Zb,{className:"professional-card hover-shadow",children:[t.jsx(C.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:(0,t.jsxs)(C.ll,{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[t.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:t.jsx(W.Z,{className:"h-4 w-4 text-red-600"})}),"Expense Categories"]})}),t.jsx(C.aY,{children:t.jsx("div",{className:"h-[300px]",children:h.length>0?t.jsx(ee,{data:u,options:j}):t.jsx("div",{className:"h-full flex items-center justify-center text-slate-500",children:"No expense data available for the selected period"})})})]}),p.length>0&&(0,t.jsxs)(C.Zb,{className:"professional-card hover-shadow lg:col-span-2",children:[t.jsx(C.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-4",children:(0,t.jsxs)(C.ll,{className:"text-lg font-semibold text-slate-900 flex items-center gap-2",children:[t.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:t.jsx(W.Z,{className:"h-4 w-4 text-emerald-600"})}),"Income Categories"]})}),t.jsx(C.aY,{children:t.jsx("div",{className:"h-[300px]",children:t.jsx(ee,{data:f,options:j})})})]})]})}H.kL.register(H.uw,H.f$,H.od,H.jn,H.Dx,H.u,H.De,H.qi);var et=s(7595);let el=(0,o.Z)("ArrowUpNarrowWide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),er=(0,o.Z)("ArrowDownWideNarrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]);function en({searchTerm:e,onSearchChange:a,selectedCategory:s,onCategoryChange:r,selectedType:i,onTypeChange:c,dateRange:o,onDateRangeChange:m,sortBy:x,onSortChange:p,sortOrder:u,onSortOrderChange:j,categories:v,onClearFilters:w}){let[S,k]=(0,l.useState)(!1),M=e||"all"!==s||"all"!==i||o.from||o.to,T=(e,a)=>{"from"===a?m({...o,from:e}):m({...o,to:e})},Z=()=>{m({from:void 0,to:void 0})};return t.jsx(C.Zb,{className:"professional-card",children:t.jsx(C.aY,{className:"p-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[t.jsx(d,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),t.jsx(h.I,{placeholder:"Search transactions, merchants, descriptions...",value:e,onChange:e=>a(e.target.value),className:"pl-10 form-input"})]}),M&&(0,t.jsxs)(n.z,{onClick:w,variant:"outline",className:"border-slate-300 text-slate-600 hover:bg-slate-50",children:[t.jsx(et.Z,{className:"h-4 w-4 mr-2"}),"Clear Filters"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,t.jsxs)(f.Ph,{value:s,onValueChange:r,children:[t.jsx(f.i4,{className:"form-input",children:t.jsx(f.ki,{placeholder:"Category"})}),(0,t.jsxs)(f.Bw,{children:[t.jsx(f.Ql,{value:"all",children:"All Categories"}),v.map(e=>t.jsx(f.Ql,{value:e.id,children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),t.jsx("span",{children:e.name})]})},e.id))]})]}),(0,t.jsxs)(f.Ph,{value:i,onValueChange:c,children:[t.jsx(f.i4,{className:"form-input",children:t.jsx(f.ki,{placeholder:"Type"})}),(0,t.jsxs)(f.Bw,{children:[t.jsx(f.Ql,{value:"all",children:"All Types"}),t.jsx(f.Ql,{value:"INCOME",children:"Income"}),t.jsx(f.Ql,{value:"EXPENSE",children:"Expense"}),t.jsx(f.Ql,{value:"TRANSFER",children:"Transfer"})]})]}),(0,t.jsxs)(y.J2,{open:S,onOpenChange:k,children:[t.jsx(y.xo,{asChild:!0,children:(0,t.jsxs)(n.z,{variant:"outline",className:"form-input justify-start text-left font-normal",children:[t.jsx(N.Z,{className:"mr-2 h-4 w-4"}),o.from?o.to?(0,t.jsxs)(t.Fragment,{children:[(0,b.WU)(o.from,"MMM dd")," - ",(0,b.WU)(o.to,"MMM dd")]}):(0,b.WU)(o.from,"MMM dd, yyyy"):t.jsx("span",{children:"Date range"})]})}),t.jsx(y.yk,{className:"w-auto p-0",align:"start",children:(0,t.jsxs)("div",{className:"p-4 space-y-4",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[t.jsx("h4",{className:"font-semibold",children:"Select Date Range"}),(o.from||o.to)&&t.jsx(n.z,{onClick:Z,variant:"ghost",size:"sm",className:"h-auto p-1",children:t.jsx(et.Z,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-600 mb-2 block",children:"From"}),t.jsx(g.f,{mode:"single",selected:o.from,onSelect:e=>T(e,"from"),disabled:e=>e>new Date||!!o.to&&e>o.to,initialFocus:!0})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium text-slate-600 mb-2 block",children:"To"}),t.jsx(g.f,{mode:"single",selected:o.to,onSelect:e=>T(e,"to"),disabled:e=>e>new Date||!!o.from&&e<o.from})]})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx(n.z,{onClick:()=>k(!1),size:"sm",children:"Done"})})]})})]}),(0,t.jsxs)(f.Ph,{value:x,onValueChange:p,children:[t.jsx(f.i4,{className:"form-input",children:t.jsx(f.ki,{placeholder:"Sort by"})}),(0,t.jsxs)(f.Bw,{children:[t.jsx(f.Ql,{value:"date",children:"Date"}),t.jsx(f.Ql,{value:"amount",children:"Amount"}),t.jsx(f.Ql,{value:"description",children:"Description"}),t.jsx(f.Ql,{value:"category",children:"Category"}),t.jsx(f.Ql,{value:"merchant",children:"Merchant"})]})]}),(0,t.jsxs)(n.z,{onClick:()=>j("asc"===u?"desc":"asc"),variant:"outline",className:"form-input justify-center",children:["asc"===u?t.jsx(el,{className:"h-4 w-4 mr-2"}):t.jsx(er,{className:"h-4 w-4 mr-2"}),"asc"===u?"Ascending":"Descending"]})]}),M&&(0,t.jsxs)("div",{className:"flex flex-wrap gap-2",children:[t.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Active filters:"}),e&&(0,t.jsxs)(E.C,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:["Search: ",e,t.jsx(et.Z,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>a("")})]}),"all"!==s&&(0,t.jsxs)(E.C,{variant:"secondary",className:"bg-purple-100 text-purple-800",children:["Category: ",v.find(e=>e.id===s)?.name,t.jsx(et.Z,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>r("all")})]}),"all"!==i&&(0,t.jsxs)(E.C,{variant:"secondary",className:"bg-green-100 text-green-800",children:["Type: ",i,t.jsx(et.Z,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:()=>c("all")})]}),(o.from||o.to)&&(0,t.jsxs)(E.C,{variant:"secondary",className:"bg-orange-100 text-orange-800",children:["Date: ",o.from?(0,b.WU)(o.from,"MMM dd"):"Start"," - ",o.to?(0,b.WU)(o.to,"MMM dd"):"End",t.jsx(et.Z,{className:"h-3 w-3 ml-1 cursor-pointer",onClick:Z})]})]})]})})})}var ei=s(3254);function ec(){let e=(0,l.useRef)(!1);return(0,ei.L)(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var eo=s(9302),ed=s(1242),em=s(2924);class ex extends l.Component{getSnapshotBeforeUpdate(e){let a=this.props.childRef.current;if(a&&e.isPresent&&!this.props.isPresent){let e=this.props.sizeRef.current;e.height=a.offsetHeight||0,e.width=a.offsetWidth||0,e.top=a.offsetTop,e.left=a.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function eh({children:e,isPresent:a}){let s=(0,l.useId)(),t=(0,l.useRef)(null),r=(0,l.useRef)({width:0,height:0,top:0,left:0});return(0,l.useInsertionEffect)(()=>{let{width:e,height:l,top:n,left:i}=r.current;if(a||!t.current||!e||!l)return;t.current.dataset.motionPopId=s;let c=document.createElement("style");return document.head.appendChild(c),c.sheet&&c.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${l}px !important;
            top: ${n}px !important;
            left: ${i}px !important;
          }
        `),()=>{document.head.removeChild(c)}},[a]),l.createElement(ex,{isPresent:a,childRef:t,sizeRef:r},l.cloneElement(e,{ref:t}))}let ep=({children:e,initial:a,isPresent:s,onExitComplete:t,custom:r,presenceAffectsLayout:n,mode:i})=>{let c=(0,em.h)(eu),o=(0,l.useId)(),d=(0,l.useMemo)(()=>({id:o,initial:a,isPresent:s,custom:r,onExitComplete:e=>{for(let a of(c.set(e,!0),c.values()))if(!a)return;t&&t()},register:e=>(c.set(e,!1),()=>c.delete(e))}),n?void 0:[s]);return(0,l.useMemo)(()=>{c.forEach((e,a)=>c.set(a,!1))},[s]),l.useEffect(()=>{s||c.size||!t||t()},[s]),"popLayout"===i&&(e=l.createElement(eh,{isPresent:s},e)),l.createElement(ed.O.Provider,{value:d},e)};function eu(){return new Map}var ef=s(4052),ej=s(6600);let eg=e=>e.key||"",ey=({children:e,custom:a,initial:s=!0,onExitComplete:t,exitBeforeEnter:r,presenceAffectsLayout:n=!0,mode:i="sync"})=>{var c;(0,ej.k)(!r,"Replace exitBeforeEnter with mode='wait'");let o=(0,l.useContext)(ef.p).forceRender||function(){let e=ec(),[a,s]=(0,l.useState)(0),t=(0,l.useCallback)(()=>{e.current&&s(a+1)},[a]);return[(0,l.useCallback)(()=>eo.Wi.postRender(t),[t]),a]}()[0],d=ec(),m=function(e){let a=[];return l.Children.forEach(e,e=>{(0,l.isValidElement)(e)&&a.push(e)}),a}(e),x=m,h=(0,l.useRef)(new Map).current,p=(0,l.useRef)(x),u=(0,l.useRef)(new Map).current,f=(0,l.useRef)(!0);if((0,ei.L)(()=>{f.current=!1,function(e,a){e.forEach(e=>{let s=eg(e);a.set(s,e)})}(m,u),p.current=x}),c=()=>{f.current=!0,u.clear(),h.clear()},(0,l.useEffect)(()=>()=>c(),[]),f.current)return l.createElement(l.Fragment,null,x.map(e=>l.createElement(ep,{key:eg(e),isPresent:!0,initial:!!s&&void 0,presenceAffectsLayout:n,mode:i},e)));x=[...x];let j=p.current.map(eg),g=m.map(eg),y=j.length;for(let e=0;e<y;e++){let a=j[e];-1!==g.indexOf(a)||h.has(a)||h.set(a,void 0)}return"wait"===i&&h.size&&(x=[]),h.forEach((e,s)=>{if(-1!==g.indexOf(s))return;let r=u.get(s);if(!r)return;let c=j.indexOf(s),f=e;f||(f=l.createElement(ep,{key:eg(r),isPresent:!1,onExitComplete:()=>{h.delete(s);let e=Array.from(u.keys()).filter(e=>!g.includes(e));if(e.forEach(e=>u.delete(e)),p.current=m.filter(a=>{let t=eg(a);return t===s||e.includes(t)}),!h.size){if(!1===d.current)return;o(),t&&t()}},custom:a,presenceAffectsLayout:n,mode:i},r),h.set(s,f)),x.splice(c,0,f)}),x=x.map(e=>{let a=e.key;return h.has(a)?e:l.createElement(ep,{key:eg(e),isPresent:!0,presenceAffectsLayout:n,mode:i},e)}),l.createElement(l.Fragment,null,h.size?x:x.map(e=>(0,l.cloneElement)(e)))};var eN=s(8573),ev=s(4810),eb=s(8495),ew=s(7846),eS=s(8469),ek=s(8577);let eC=(0,o.Z)("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);var eE=s(1788);let eM=(0,o.Z)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),eT=(0,o.Z)("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]),eZ=(0,o.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var eI=s(7311),eA=s(6157),eO=s(4714),eP=s(907);function eR({open:e,onOpenChange:a,transactionId:s,onTransactionUpdated:c}){let[o,d]=(0,l.useState)(null),[m,x]=(0,l.useState)(!1),[h,p]=(0,l.useState)(!1),[u,f]=(0,l.useState)(!1),g=async()=>{if(s)try{x(!0);let e=await fetch(`/api/transactions/${s}`);if(e.ok){let a=await e.json();d(a)}else eO.Am.error("Failed to fetch transaction details"),a(!1)}catch(e){console.error("Error fetching transaction details:",e),eO.Am.error("Failed to fetch transaction details"),a(!1)}finally{x(!1)}},y=async()=>{if(o)try{(await fetch(`/api/transactions/${o.id}`,{method:"DELETE"})).ok?(eO.Am.success("Transaction deleted successfully"),c(),a(!1)):eO.Am.error("Failed to delete transaction")}catch(e){console.error("Error deleting transaction:",e),eO.Am.error("Failed to delete transaction")}finally{f(!1)}},v=e=>{switch(e){case eA.iU.INCOME:return"Income";case eA.iU.EXPENSE:return"Expense";case eA.iU.TRANSFER:return"Transfer";default:return e}};return e?(0,t.jsxs)(t.Fragment,{children:[t.jsx(j.Vq,{open:e,onOpenChange:a,children:(0,t.jsxs)(j.cZ,{className:"sm:max-w-[700px] max-h-[90vh] overflow-hidden",children:[t.jsx(j.fK,{children:(0,t.jsxs)(j.$N,{className:"flex items-center gap-2",children:[t.jsx(i.Z,{className:"h-5 w-5 text-professional-blue"}),"Transaction Details"]})}),m?t.jsx("div",{className:"flex items-center justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-professional-blue"})}):o?t.jsx(ek.x,{className:"max-h-[calc(90vh-120px)]",children:(0,t.jsxs)("div",{className:"space-y-6 pr-4",children:[(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-3",children:[t.jsx("div",{className:"p-2 rounded-full bg-slate-100",children:(e=>{switch(e){case eA.iU.INCOME:return t.jsx(V,{className:"h-6 w-6 text-emerald-600"});case eA.iU.EXPENSE:return t.jsx(q.Z,{className:"h-6 w-6 text-red-600"});case eA.iU.TRANSFER:return t.jsx(eC,{className:"h-6 w-6 text-blue-600"});default:return t.jsx(i.Z,{className:"h-6 w-6 text-professional-blue"})}})(o.type)}),(0,t.jsxs)("div",{children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:o.description||"No description"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx(E.C,{className:"bg-blue-100 text-blue-800",children:v(o.type)}),o.category&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:o.category.color}}),t.jsx("span",{className:"text-sm text-gray-600",children:o.category.name})]})]})]})]}),t.jsx("div",{className:`text-3xl font-bold mb-2 ${(e=>{switch(e){case eA.iU.INCOME:return"text-emerald-600";case eA.iU.EXPENSE:return"text-red-600";case eA.iU.TRANSFER:return"text-blue-600";default:return"text-professional-blue"}})(o.type)}`,children:(e=>{let a=(0,X.xG)(e.amount);switch(e.type){case eA.iU.INCOME:return`+${a}`;case eA.iU.EXPENSE:return`-${a}`;default:return a}})(o)}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx(N.Z,{className:"w-4 h-4 mr-1"}),new Date(o.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[t.jsx(eE.Z,{className:"w-4 h-4 mr-1"}),new Date(o.date).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>p(!0),className:"text-professional-blue border-blue-200 hover:bg-blue-50",children:[t.jsx(ew.Z,{className:"w-4 h-4 mr-1"}),"Edit"]}),(0,t.jsxs)(n.z,{variant:"outline",size:"sm",onClick:()=>f(!0),className:"text-red-600 border-red-200 hover:bg-red-50",children:[t.jsx(eS.Z,{className:"w-4 h-4 mr-1"}),"Delete"]})]})]}),t.jsx(M.Z,{}),t.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:(0,t.jsxs)(C.Zb,{children:[t.jsx(C.Ol,{children:(0,t.jsxs)(C.ll,{className:"text-lg flex items-center gap-2",children:[t.jsx(eI.Z,{className:"h-5 w-5"}),"Transaction Information"]})}),(0,t.jsxs)(C.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Amount"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(0,X.xG)(o.amount)})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Type"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:v(o.type)})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Status"}),t.jsx("div",{className:"mt-1",children:(e=>{switch(e){case eA.LN.SUCCESS:return(0,t.jsxs)(E.C,{className:"bg-emerald-100 text-emerald-800",children:[t.jsx(A.Z,{className:"w-3 h-3 mr-1"}),"Success"]});case eA.LN.PENDING:return(0,t.jsxs)(E.C,{variant:"outline",className:"text-orange-600 border-orange-200",children:[t.jsx(eE.Z,{className:"w-3 h-3 mr-1"}),"Pending"]});case eA.LN.FAILED:return(0,t.jsxs)(E.C,{className:"bg-red-100 text-red-800",children:[t.jsx(eM,{className:"w-3 h-3 mr-1"}),"Failed"]});default:return t.jsx(E.C,{variant:"outline",children:e})}})(o.status)})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Source"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(e=>{switch(e){case eA.fS.SMS:return t.jsx(Z,{className:"w-4 h-4"});case eA.fS.EMAIL:return t.jsx(I,{className:"w-4 h-4"});case eA.fS.BANK_STATEMENT:return t.jsx(eT,{className:"w-4 h-4"});case eA.fS.MANUAL:return t.jsx(eZ,{className:"w-4 h-4"});default:return t.jsx(eI.Z,{className:"w-4 h-4"})}})(o.source),t.jsx("span",{className:"text-lg font-semibold text-gray-900",children:(e=>{switch(e){case eA.fS.SMS:return"SMS Import";case eA.fS.EMAIL:return"Email Import";case eA.fS.BANK_STATEMENT:return"Bank Statement";case eA.fS.MANUAL:return"Manual Entry";default:return e}})(o.source)})]})]})]}),o.merchant&&(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Merchant"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:o.merchant})]}),o.description&&(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Description"}),t.jsx("p",{className:"text-gray-900 mt-1",children:o.description})]})]})]})}),(o.accountNumber||o.transactionId||null!==o.balance)&&t.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:(0,t.jsxs)(C.Zb,{children:[t.jsx(C.Ol,{children:(0,t.jsxs)(C.ll,{className:"text-lg flex items-center gap-2",children:[t.jsx(P,{className:"h-5 w-5"}),"Technical Details"]})}),t.jsx(C.aY,{className:"space-y-4",children:(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[o.accountNumber&&(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Number"}),(0,t.jsxs)("p",{className:"text-lg font-semibold text-gray-900 font-mono",children:["****",o.accountNumber]})]}),o.transactionId&&(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Transaction ID"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900 font-mono",children:o.transactionId})]}),null!==o.balance&&void 0!==o.balance&&(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Account Balance"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(0,X.xG)(o.balance)})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-600",children:"Created"}),t.jsx("p",{className:"text-lg font-semibold text-gray-900",children:new Date(o.createdAt).toLocaleDateString()})]})]})})]})}),o.rawMessage&&t.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:(0,t.jsxs)(C.Zb,{children:[t.jsx(C.Ol,{children:(0,t.jsxs)(C.ll,{className:"text-lg flex items-center gap-2",children:[t.jsx(eI.Z,{className:"h-5 w-5"}),"Original Message"]})}),t.jsx(C.aY,{children:t.jsx("div",{className:"bg-gray-50 p-3 rounded-lg",children:t.jsx("p",{className:"text-sm text-gray-700 font-mono whitespace-pre-wrap",children:o.rawMessage})})})]})})]})}):t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-gray-600",children:"Transaction not found"})})]})}),t.jsx(k,{open:h,onOpenChange:p,onTransactionAdded:()=>{p(!1),c(),g()},editingTransaction:o}),t.jsx(eP.aR,{open:u,onOpenChange:f,children:(0,t.jsxs)(eP._T,{children:[(0,t.jsxs)(eP.fY,{children:[t.jsx(eP.f$,{children:"Delete Transaction"}),t.jsx(eP.yT,{children:"Are you sure you want to delete this transaction? This action cannot be undone and will remove the transaction from all reports and calculations."})]}),(0,t.jsxs)(eP.xo,{children:[t.jsx(eP.le,{children:"Cancel"}),t.jsx(eP.OL,{onClick:y,className:"bg-red-600 hover:bg-red-700",children:"Delete Transaction"})]})]})})]}):null}function ez({year:e,month:a,searchTerm:s,selectedCategory:o,selectedType:d,dateRange:m,sortBy:x,sortOrder:h,onAddTransaction:p}){let[u,f]=(0,l.useState)([]),[j,g]=(0,l.useState)(!0),[y,b]=(0,l.useState)({page:1,limit:20,total:0,pages:0}),[w,M]=(0,l.useState)(!1),[T,Z]=(0,l.useState)(!1),[I,A]=(0,l.useState)(!1),[O,P]=(0,l.useState)(null),{toast:R}=(0,S.pm)(),z=async()=>{try{g(!0);let t=new URLSearchParams({page:y.page.toString(),limit:y.limit.toString(),sortBy:x,sortOrder:h});e&&t.append("year",e.toString()),a&&t.append("month",a.toString()),s&&t.append("search",s),"all"!==o&&t.append("categoryId",o),"all"!==d&&t.append("type",d),m.from&&t.append("startDate",m.from.toISOString()),m.to&&t.append("endDate",m.to.toISOString());let l=await fetch(`/api/transactions?${t}`);if(l.ok){let e=await l.json();f(e.transactions||[]),b(a=>({...a,total:e.pagination.total,pages:e.pagination.pages}))}else console.error("Failed to fetch transactions:",l.status),R({title:"Error",description:"Failed to load transactions",variant:"destructive"})}catch(e){console.error("Error fetching transactions:",e),R({title:"Error",description:"Failed to load transactions",variant:"destructive"})}finally{g(!1)}},D=e=>{b(a=>({...a,page:e}))},_=e=>{P(e),M(!0)},U=e=>{P(e),Z(!0)},Y=e=>{P(e),A(!0)},B=async()=>{if(O)try{(await fetch(`/api/transactions/${O.id}`,{method:"DELETE"})).ok?(R({title:"Success",description:"Transaction deleted successfully"}),z()):R({title:"Error",description:"Failed to delete transaction",variant:"destructive"})}catch(e){console.error("Error deleting transaction:",e),R({title:"Error",description:"Failed to delete transaction",variant:"destructive"})}finally{A(!1),P(null)}},G=()=>{z(),P(null)},J=e=>{switch(e){case"INCOME":return t.jsx(V,{className:"h-4 w-4 text-emerald-600"});case"EXPENSE":return t.jsx(q.Z,{className:"h-4 w-4 text-red-600"});default:return t.jsx(i.Z,{className:"h-4 w-4 text-professional-blue"})}},W=e=>{switch(e){case"INCOME":return"text-emerald-600";case"EXPENSE":return"text-red-600";default:return"text-professional-blue"}},H=e=>{let a=(0,X.xG)(e.amount);return"INCOME"===e.type?`+${a}`:`-${a}`},K=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),ee=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return j&&1===y.page?(0,t.jsxs)(C.Zb,{className:"professional-card",children:[t.jsx(C.Ol,{children:t.jsx(L.O,{className:"h-6 w-48"})}),t.jsx(C.aY,{children:t.jsx("div",{className:"space-y-4",children:[void 0,void 0,void 0,void 0,void 0].map((e,a)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-slate-200 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[t.jsx(L.O,{className:"h-10 w-10 rounded-full"}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(L.O,{className:"h-4 w-48"}),t.jsx(L.O,{className:"h-3 w-32"})]})]}),(0,t.jsxs)("div",{className:"text-right space-y-2",children:[t.jsx(L.O,{className:"h-5 w-24"}),t.jsx(L.O,{className:"h-4 w-16"})]})]},a))})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(C.Zb,{className:"professional-card",children:[(0,t.jsxs)(C.Ol,{className:"flex flex-row items-center justify-between space-y-0",children:[(0,t.jsxs)(C.ll,{className:"text-slate-900 flex items-center gap-2",children:[t.jsx(Q,{className:"h-5 w-5 text-professional-blue"}),"Transactions (",y.total.toLocaleString(),")"]}),j&&y.page>1&&t.jsx(v,{className:"h-4 w-4 animate-spin text-professional-blue"})]}),t.jsx(C.aY,{children:t.jsx("div",{className:"space-y-4",children:0===u.length?(0,t.jsxs)("div",{className:"text-center py-12",children:[t.jsx(i.Z,{className:"h-16 w-16 text-slate-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No transactions found"}),t.jsx("p",{className:"text-slate-600 mb-6",children:s||"all"!==o||"all"!==d||m.from||m.to?"Try adjusting your filters to see more results":"Start by adding your first transaction"}),(0,t.jsxs)(n.z,{onClick:p,className:"bg-professional-blue hover:bg-professional-blue-dark text-white",children:[t.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"Add Transaction"]})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(ey,{mode:"wait",children:t.jsx("div",{className:"space-y-3",children:u.map((e,a)=>(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.05*a},className:"group flex items-center justify-between p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition-all duration-200 hover-shadow cursor-pointer",onClick:()=>_(e),children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[t.jsx("div",{className:"p-2 rounded-full bg-slate-100 group-hover:bg-white transition-colors",children:J(e.type)}),t.jsx("div",{className:"flex-1 min-w-0",children:t.jsx("div",{className:"flex items-start justify-between",children:(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"font-semibold text-slate-900 truncate",children:e.description||"No description"}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 mt-1",children:[e.merchant&&t.jsx("span",{className:"text-sm text-slate-600 truncate",children:e.merchant}),e.category&&t.jsx(E.C,{variant:"secondary",className:"text-xs px-2 py-1",style:{backgroundColor:e.category.color+"20",color:e.category.color,border:`1px solid ${e.category.color}30`},children:e.category.name})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 mt-2 text-xs text-slate-500",children:[(0,t.jsxs)("span",{className:"flex items-center",children:[t.jsx(N.Z,{className:"h-3 w-3 mr-1"}),K(e.date)]}),t.jsx("span",{children:ee(e.date)}),e.transactionId&&(0,t.jsxs)("span",{className:"font-mono",children:["ID: ",e.transactionId.slice(-6)]})]})]})})})]}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsxs)("div",{className:"text-right",children:[t.jsx("div",{className:`text-lg font-bold ${W(e.type)}`,children:H(e)}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-2 mt-1",children:[t.jsx(E.C,{variant:"SUCCESS"===e.status?"default":"destructive",className:`text-xs ${"SUCCESS"===e.status?"bg-emerald-100 text-emerald-800 border-emerald-200":"bg-red-100 text-red-800 border-red-200"}`,children:e.status}),"MANUAL"!==e.source&&t.jsx(E.C,{variant:"outline",className:"text-xs",children:e.source})]})]}),(0,t.jsxs)(eN.h_,{children:[t.jsx(eN.$F,{asChild:!0,children:t.jsx(n.z,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0 opacity-0 group-hover:opacity-100 transition-opacity",onClick:e=>e.stopPropagation(),children:t.jsx(ev.Z,{className:"h-4 w-4"})})}),(0,t.jsxs)(eN.AW,{align:"end",className:"w-48",children:[(0,t.jsxs)(eN.Xi,{onClick:a=>{a.stopPropagation(),_(e)},className:"flex items-center gap-2",children:[t.jsx(eb.Z,{className:"h-4 w-4"}),"View Details"]}),(0,t.jsxs)(eN.Xi,{onClick:a=>{a.stopPropagation(),U(e)},className:"flex items-center gap-2",children:[t.jsx(ew.Z,{className:"h-4 w-4"}),"Edit Transaction"]}),(0,t.jsxs)(eN.Xi,{onClick:a=>{a.stopPropagation(),Y(e)},className:"flex items-center gap-2 text-red-600 focus:text-red-600",children:[t.jsx(eS.Z,{className:"h-4 w-4"}),"Delete Transaction"]})]})]})]})]},`${e.id}-${y.page}`))})}),y.pages>1&&(0,t.jsxs)("div",{className:"flex items-center justify-between pt-6 border-t border-slate-200",children:[(0,t.jsxs)("div",{className:"text-sm text-slate-600",children:["Showing ",(y.page-1)*y.limit+1," to"," ",Math.min(y.page*y.limit,y.total)," of"," ",y.total.toLocaleString()," transactions"]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)(n.z,{onClick:()=>D(y.page-1),disabled:1===y.page||j,variant:"outline",size:"sm",className:"border-slate-300 text-slate-600 hover:bg-slate-50",children:[t.jsx(F.Z,{className:"h-4 w-4 mr-1"}),"Previous"]}),t.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,y.pages)},(e,a)=>{let s;return s=y.pages<=5?a+1:y.page<=3?a+1:y.page>=y.pages-2?y.pages-4+a:y.page-2+a,t.jsx(n.z,{onClick:()=>D(s),disabled:j,variant:y.page===s?"default":"outline",size:"sm",className:`w-8 h-8 p-0 ${y.page===s?"bg-professional-blue text-white":"border-slate-300 text-slate-600 hover:bg-slate-50"}`,children:s},s)})}),(0,t.jsxs)(n.z,{onClick:()=>D(y.page+1),disabled:y.page===y.pages||j,variant:"outline",size:"sm",className:"border-slate-300 text-slate-600 hover:bg-slate-50",children:["Next",t.jsx($.Z,{className:"h-4 w-4 ml-1"})]})]})]})]})})})]}),t.jsx(eR,{open:w,onOpenChange:M,transactionId:O?.id||null,onTransactionUpdated:G}),t.jsx(k,{open:T,onOpenChange:Z,onTransactionAdded:G,editingTransaction:O}),t.jsx(eP.aR,{open:I,onOpenChange:A,children:(0,t.jsxs)(eP._T,{children:[(0,t.jsxs)(eP.fY,{children:[t.jsx(eP.f$,{children:"Delete Transaction"}),t.jsx(eP.yT,{children:"Are you sure you want to delete this transaction? This action cannot be undone and will remove the transaction from all reports and calculations."})]}),(0,t.jsxs)(eP.xo,{children:[t.jsx(eP.le,{onClick:()=>P(null),children:"Cancel"}),t.jsx(eP.OL,{onClick:B,className:"bg-red-600 hover:bg-red-700",children:"Delete Transaction"})]})]})})]})}function eD(){let[e,a]=(0,l.useState)("monthly"),[s,o]=(0,l.useState)(new Date().getFullYear()),[h,p]=(0,l.useState)(new Date().getMonth()+1),[u,f]=(0,l.useState)(""),[j,g]=(0,l.useState)("all"),[y,N]=(0,l.useState)("all"),[v,b]=(0,l.useState)({}),[w,C]=(0,l.useState)("date"),[E,M]=(0,l.useState)("desc"),[T,Z]=(0,l.useState)(!1),[I,A]=(0,l.useState)(!1),[O,P]=(0,l.useState)([]),[z,D]=(0,l.useState)(0),{toast:_}=(0,S.pm)(),F=()=>{D(e=>e+1),Z(!1),A(!1),_({title:"Success",description:"Transaction added successfully"})},$=async()=>{try{let a=new URLSearchParams;"monthly"===e&&h?(a.append("year",s.toString()),a.append("month",h.toString())):a.append("year",s.toString()),"all"!==j&&a.append("categoryId",j),"all"!==y&&a.append("type",y),u&&a.append("search",u),v.from&&a.append("startDate",v.from.toISOString()),v.to&&a.append("endDate",v.to.toISOString());let t=await fetch(`/api/transactions/export?${a}`);if(!t.ok)throw Error("Export failed");let l=await t.blob(),r=window.URL.createObjectURL(l),n=document.createElement("a");n.href=r;let i="monthly"===e&&h?`${s}-${h.toString().padStart(2,"0")}`:s.toString();n.download=`transactions-${i}.csv`,document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(r),document.body.removeChild(n),_({title:"Success",description:"Transactions exported successfully"})}catch(e){_({title:"Error",description:"Failed to export transactions",variant:"destructive"})}};return(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-professional-blue to-professional-blue-light rounded-lg",children:t.jsx(i.Z,{className:"h-6 w-6 text-white"})}),"Transaction Analytics"]}),t.jsx("p",{className:"text-slate-600 mt-1",children:"Comprehensive view of your financial transactions with insights and analytics"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(n.z,{onClick:()=>Z(!0),className:"bg-professional-blue hover:bg-professional-blue-dark text-white",children:[t.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"Add Transaction"]}),(0,t.jsxs)(n.z,{onClick:()=>A(!0),variant:"outline",className:"border-emerald-600 text-emerald-600 hover:bg-emerald-50",children:[t.jsx(d,{className:"h-4 w-4 mr-2"}),"Parse SMS"]}),(0,t.jsxs)(n.z,{onClick:$,variant:"outline",className:"border-slate-300 text-slate-600 hover:bg-slate-50",children:[t.jsx(m,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),t.jsx(U,{view:e,onViewChange:e=>{a(e),b({})},year:s,onYearChange:o,month:"monthly"===e?h:void 0,onMonthChange:p}),t.jsx(G,{year:s,month:"monthly"===e?h:void 0,view:e},`${e}-${s}-${h}-${z}`),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg",children:t.jsx(x.Z,{className:"h-5 w-5 text-white"})}),t.jsx("h2",{className:"text-xl font-semibold text-slate-900",children:"Financial Insights"})]}),t.jsx(es,{year:s,month:"monthly"===e?h:void 0},`charts-${e}-${s}-${h}-${z}`)]}),t.jsx(en,{searchTerm:u,onSearchChange:f,selectedCategory:j,onCategoryChange:g,selectedType:y,onTypeChange:N,dateRange:v,onDateRangeChange:b,sortBy:w,onSortChange:C,sortOrder:E,onSortOrderChange:M,categories:O,onClearFilters:()=>{f(""),g("all"),N("all"),b({}),C("date"),M("desc")}}),t.jsx(ez,{year:s,month:"monthly"===e?h:void 0,searchTerm:u,selectedCategory:j,selectedType:y,dateRange:v,sortBy:w,sortOrder:E,onAddTransaction:()=>Z(!0)},`list-${e}-${s}-${h}-${u}-${j}-${y}-${w}-${E}-${z}`)]}),t.jsx(k,{open:T,onOpenChange:Z,onTransactionAdded:F}),t.jsx(R,{open:I,onOpenChange:A,onTransactionAdded:F})]})}},907:(e,a,s)=>{"use strict";s.d(a,{OL:()=>f,_T:()=>m,aR:()=>c,f$:()=>p,fY:()=>x,le:()=>j,xo:()=>h,yT:()=>u});var t=s(4848),l=s(5642),r=s(9285),n=s(5709),i=s(8287);let c=r.fC;r.xz;let o=r.h_,d=l.forwardRef(({className:e,...a},s)=>t.jsx(r.aV,{className:(0,n.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...a,ref:s}));d.displayName=r.aV.displayName;let m=l.forwardRef(({className:e,...a},s)=>(0,t.jsxs)(o,{children:[t.jsx(d,{}),t.jsx(r.VY,{ref:s,className:(0,n.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a})]}));m.displayName=r.VY.displayName;let x=({className:e,...a})=>t.jsx("div",{className:(0,n.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...a});x.displayName="AlertDialogHeader";let h=({className:e,...a})=>t.jsx("div",{className:(0,n.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...a});h.displayName="AlertDialogFooter";let p=l.forwardRef(({className:e,...a},s)=>t.jsx(r.Dx,{ref:s,className:(0,n.cn)("text-lg font-semibold",e),...a}));p.displayName=r.Dx.displayName;let u=l.forwardRef(({className:e,...a},s)=>t.jsx(r.dk,{ref:s,className:(0,n.cn)("text-sm text-muted-foreground",e),...a}));u.displayName=r.dk.displayName;let f=l.forwardRef(({className:e,...a},s)=>t.jsx(r.aU,{ref:s,className:(0,n.cn)((0,i.d)(),e),...a}));f.displayName=r.aU.displayName;let j=l.forwardRef(({className:e,...a},s)=>t.jsx(r.$j,{ref:s,className:(0,n.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...a}));j.displayName=r.$j.displayName},6765:(e,a,s)=>{"use strict";s.d(a,{f:()=>o});var t=s(4848);s(5642);var l=s(2051),r=s(5960),n=s(1787),i=s(5709),c=s(8287);function o({className:e,classNames:a,showOutsideDays:s=!0,...o}){return t.jsx(n._W,{showOutsideDays:s,className:(0,i.cn)("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,c.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,c.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:({...e})=>t.jsx(l.Z,{className:"h-4 w-4"}),IconRight:({...e})=>t.jsx(r.Z,{className:"h-4 w-4"})},...o})}o.displayName="Calendar"},8573:(e,a,s)=>{"use strict";s.d(a,{$F:()=>m,AW:()=>x,Xi:()=>h,h_:()=>d});var t=s(4848),l=s(5642),r=s(1709),n=s(5960),i=s(8444),c=s(5385),o=s(5709);let d=r.fC,m=r.xz;r.ZA,r.Uv,r.Tr,r.Ee,l.forwardRef(({className:e,inset:a,children:s,...l},i)=>(0,t.jsxs)(r.fF,{ref:i,className:(0,o.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",e),...l,children:[s,t.jsx(n.Z,{className:"ml-auto h-4 w-4"})]})).displayName=r.fF.displayName,l.forwardRef(({className:e,...a},s)=>t.jsx(r.tu,{ref:s,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...a})).displayName=r.tu.displayName;let x=l.forwardRef(({className:e,sideOffset:a=4,...s},l)=>t.jsx(r.Uv,{children:t.jsx(r.VY,{ref:l,sideOffset:a,className:(0,o.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));x.displayName=r.VY.displayName;let h=l.forwardRef(({className:e,inset:a,...s},l)=>t.jsx(r.ck,{ref:l,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",e),...s}));h.displayName=r.ck.displayName,l.forwardRef(({className:e,children:a,checked:s,...l},n)=>(0,t.jsxs)(r.oC,{ref:n,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:s,...l,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(r.wU,{children:t.jsx(i.Z,{className:"h-4 w-4"})})}),a]})).displayName=r.oC.displayName,l.forwardRef(({className:e,children:a,...s},l)=>(0,t.jsxs)(r.Rk,{ref:l,className:(0,o.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...s,children:[t.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:t.jsx(r.wU,{children:t.jsx(c.Z,{className:"h-2 w-2 fill-current"})})}),a]})).displayName=r.Rk.displayName,l.forwardRef(({className:e,inset:a,...s},l)=>t.jsx(r.__,{ref:l,className:(0,o.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",e),...s})).displayName=r.__.displayName,l.forwardRef(({className:e,...a},s)=>t.jsx(r.Z0,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-muted",e),...a})).displayName=r.Z0.displayName},5379:(e,a,s)=>{"use strict";s.d(a,{J2:()=>i,xo:()=>c,yk:()=>o});var t=s(4848),l=s(5642),r=s(8614),n=s(5709);let i=r.fC,c=r.xz,o=l.forwardRef(({className:e,align:a="center",sideOffset:s=4,...l},i)=>t.jsx(r.h_,{children:t.jsx(r.VY,{ref:i,align:a,sideOffset:s,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...l})}));o.displayName=r.VY.displayName},8577:(e,a,s)=>{"use strict";s.d(a,{x:()=>i});var t=s(4848),l=s(5642),r=s(3088),n=s(5709);let i=l.forwardRef(({className:e,children:a,...s},l)=>(0,t.jsxs)(r.fC,{ref:l,className:(0,n.cn)("relative overflow-hidden",e),...s,children:[t.jsx(r.l_,{className:"h-full w-full rounded-[inherit]",children:a}),t.jsx(c,{}),t.jsx(r.Ns,{})]}));i.displayName=r.fC.displayName;let c=l.forwardRef(({className:e,orientation:a="vertical",...s},l)=>t.jsx(r.gb,{ref:l,orientation:a,className:(0,n.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...s,children:t.jsx(r.q4,{className:"relative flex-1 rounded-full bg-border"})}));c.displayName=r.gb.displayName},9982:(e,a,s)=>{"use strict";s.d(a,{Z:()=>i});var t=s(4848),l=s(5642),r=s(9164),n=s(5709);let i=l.forwardRef(({className:e,orientation:a="horizontal",decorative:s=!0,...l},i)=>t.jsx(r.f,{ref:i,decorative:s,orientation:a,className:(0,n.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",e),...l}));i.displayName=r.f.displayName},525:(e,a,s)=>{"use strict";s.d(a,{O:()=>r});var t=s(4848),l=s(5709);function r({className:e,...a}){return t.jsx("div",{className:(0,l.cn)("animate-pulse rounded-md bg-muted",e),...a})}},6701:(e,a,s)=>{"use strict";s.d(a,{SP:()=>o,dr:()=>c,mQ:()=>i,nU:()=>d});var t=s(4848),l=s(5642),r=s(8521),n=s(5709);let i=r.fC,c=l.forwardRef(({className:e,...a},s)=>t.jsx(r.aV,{ref:s,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...a}));c.displayName=r.aV.displayName;let o=l.forwardRef(({className:e,...a},s)=>t.jsx(r.xz,{ref:s,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...a}));o.displayName=r.xz.displayName;let d=l.forwardRef(({className:e,...a},s)=>t.jsx(r.VY,{ref:s,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...a}));d.displayName=r.VY.displayName},368:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(7138).createProxy)(String.raw`/home/ubuntu/moneymitra/app/app/transactions/page.tsx#default`)}};var a=require("../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[5923,474,9634,7380,4776,6429,5198,9422,7603,4258],()=>s(3962));module.exports=t})();