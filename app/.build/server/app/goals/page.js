(()=>{var e={};e.id=9639,e.ids=[9639],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5226:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>i.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>g,tree:()=>c}),s(1963),s(4364),s(2874);var t=s(7105),l=s(5265),r=s(157),i=s.n(r),n=s(4665),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);s.d(a,o);let c=["",{children:["goals",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1963)),"/home/ubuntu/moneymitra/app/app/goals/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4364)),"/home/ubuntu/moneymitra/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,2874,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ubuntu/moneymitra/app/app/goals/page.tsx"],m="/goals/page",x={require:s,loadChunk:()=>Promise.resolve()},g=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/goals/page",pathname:"/goals",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},551:(e,a,s)=>{Promise.resolve().then(s.bind(s,6358))},6358:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>_});var t=s(9899),l=s(5507),r=s(5767),i=s(5858),n=s(7241),o=s(6523),c=s(6903),d=s(7067),m=s(9804),x=s(9205),g=s(4909),h=s(4359),u=s(1775),p=s(6711),j=s(8455),y=s(3184),N=s(2577),v=s(1581),b=s(2759);function f({open:e,onOpenChange:a,onGoalAdded:s}){let[r,i]=(0,l.useState)({name:"",description:"",goalType:"",targetAmount:"",targetDate:"",categoryId:""}),[o,c]=(0,l.useState)([]),[d,m]=(0,l.useState)(!1),x=async e=>{if(e.preventDefault(),!r.name||!r.goalType||!r.targetAmount){b.Am.error("Please fill in all required fields");return}m(!0);try{let e={...r,targetAmount:parseFloat(r.targetAmount),categoryId:r.categoryId||null,targetDate:r.targetDate||null},t=await fetch("/api/goals",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)b.Am.success("Goal created successfully!"),s(),a(!1),i({name:"",description:"",goalType:"",targetAmount:"",targetDate:"",categoryId:""});else{let e=await t.json();b.Am.error(e.error||"Failed to create goal")}}catch(e){console.error("Error creating goal:",e),b.Am.error("Failed to create goal")}finally{m(!1)}},g=[{value:v.lC.SAVINGS,label:"Savings"},{value:v.lC.EMERGENCY_FUND,label:"Emergency Fund"},{value:v.lC.HOUSE,label:"House"},{value:v.lC.EDUCATION,label:"Education"},{value:v.lC.VACATION,label:"Vacation"},{value:v.lC.RETIREMENT,label:"Retirement"},{value:v.lC.INVESTMENT,label:"Investment"},{value:v.lC.DEBT_PAYOFF,label:"Debt Payoff"},{value:v.lC.OTHER,label:"Other"}];return t.jsx(u.Vq,{open:e,onOpenChange:a,children:(0,t.jsxs)(u.cZ,{className:"sm:max-w-[500px]",children:[t.jsx(u.fK,{children:t.jsx(u.$N,{children:"Add New Financial Goal"})}),(0,t.jsxs)("form",{onSubmit:x,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"name",children:"Goal Name"}),t.jsx(p.I,{id:"name",value:r.name,onChange:e=>i({...r,name:e.target.value}),placeholder:"e.g., Emergency Fund, House Down Payment",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"goalType",children:"Goal Type"}),(0,t.jsxs)(N.Ph,{value:r.goalType,onValueChange:e=>i({...r,goalType:e}),required:!0,children:[t.jsx(N.i4,{children:t.jsx(N.ki,{placeholder:"Select goal type"})}),t.jsx(N.Bw,{children:g.map(e=>t.jsx(N.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"targetAmount",children:"Target Amount (â‚¹)"}),t.jsx(p.I,{id:"targetAmount",type:"number",value:r.targetAmount,onChange:e=>i({...r,targetAmount:e.target.value}),placeholder:"100000",min:"1",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"targetDate",children:"Target Date (Optional)"}),t.jsx(p.I,{id:"targetDate",type:"date",value:r.targetDate,onChange:e=>i({...r,targetDate:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"categoryId",children:"Category (Optional)"}),(0,t.jsxs)(N.Ph,{value:r.categoryId,onValueChange:e=>i({...r,categoryId:e}),children:[t.jsx(N.i4,{children:t.jsx(N.ki,{placeholder:"Select category"})}),t.jsx(N.Bw,{children:o.map(e=>t.jsx(N.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"description",children:"Description (Optional)"}),t.jsx(y.g,{id:"description",value:r.description,onChange:e=>i({...r,description:e.target.value}),placeholder:"Additional details about your goal...",rows:3})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx(n.z,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),t.jsx(n.z,{type:"submit",disabled:d,children:d?"Creating...":"Create Goal"})]})]})]})})}var C=s(6153),E=s(8954),w=s(8514),A=s(9118),T=s(6019),P=s(4672),O=s(8408),D=s(2338),I=s(7669),G=s(4940),k=s(1544);let S={[v.lC.SAVINGS]:"bg-green-100 text-green-800",[v.lC.DEBT_PAYOFF]:"bg-red-100 text-red-800",[v.lC.INVESTMENT]:"bg-blue-100 text-blue-800",[v.lC.EMERGENCY_FUND]:"bg-orange-100 text-orange-800",[v.lC.EDUCATION]:"bg-purple-100 text-purple-800",[v.lC.HOUSE]:"bg-indigo-100 text-indigo-800",[v.lC.VACATION]:"bg-pink-100 text-pink-800",[v.lC.RETIREMENT]:"bg-gray-100 text-gray-800",[v.lC.OTHER]:"bg-yellow-100 text-yellow-800"},Z={[v.lC.SAVINGS]:"Savings",[v.lC.DEBT_PAYOFF]:"Debt Payoff",[v.lC.INVESTMENT]:"Investment",[v.lC.EMERGENCY_FUND]:"Emergency Fund",[v.lC.EDUCATION]:"Education",[v.lC.HOUSE]:"House",[v.lC.VACATION]:"Vacation",[v.lC.RETIREMENT]:"Retirement",[v.lC.OTHER]:"Other"};function F({goals:e,onGoalUpdated:a}){let s=(0,C.useRouter)(),[m,x]=(0,l.useState)(null),[g,u]=(0,l.useState)(!1),[p,j]=(0,l.useState)(!1),[y,N]=(0,l.useState)(!1),b=async e=>{if(confirm("Are you sure you want to delete this goal?"))try{(await fetch(`/api/goals/${e}`,{method:"DELETE"})).ok&&a()}catch(e){console.error("Error deleting goal:",e)}},f=async e=>{try{(await fetch(`/api/goals/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:v.tP.COMPLETED})})).ok&&a()}catch(e){console.error("Error updating goal:",e)}},F=e=>{x(e),u(!0)},_=e=>{x(e),j(!0)},M=e=>{x(e),N(!0)},V=e=>{s.push(`/goals/${e}`)};return 0===e.length?t.jsx(i.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg",children:(0,t.jsxs)(i.aY,{className:"flex flex-col items-center justify-center py-12",children:[t.jsx(c.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No goals yet"}),t.jsx("p",{className:"text-gray-600 text-center mb-4",children:"Start by creating your first financial goal to track your progress."})]})}):(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map((e,a)=>{let s=e.dynamicProgress,l=e.totalProgress||e.currentAmount,m=e.linkedInvestmentValue||0,x=void 0!==s?s:e.targetAmount>0?e.currentAmount/e.targetAmount*100:0,g=e.status===v.tP.COMPLETED,u=e.targetDate?Math.ceil((new Date(e.targetDate).getTime()-new Date().getTime())/864e5):null;return t.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},children:(0,t.jsxs)(i.Zb,{className:"bg-white/80 backdrop-blur-sm border-0 shadow-lg hover:shadow-xl transition-all duration-300 group",children:[t.jsx(i.Ol,{className:"pb-3",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)(i.ll,{className:"text-lg font-semibold text-gray-900 mb-2 flex items-center gap-2",children:[t.jsx(c.Z,{className:"h-5 w-5 text-blue-600"}),e.name,g&&t.jsx(E.Z,{className:"h-4 w-4 text-green-600"})]}),t.jsx(o.C,{className:S[e.goalType],children:Z[e.goalType]})]}),(0,t.jsxs)("div",{className:"flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsx(n.z,{variant:"ghost",size:"sm",onClick:()=>V(e.id),title:"View Details",children:t.jsx(w.Z,{className:"h-4 w-4"})}),t.jsx(n.z,{variant:"ghost",size:"sm",onClick:()=>_(e),title:"Edit Goal",children:t.jsx(A.Z,{className:"h-4 w-4"})}),t.jsx(n.z,{variant:"ghost",size:"sm",onClick:()=>M(e),disabled:g,title:"Link Investment",children:t.jsx(T.Z,{className:"h-4 w-4"})}),t.jsx(n.z,{variant:"ghost",size:"sm",onClick:()=>b(e.id),title:"Delete Goal",children:t.jsx(P.Z,{className:"h-4 w-4"})})]})]})}),(0,t.jsxs)(i.aY,{className:"space-y-4",children:[e.description&&t.jsx("p",{className:"text-sm text-gray-600",children:e.description}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-600",children:"Progress"}),(0,t.jsxs)("span",{className:"font-medium",children:[Math.min(x,100).toFixed(1),"%"]})]}),t.jsx(D.E,{value:Math.min(x,100),className:"h-2"})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Contributions"}),t.jsx("p",{className:"font-semibold text-green-600",children:(0,h.xG)(e.currentAmount)})]}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Target"}),t.jsx("p",{className:"font-semibold text-blue-600",children:(0,h.xG)(e.targetAmount)})]})]}),m>0&&(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Investments"}),t.jsx("p",{className:"font-semibold text-purple-600",children:(0,h.xG)(m)})]}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"text-gray-600",children:"Total Progress"}),t.jsx("p",{className:"font-semibold text-emerald-600",children:(0,h.xG)(l)})]})]}),e.targetDate&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[t.jsx(O.Z,{className:"h-4 w-4 text-gray-400"}),t.jsx("span",{className:"text-gray-600",children:null!==u&&u>0?`${u} days remaining`:0===u?"Due today":"Overdue"})]}),!g&&x<100&&(0,t.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,t.jsxs)(n.z,{size:"sm",onClick:()=>F(e),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white",children:[t.jsx(d.Z,{className:"h-4 w-4 mr-1"}),"Add Contribution"]}),x>=100&&(0,t.jsxs)(n.z,{size:"sm",variant:"outline",onClick:()=>f(e.id),className:"border-green-600 text-green-600 hover:bg-green-50",children:[t.jsx(E.Z,{className:"h-4 w-4 mr-1"}),"Complete"]})]}),g&&(0,t.jsxs)("div",{className:"flex items-center gap-2 text-green-600 bg-green-50 p-2 rounded-lg",children:[t.jsx(E.Z,{className:"h-4 w-4"}),t.jsx("span",{className:"text-sm font-medium",children:"Goal Completed!"})]})]})]})},e.id)})}),m&&(0,t.jsxs)(t.Fragment,{children:[t.jsx(I.m,{open:g,onOpenChange:u,goal:m,onContributionAdded:()=>{a(),u(!1),x(null)}}),t.jsx(G.V,{open:p,onOpenChange:j,goal:m,onGoalUpdated:()=>{a(),j(!1),x(null)}}),t.jsx(k.a,{open:y,onOpenChange:N,goalId:m.id,onInvestmentLinked:()=>{a(),N(!1),x(null)}})]})]})}function _(){let[e,a]=(0,l.useState)(null),[s,u]=(0,l.useState)(!0),[p,j]=(0,l.useState)(!1),y=async()=>{try{u(!0);let e=await fetch("/api/goals?includeInvestments=true");if(e.ok){let s=await e.json(),t=s?.length||0,l=s?.filter(e=>"ACTIVE"===e.status).length||0,r=s?.filter(e=>"COMPLETED"===e.status).length||0,i=s?.reduce((e,a)=>e+a.targetAmount,0)||0,n=s?.reduce((e,a)=>e+a.currentAmount,0)||0,o=s?.reduce((e,a)=>e+(a.totalProgress||a.currentAmount),0)||0;a({goals:s||[],stats:{totalGoals:t,targetAmount:i,currentAmount:n,totalProgressAmount:o,averageProgress:t>0?o/i*100:0,completedGoals:r,activeGoals:l}})}}catch(e){console.error("Error fetching goals data:",e)}finally{u(!1)}};return s?t.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-6",children:[t.jsx("div",{className:"h-8 bg-slate-200 rounded w-1/4"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,a)=>t.jsx("div",{className:"h-32 bg-slate-200 rounded"},a))})]})}):e?(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-professional-blue to-professional-blue-light rounded-lg",children:t.jsx(c.Z,{className:"h-6 w-6 text-white"})}),"Financial Goals"]}),t.jsx("p",{className:"text-slate-600 mt-1",children:"Track your progress towards financial milestones"})]}),(0,t.jsxs)(n.z,{className:"bg-professional-blue hover:bg-professional-blue-dark text-white",onClick:()=>j(!0),children:[t.jsx(d.Z,{className:"h-4 w-4 mr-2"}),"Add Goal"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:(0,t.jsxs)(i.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(i.ll,{className:"text-sm font-medium text-slate-600",children:"Total Goals"}),t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(c.Z,{className:"h-4 w-4 text-professional-blue"})})]}),(0,t.jsxs)(i.aY,{children:[t.jsx("div",{className:"text-2xl font-bold text-professional-blue",children:e.stats.totalGoals}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,t.jsxs)(o.C,{variant:"secondary",className:"text-xs bg-emerald-100 text-emerald-700",children:[e.stats.activeGoals," Active"]}),(0,t.jsxs)(o.C,{variant:"secondary",className:"text-xs bg-slate-100 text-slate-700",children:[e.stats.completedGoals," Completed"]})]})]})]})}),t.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,t.jsxs)(i.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(i.ll,{className:"text-sm font-medium text-slate-600",children:"Target Amount"}),t.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:t.jsx(m.Z,{className:"h-4 w-4 text-emerald-600"})})]}),(0,t.jsxs)(i.aY,{children:[t.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:(0,h.xG)(e.stats.targetAmount)}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Total target"})]})]})}),t.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:(0,t.jsxs)(i.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(i.ll,{className:"text-sm font-medium text-slate-600",children:"Total Progress"}),t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(x.Z,{className:"h-4 w-4 text-professional-blue"})})]}),(0,t.jsxs)(i.aY,{children:[t.jsx("div",{className:"text-2xl font-bold text-professional-blue",children:(0,h.xG)(e.stats.totalProgressAmount)}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Contributions + Investments"})]})]})}),t.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:(0,t.jsxs)(i.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(i.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(i.ll,{className:"text-sm font-medium text-slate-600",children:"Average Progress"}),t.jsx("div",{className:"p-2 bg-emerald-100 rounded-lg",children:t.jsx(g.Z,{className:"h-4 w-4 text-emerald-600"})})]}),(0,t.jsxs)(i.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-emerald-600",children:[e.stats.averageProgress.toFixed(1),"%"]}),t.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2 mt-2",children:t.jsx("div",{className:"bg-emerald-600 h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(e.stats.averageProgress,100)}%`}})})]})]})})]}),t.jsx(r.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:t.jsx(F,{goals:e.goals,onGoalUpdated:y})})]}),t.jsx(f,{open:p,onOpenChange:j,onGoalAdded:()=>{j(!1),y()}})]}):t.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Error loading goals"}),t.jsx("p",{className:"text-slate-600 mt-2",children:"Please try refreshing the page"})]})})}},8954:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(1278).Z)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},8514:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(1278).Z)("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},1963:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(2772).createProxy)(String.raw`/home/ubuntu/moneymitra/app/app/goals/page.tsx#default`)}};var a=require("../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[5942,300,3199,1523,814,6142,3535],()=>s(5226));module.exports=t})();