(()=>{var e={};e.id=3715,e.ids=[3715],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3403:(e,a,s)=>{"use strict";s.r(a),s.d(a,{GlobalError:()=>r.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>d,routeModule:()=>p,tree:()=>c}),s(1487),s(7699),s(6289);var t=s(2752),l=s(7380),n=s(459),r=s.n(n),i=s(8119),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(a,o);let c=["",{children:["loans",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,1487)),"/home/ubuntu/moneymitra/app/app/loans/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,7699)),"/home/ubuntu/moneymitra/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,6289,23)),"next/dist/client/components/not-found-error"]}],d=["/home/ubuntu/moneymitra/app/app/loans/page.tsx"],x="/loans/page",m={require:s,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:l.x.APP_PAGE,page:"/loans/page",pathname:"/loans",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},542:(e,a,s)=>{Promise.resolve().then(s.bind(s,740))},740:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>f});var t=s(4848),l=s(5642),n=s(6992),r=s(391),i=s(8287),o=s(2241),c=s(1276),d=s(2378),x=s(3664),m=s(3537),p=s(7403),h=s(4339),u=s(5205),j=s(7767),y=s(1262),g=s(2595),v=s(6157),N=s(4714);function b({open:e,onOpenChange:a,onLoanAdded:s}){let[n,r]=(0,l.useState)({name:"",loanType:"",principalAmount:"",interestRate:"",tenure:"",startDate:"",description:"",categoryId:""}),[o,c]=(0,l.useState)([]),[d,x]=(0,l.useState)(!1),m=async e=>{if(e.preventDefault(),!n.name||!n.loanType||!n.principalAmount||!n.interestRate||!n.tenure||!n.startDate){N.Am.error("Please fill in all required fields");return}x(!0);try{let e={...n,principalAmount:parseFloat(n.principalAmount),interestRate:parseFloat(n.interestRate),tenure:parseInt(n.tenure),categoryId:n.categoryId||null},t=await fetch("/api/loans",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(t.ok)N.Am.success("Loan created successfully!"),s(),a(!1),r({name:"",loanType:"",principalAmount:"",interestRate:"",tenure:"",startDate:"",description:"",categoryId:""});else{let e=await t.json();N.Am.error(e.error||"Failed to create loan")}}catch(e){console.error("Error creating loan:",e),N.Am.error("Failed to create loan")}finally{x(!1)}},p=[{value:v.am.HOME_LOAN,label:"Home Loan"},{value:v.am.PERSONAL_LOAN,label:"Personal Loan"},{value:v.am.CAR_LOAN,label:"Car Loan"},{value:v.am.EDUCATION_LOAN,label:"Education Loan"},{value:v.am.CREDIT_CARD,label:"Credit Card"},{value:v.am.BUSINESS_LOAN,label:"Business Loan"},{value:v.am.GOLD_LOAN,label:"Gold Loan"},{value:v.am.OTHER,label:"Other"}],b=(()=>{let e=parseFloat(n.principalAmount),a=parseFloat(n.interestRate)/100/12,s=parseInt(n.tenure);return e&&a&&s?a>0?e*a*Math.pow(1+a,s)/(Math.pow(1+a,s)-1):e/s:0})();return t.jsx(h.Vq,{open:e,onOpenChange:a,children:(0,t.jsxs)(h.cZ,{className:"sm:max-w-[600px] max-h-[90vh] overflow-y-auto",children:[t.jsx(h.fK,{children:t.jsx(h.$N,{children:"Add New Loan"})}),(0,t.jsxs)("form",{onSubmit:m,className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"name",children:"Loan Name"}),t.jsx(u.I,{id:"name",value:n.name,onChange:e=>r({...n,name:e.target.value}),placeholder:"e.g., Home Loan - SBI",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"loanType",children:"Loan Type"}),(0,t.jsxs)(g.Ph,{value:n.loanType,onValueChange:e=>r({...n,loanType:e}),required:!0,children:[t.jsx(g.i4,{children:t.jsx(g.ki,{placeholder:"Select loan type"})}),t.jsx(g.Bw,{children:p.map(e=>t.jsx(g.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"principalAmount",children:"Principal Amount (₹)"}),t.jsx(u.I,{id:"principalAmount",type:"number",value:n.principalAmount,onChange:e=>r({...n,principalAmount:e.target.value}),placeholder:"1000000",min:"1",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"interestRate",children:"Interest Rate (% p.a.)"}),t.jsx(u.I,{id:"interestRate",type:"number",step:"0.01",value:n.interestRate,onChange:e=>r({...n,interestRate:e.target.value}),placeholder:"8.5",min:"0",required:!0})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"tenure",children:"Tenure (months)"}),t.jsx(u.I,{id:"tenure",type:"number",value:n.tenure,onChange:e=>r({...n,tenure:e.target.value}),placeholder:"240",min:"1",required:!0})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"startDate",children:"Start Date"}),t.jsx(u.I,{id:"startDate",type:"date",value:n.startDate,onChange:e=>r({...n,startDate:e.target.value}),required:!0})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"categoryId",children:"Category (Optional)"}),(0,t.jsxs)(g.Ph,{value:n.categoryId,onValueChange:e=>r({...n,categoryId:e}),children:[t.jsx(g.i4,{children:t.jsx(g.ki,{placeholder:"Select category"})}),t.jsx(g.Bw,{children:o.map(e=>t.jsx(g.Ql,{value:e.id,children:e.name},e.id))})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(j._,{htmlFor:"description",children:"Description (Optional)"}),t.jsx(y.g,{id:"description",value:n.description,onChange:e=>r({...n,description:e.target.value}),placeholder:"Additional details about the loan...",rows:3})]}),b>0&&(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[t.jsx("h4",{className:"font-semibold text-blue-900 mb-2",children:"EMI Preview"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:["₹",b.toLocaleString("en-IN",{maximumFractionDigits:0})]}),t.jsx("p",{className:"text-sm text-blue-700",children:"Monthly EMI amount"})]}),(0,t.jsxs)("div",{className:"flex justify-end gap-3 pt-4",children:[t.jsx(i.z,{type:"button",variant:"outline",onClick:()=>a(!1),children:"Cancel"}),t.jsx(i.z,{type:"submit",disabled:d,children:d?"Creating...":"Create Loan"})]})]})]})})}function f(){let[e,a]=(0,l.useState)(null),[s,h]=(0,l.useState)(!0),[u,j]=(0,l.useState)(!1),y=async()=>{try{h(!0);let e=await fetch("/api/loans");if(e.ok){let s=await e.json(),t=s?.length||0,l=s?.reduce((e,a)=>e+a.currentBalance,0)||0,n=s?.reduce((e,a)=>e+a.emiAmount,0)||0,r=t>0?s.reduce((e,a)=>e+a.interestRate,0)/t:0,i=s?.reduce((e,a)=>e+(a.principalAmount-a.currentBalance),0)||0;a({loans:s||[],stats:{totalLoans:t,totalBalance:l,monthlyEMI:n,averageInterest:r,totalPaid:i,remainingAmount:l}})}}catch(e){console.error("Error fetching loans data:",e)}finally{h(!1)}};return s?t.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-6",children:[t.jsx("div",{className:"h-8 bg-slate-200 rounded w-1/4"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,a)=>t.jsx("div",{className:"h-32 bg-slate-200 rounded"},a))})]})}):e?(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"space-y-8",children:[(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-3xl font-bold text-slate-900 flex items-center gap-3",children:[t.jsx("div",{className:"p-2 bg-gradient-to-br from-professional-blue to-professional-blue-light rounded-lg",children:t.jsx(o.Z,{className:"h-6 w-6 text-white"})}),"Loan Management"]}),t.jsx("p",{className:"text-slate-600 mt-1",children:"Track your loans and manage EMI payments"})]}),(0,t.jsxs)(i.z,{className:"bg-professional-blue hover:bg-professional-blue-dark text-white",onClick:()=>j(!0),children:[t.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"Add Loan"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[t.jsx(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.1},children:(0,t.jsxs)(r.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(r.ll,{className:"text-sm font-medium text-slate-600",children:"Total Loans"}),t.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:t.jsx(o.Z,{className:"h-4 w-4 text-professional-blue"})})]}),(0,t.jsxs)(r.aY,{children:[t.jsx("div",{className:"text-2xl font-bold text-professional-blue",children:e.stats.totalLoans}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Active loans"})]})]})}),t.jsx(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,t.jsxs)(r.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(r.ll,{className:"text-sm font-medium text-slate-600",children:"Monthly EMI"}),t.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:t.jsx(d.Z,{className:"h-4 w-4 text-red-600"})})]}),(0,t.jsxs)(r.aY,{children:[t.jsx("div",{className:"text-2xl font-bold text-red-600",children:(0,p.xG)(e.stats.monthlyEMI)}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Total monthly payment"})]})]})}),t.jsx(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:(0,t.jsxs)(r.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(r.ll,{className:"text-sm font-medium text-slate-600",children:"Avg. Interest"}),t.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:t.jsx(x.Z,{className:"h-4 w-4 text-orange-600"})})]}),(0,t.jsxs)(r.aY,{children:[(0,t.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[e.stats.averageInterest.toFixed(1),"%"]}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Average rate"})]})]})}),t.jsx(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.4},children:(0,t.jsxs)(r.Zb,{className:"professional-card hover-shadow",children:[(0,t.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[t.jsx(r.ll,{className:"text-sm font-medium text-slate-600",children:"Outstanding Balance"}),t.jsx("div",{className:"p-2 bg-red-100 rounded-lg",children:t.jsx(m.Z,{className:"h-4 w-4 text-red-600"})})]}),(0,t.jsxs)(r.aY,{children:[t.jsx("div",{className:"text-2xl font-bold text-red-600",children:(0,p.xG)(e.stats.totalBalance)}),t.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Remaining amount"})]})]})})]}),t.jsx(n.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.5},children:(0,t.jsxs)(r.Zb,{className:"professional-card",children:[t.jsx(r.Ol,{children:(0,t.jsxs)(r.ll,{className:"text-slate-900",children:["Loans (",e.loans.length,")"]})}),t.jsx(r.aY,{children:0===e.loans.length?(0,t.jsxs)("div",{className:"text-center py-8",children:[t.jsx(o.Z,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),t.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No loans found"}),t.jsx("p",{className:"text-slate-600 mb-4",children:"Start by adding your first loan"}),(0,t.jsxs)(i.z,{className:"bg-professional-blue hover:bg-professional-blue-dark text-white",onClick:()=>j(!0),children:[t.jsx(c.Z,{className:"h-4 w-4 mr-2"}),"Add Loan"]})]}):t.jsx("div",{className:"space-y-4",children:e.loans.map(e=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-4 border border-slate-200 rounded-lg hover:bg-slate-50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[t.jsx("div",{className:"p-2 rounded-full bg-slate-100",children:t.jsx(o.Z,{className:"h-4 w-4 text-professional-blue"})}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"font-semibold text-slate-900",children:e.name}),(0,t.jsxs)("p",{className:"text-sm text-slate-600",children:[e.loanType," • ",e.interestRate,"% interest"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[t.jsx("div",{className:"text-lg font-bold text-red-600",children:(0,p.xG)(e.currentBalance)}),(0,t.jsxs)("p",{className:"text-sm text-slate-600",children:["EMI: ",(0,p.xG)(e.emiAmount)]})]})]},e.id))})})]})})]}),t.jsx(b,{open:u,onOpenChange:j,onLoanAdded:()=>{j(!1),y()}})]}):t.jsx("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"text-center",children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Error loading loans"}),t.jsx("p",{className:"text-slate-600 mt-2",children:"Please try refreshing the page"})]})})}},3664:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(93).Z)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]])},3537:(e,a,s)=>{"use strict";s.d(a,{Z:()=>t});let t=(0,s(93).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},1487:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>t});let t=(0,s(7138).createProxy)(String.raw`/home/ubuntu/moneymitra/app/app/loans/page.tsx#default`)}};var a=require("../../webpack-runtime.js");a.C(e);var s=e=>a(a.s=e),t=a.X(0,[5923,9238,5188,4712,7603,8960],()=>s(3403));module.exports=t})();