"use strict";(()=>{var e={};e.id=275,e.ids=[275],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5864:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>h,patchFetch:()=>y,requestAsyncStorage:()=>l,routeModule:()=>p,serverHooks:()=>g,staticGenerationAsyncStorage:()=>d});var r={};a.r(r),a.d(r,{GET:()=>m,dynamic:()=>c});var n=a(921),o=a(7380),s=a(4185),i=a(3878),u=a(9958);let c="force-dynamic";async function m(e){try{let{searchParams:t}=new URL(e.url),a=parseInt(t.get("year")||new Date().getFullYear().toString()),r=t.get("month"),n=r?parseInt(r):null,o={};if(n){let e=new Date(a,n-1,1),t=new Date(a,n,0,23,59,59);o={date:{gte:e,lte:t}}}else{let e=new Date(a,0,1),t=new Date(a,11,31,23,59,59);o={date:{gte:e,lte:t}}}let[s,c,m]=await Promise.all([u._.transaction.aggregate({where:{...o,type:"INCOME"},_sum:{amount:!0},_count:!0}),u._.transaction.aggregate({where:{...o,type:"EXPENSE"},_sum:{amount:!0},_count:!0}),u._.transaction.count({where:o})]),p=s._sum.amount||0,l=c._sum.amount||0;return i.NextResponse.json({totalIncome:p,totalExpense:l,netBalance:p-l,incomeTransactions:s._count,expenseTransactions:c._count,totalTransactions:m,period:n?`${a}-${n.toString().padStart(2,"0")}`:a.toString()})}catch(e){return console.error("Error fetching transaction summary:",e),i.NextResponse.json({error:"Failed to fetch transaction summary"},{status:500})}}let p=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/transactions/summary/route",pathname:"/api/transactions/summary",filename:"route",bundlePath:"app/api/transactions/summary/route"},resolvedPagePath:"/home/ubuntu/moneymitra/app/app/api/transactions/summary/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:l,staticGenerationAsyncStorage:d,serverHooks:g}=p,h="/api/transactions/summary/route";function y(){return(0,s.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:d})}},9958:(e,t,a)=>{a.d(t,{_:()=>n,db:()=>o});var r=a(3524);let n=globalThis.prisma??new r.PrismaClient,o=n}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[5923,7146],()=>a(5864));module.exports=r})();