"use strict";(()=>{var e={};e.id=2206,e.ids=[2206],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},2325:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>y,patchFetch:()=>x,requestAsyncStorage:()=>v,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>g});var r={};n.r(r),n.d(r,{DELETE:()=>p,GET:()=>c,PUT:()=>l,dynamic:()=>u});var s=n(921),i=n(7380),o=n(4185),a=n(3878),d=n(2334);let u="force-dynamic";async function c(e,{params:t}){try{let e=await d.db.investment.findUnique({where:{id:t.id},include:{goal:{select:{id:!0,name:!0,goalType:!0}},category:{select:{id:!0,name:!0,color:!0}},transactions:{orderBy:{date:"desc"}},sips:!0}});if(!e)return a.NextResponse.json({error:"Investment not found"},{status:404});return a.NextResponse.json(e)}catch(e){return console.error("Error fetching investment:",e),a.NextResponse.json({error:"Failed to fetch investment"},{status:500})}}async function l(e,{params:t}){try{let{name:n,symbol:r,currentPrice:s,description:i,goalId:o,categoryId:u,isActive:c}=await e.json(),l={name:n,symbol:r,description:i,goalId:o||null,categoryId:u||null,isActive:c};if(void 0!==s){let e=await d.db.investment.findUnique({where:{id:t.id}});e&&(l.currentPrice=s,l.currentValue=e.quantity*s)}let p=await d.db.investment.update({where:{id:t.id},data:l,include:{goal:{select:{id:!0,name:!0,goalType:!0}},category:{select:{id:!0,name:!0,color:!0}},transactions:{orderBy:{date:"desc"}},sips:!0}});return a.NextResponse.json(p)}catch(e){return console.error("Error updating investment:",e),a.NextResponse.json({error:"Failed to update investment"},{status:500})}}async function p(e,{params:t}){try{return await d.db.investment.delete({where:{id:t.id}}),a.NextResponse.json({success:!0})}catch(e){return console.error("Error deleting investment:",e),a.NextResponse.json({error:"Failed to delete investment"},{status:500})}}let m=new s.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/investments/[id]/route",pathname:"/api/investments/[id]",filename:"route",bundlePath:"app/api/investments/[id]/route"},resolvedPagePath:"/home/ubuntu/moneymitra/app/app/api/investments/[id]/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:v,staticGenerationAsyncStorage:g,serverHooks:h}=m,y="/api/investments/[id]/route";function x(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:g})}},2334:(e,t,n)=>{n.d(t,{db:()=>i,_:()=>s});let r=require("@prisma/client"),s=globalThis.prisma??new r.PrismaClient,i=s}};var t=require("../../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[5923,7146],()=>n(2325));module.exports=r})();