"use strict";(()=>{var e={};e.id=4094,e.ids=[4094],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4304:(e,t,n)=>{n.r(t),n.d(t,{originalPathname:()=>h,patchFetch:()=>x,requestAsyncStorage:()=>m,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>v});var r={};n.r(r),n.d(r,{GET:()=>l,POST:()=>c,dynamic:()=>p});var a=n(921),s=n(7380),i=n(4185),o=n(3878),u=n(2334);let p="force-dynamic";async function l(e){try{let{searchParams:t}=new URL(e.url),n=t.get("goalId"),r=t.get("assetClass"),a=t.get("platform"),s=t.get("isActive"),i={};n&&(i.goalId=n),r&&(i.assetClass=r),a&&(i.platform=a),null!==s&&(i.isActive="true"===s);let p=await u._.investment.findMany({where:i,orderBy:{updatedAt:"desc"}});return o.NextResponse.json(p)}catch(e){return console.error("Error fetching investments:",e),o.NextResponse.json({error:"Failed to fetch investments"},{status:500})}}async function c(e){try{let{name:t,symbol:n,assetClass:r,platform:a,quantity:s,purchasePrice:i,currentPrice:p,purchaseDate:l,description:c,goalId:d,categoryId:m}=await e.json(),v=s*i,g=await u._.investment.create({data:{name:t,symbol:n,assetClass:r,platform:a,quantity:s,averagePrice:i,currentPrice:p,totalInvested:v,currentValue:s*p,purchaseDate:l?new Date(l):null,description:c,goalId:d||null,categoryId:m||null}});return s>0&&i>0&&await u._.investmentTransaction.create({data:{investmentId:g.id,type:"BUY",quantity:s,price:i,amount:v,date:l?new Date(l):new Date,notes:"Initial purchase"}}),o.NextResponse.json(g,{status:201})}catch(e){return console.error("Error creating investment:",e),o.NextResponse.json({error:"Failed to create investment"},{status:500})}}let d=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/investments/route",pathname:"/api/investments",filename:"route",bundlePath:"app/api/investments/route"},resolvedPagePath:"/home/ubuntu/moneymitra/app/app/api/investments/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:m,staticGenerationAsyncStorage:v,serverHooks:g}=d,h="/api/investments/route";function x(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:v})}},2334:(e,t,n)=>{n.d(t,{db:()=>s,_:()=>a});let r=require("@prisma/client"),a=globalThis.prisma??new r.PrismaClient,s=a}};var t=require("../../../webpack-runtime.js");t.C(e);var n=e=>t(t.s=e),r=t.X(0,[5923,7146],()=>n(4304));module.exports=r})();