"use strict";(()=>{var e={};e.id=2451,e.ids=[2451],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},277:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>h,patchFetch:()=>P,requestAsyncStorage:()=>m,routeModule:()=>c,serverHooks:()=>x,staticGenerationAsyncStorage:()=>v});var n={};s.r(n),s.d(n,{GET:()=>l,POST:()=>d,dynamic:()=>p});var r=s(3277),a=s(5265),i=s(5356),o=s(7076),u=s(6059);let p="force-dynamic";async function l(e){try{let{searchParams:t}=new URL(e.url),s=t.get("investmentId"),n=t.get("status"),r={};s&&(r.investmentId=s),n&&(r.status=n);let a=await u.db.sIP.findMany({where:r,include:{investment:{select:{id:!0,name:!0,assetClass:!0}}},orderBy:{nextDate:"asc"}});return o.NextResponse.json(a)}catch(e){return console.error("Error fetching SIPs:",e),o.NextResponse.json({error:"Failed to fetch SIPs"},{status:500})}}async function d(e){try{let{investmentId:t,name:s,amount:n,frequency:r,startDate:a,endDate:i,totalInstallments:p}=await e.json(),l=new Date(a),d=new Date(l),c=await u.db.sIP.create({data:{investmentId:t,name:s,amount:n,frequency:r,startDate:l,endDate:i?new Date(i):null,nextDate:d,totalInstallments:p||null},include:{investment:{select:{id:!0,name:!0,assetClass:!0}}}});return o.NextResponse.json(c,{status:201})}catch(e){return console.error("Error creating SIP:",e),o.NextResponse.json({error:"Failed to create SIP"},{status:500})}}let c=new r.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/investments/sips/route",pathname:"/api/investments/sips",filename:"route",bundlePath:"app/api/investments/sips/route"},resolvedPagePath:"/home/ubuntu/moneymitra/app/app/api/investments/sips/route.ts",nextConfigOutput:"",userland:n}),{requestAsyncStorage:m,staticGenerationAsyncStorage:v,serverHooks:x}=c,h="/api/investments/sips/route";function P(){return(0,i.patchFetch)({serverHooks:x,staticGenerationAsyncStorage:v})}},6059:(e,t,s)=>{s.d(t,{_:()=>r,db:()=>a});var n=s(3524);let r=globalThis.prisma??new n.PrismaClient,a=r}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),n=t.X(0,[5942,3786],()=>s(277));module.exports=n})();