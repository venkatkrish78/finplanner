"use strict";(()=>{var e={};e.id=3993,e.ids=[3993],e.modules={3524:e=>{e.exports=require("@prisma/client")},399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},1752:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>g,patchFetch:()=>h,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>b,staticGenerationAsyncStorage:()=>m});var i={};a.r(i),a.d(i,{PUT:()=>u,dynamic:()=>d});var n=a(3277),r=a(5265),s=a(5356),o=a(7076),l=a(6059);let d="force-dynamic";async function u(e,{params:t}){try{let{status:a,notes:i,createTransaction:n}=await e.json(),r=await l._.billInstance.findUnique({where:{id:t.id},include:{bill:{include:{category:!0}}}});if(!r)return o.NextResponse.json({error:"Bill instance not found"},{status:404});let s=r.transactionId;"PAID"===a&&n&&!s&&(s=(await l._.transaction.create({data:{amount:r.amount,type:"EXPENSE",description:`Bill payment: ${r.bill.name}`,date:new Date,categoryId:r.bill.categoryId,source:"MANUAL"}})).id);let d=await l._.billInstance.update({where:{id:t.id},data:{status:a,notes:i,paidDate:"PAID"===a?new Date:null,transactionId:s},include:{bill:{include:{category:!0}},transaction:!0}});return o.NextResponse.json(d)}catch(e){return console.error("Error updating bill instance:",e),o.NextResponse.json({error:"Failed to update bill instance"},{status:500})}}let c=new n.AppRouteRouteModule({definition:{kind:r.x.APP_ROUTE,page:"/api/bills/instances/[id]/route",pathname:"/api/bills/instances/[id]",filename:"route",bundlePath:"app/api/bills/instances/[id]/route"},resolvedPagePath:"/home/ubuntu/moneymitra/app/app/api/bills/instances/[id]/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:b}=c,g="/api/bills/instances/[id]/route";function h(){return(0,s.patchFetch)({serverHooks:b,staticGenerationAsyncStorage:m})}},6059:(e,t,a)=>{a.d(t,{_:()=>n,db:()=>r});var i=a(3524);let n=globalThis.prisma??new i.PrismaClient,r=n}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),i=t.X(0,[5942,3786],()=>a(1752));module.exports=i})();