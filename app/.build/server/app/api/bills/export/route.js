"use strict";(()=>{var e={};e.id=9950,e.ids=[9950],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},8363:(e,t,a)=>{a.r(t),a.d(t,{originalPathname:()=>x,patchFetch:()=>b,requestAsyncStorage:()=>c,routeModule:()=>d,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var r={};a.r(r),a.d(r,{GET:()=>p,dynamic:()=>u});var n=a(921),i=a(7380),o=a(4185),s=a(3878),l=a(2334);let u="force-dynamic";async function p(e){try{let{searchParams:t}=new URL(e.url),a=t.get("startDate"),r=t.get("endDate"),n=t.get("status"),i={};(a||r)&&(i.dueDate={},a&&(i.dueDate.gte=new Date(a)),r&&(i.dueDate.lte=new Date(r))),n&&(i.status=n);let o=await l._.billInstance.findMany({where:i,include:{bill:{include:{category:!0}},transaction:!0},orderBy:{dueDate:"desc"}}),u=["Bill Name,Due Date,Amount,Status,Category,Frequency,Paid Date,Transaction ID,Notes",...o.map(e=>[`"${e.bill.name}"`,e.dueDate.toISOString().split("T")[0],e.amount,e.status,e.bill.category.name,e.bill.frequency,e.paidDate?e.paidDate.toISOString().split("T")[0]:"",e.transactionId||"",`"${e.notes||""}"`].join(","))].join("\n");return new s.NextResponse(u,{headers:{"Content-Type":"text/csv","Content-Disposition":`attachment; filename="moneymitra-bills-${new Date().toISOString().split("T")[0]}.csv"`}})}catch(e){return console.error("Error exporting bills:",e),s.NextResponse.json({error:"Failed to export bills"},{status:500})}}let d=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/bills/export/route",pathname:"/api/bills/export",filename:"route",bundlePath:"app/api/bills/export/route"},resolvedPagePath:"/home/ubuntu/moneymitra/app/app/api/bills/export/route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:c,staticGenerationAsyncStorage:m,serverHooks:g}=d,x="/api/bills/export/route";function b(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},2334:(e,t,a)=>{a.d(t,{db:()=>i,_:()=>n});let r=require("@prisma/client"),n=globalThis.prisma??new r.PrismaClient,i=n}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),r=t.X(0,[5923,7146],()=>a(8363));module.exports=r})();