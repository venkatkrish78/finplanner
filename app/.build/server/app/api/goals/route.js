"use strict";(()=>{var e={};e.id=8677,e.ids=[8677],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6777:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>f,patchFetch:()=>h,requestAsyncStorage:()=>g,routeModule:()=>d,serverHooks:()=>y,staticGenerationAsyncStorage:()=>m});var a={};r.r(a),r.d(a,{GET:()=>c,POST:()=>p,dynamic:()=>l});var o=r(921),n=r(7380),s=r(4185),i=r(3878),u=r(2334);let l="force-dynamic";async function c(e){try{let{searchParams:t}=new URL(e.url),r=t.get("status"),a=t.get("type"),o={};r&&(o.status=r),a&&(o.goalType=a);let n=await u._.financialGoal.findMany({where:o,include:{category:!0,contributions:{orderBy:{createdAt:"desc"},take:5}},orderBy:{createdAt:"desc"}});return i.NextResponse.json(n)}catch(e){return console.error("Error fetching goals:",e),i.NextResponse.json({error:"Failed to fetch goals"},{status:500})}}async function p(e){try{let{name:t,description:r,goalType:a,targetAmount:o,targetDate:n,categoryId:s}=await e.json();if(!t||!a||!o)return i.NextResponse.json({error:"Missing required fields: name, goalType, and targetAmount are required"},{status:400});let l=await u._.financialGoal.create({data:{name:t,description:r,goalType:a,targetAmount:parseFloat(o),currentAmount:0,status:"ACTIVE",targetDate:n?new Date(n):null,categoryId:s||null},include:{category:!0,contributions:!0}});return i.NextResponse.json(l,{status:201})}catch(e){return console.error("Error creating goal:",e),i.NextResponse.json({error:"Failed to create goal"},{status:500})}}let d=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/goals/route",pathname:"/api/goals",filename:"route",bundlePath:"app/api/goals/route"},resolvedPagePath:"/home/ubuntu/moneymitra/app/app/api/goals/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:y}=d,f="/api/goals/route";function h(){return(0,s.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:m})}},2334:(e,t,r)=>{r.d(t,{db:()=>n,_:()=>o});let a=require("@prisma/client"),o=globalThis.prisma??new a.PrismaClient,n=o}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[5923,7146],()=>r(6777));module.exports=a})();