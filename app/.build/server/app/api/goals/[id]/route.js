"use strict";(()=>{var e={};e.id=5322,e.ids=[5322],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},9938:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>y,requestAsyncStorage:()=>m,routeModule:()=>g,serverHooks:()=>f,staticGenerationAsyncStorage:()=>h});var a={};r.r(a),r.d(a,{DELETE:()=>p,GET:()=>d,PUT:()=>c,dynamic:()=>l});var o=r(921),n=r(7380),i=r(4185),s=r(3878),u=r(2334);let l="force-dynamic";async function d(e,{params:t}){try{let e=await u._.financialGoal.findUnique({where:{id:t.id},include:{category:!0,contributions:{include:{transaction:!0},orderBy:{createdAt:"desc"}}}});if(!e)return s.NextResponse.json({error:"Goal not found"},{status:404});return s.NextResponse.json(e)}catch(e){return console.error("Error fetching goal:",e),s.NextResponse.json({error:"Failed to fetch goal"},{status:500})}}async function c(e,{params:t}){try{let{name:r,description:a,goalType:o,targetAmount:n,targetDate:i,status:l,categoryId:d}=await e.json(),c=await u._.financialGoal.update({where:{id:t.id},data:{name:r,description:a,goalType:o,targetAmount:parseFloat(n),targetDate:i?new Date(i):null,status:l,categoryId:d||null},include:{category:!0,contributions:!0}});return s.NextResponse.json(c)}catch(e){return console.error("Error updating goal:",e),s.NextResponse.json({error:"Failed to update goal"},{status:500})}}async function p(e,{params:t}){try{return await u._.financialGoal.delete({where:{id:t.id}}),s.NextResponse.json({success:!0})}catch(e){return console.error("Error deleting goal:",e),s.NextResponse.json({error:"Failed to delete goal"},{status:500})}}let g=new o.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/goals/[id]/route",pathname:"/api/goals/[id]",filename:"route",bundlePath:"app/api/goals/[id]/route"},resolvedPagePath:"/home/ubuntu/moneymitra/app/app/api/goals/[id]/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:h,serverHooks:f}=g,x="/api/goals/[id]/route";function y(){return(0,i.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:h})}},2334:(e,t,r)=>{r.d(t,{db:()=>n,_:()=>o});let a=require("@prisma/client"),o=globalThis.prisma??new a.PrismaClient,n=o}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[5923,7146],()=>r(9938));module.exports=a})();